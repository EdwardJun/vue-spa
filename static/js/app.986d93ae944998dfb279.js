webpackJsonp([104],{"/PXN":function(e,t,n){"use strict";var i=n("wKTW"),o={name:"tel-detail",data:function(){return{show:!1}},props:{telephone:{type:Array,default:[]},showPrefix:{type:Boolean,default:!0}},created:function(){i.a.$on("change-tel-detail",this.doChange),this.showPrefix||i.a.$on("change-tel-detail-of-tech",this.doChange)},methods:{doChange:function(e){this.show=e},doClickWrap:function(e){e.stopPropagation()}},beforeDestroy:function(){i.a.$off("change-tel-detail",this.doChange),this.showPrefix||i.a.$off("change-tel-detail-of-tech",this.doChange)}},a={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.telephone.length>0?n("div",{staticClass:"telDetail pop-modal",class:{active:e.show},on:{click:function(t){e.doChange(!1)}}},[n("div",{on:{click:function(t){e.doClickWrap(t)}}},[e._l(e.telephone,function(t){return n("a",{class:{techTel:!e.showPrefix},attrs:{href:"tel:"+t}},[e._v(e._s(e.showPrefix?"会所电话:"+t:t))])}),e._v(" "),n("a",{class:{techTel:!e.showPrefix},on:{click:function(t){e.doChange(!1)}}},[e._v("取消")])],2)]):e._e()])},staticRenderFns:[]},s=n("Z0/y")(o,a,!1,null,null,null);t.a=s.exports},"/rfF":function(e,t){},0:function(e,t){},"2DCh":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{class:this.slideClass},[this._t("default")],2)},staticRenderFns:[]},o=n("Z0/y")({name:"swiper-slide",data:function(){return{slideClass:"swiper-slide"}},ready:function(){this.update()},mounted:function(){this.update(),this.$parent.options.slideClass&&(this.slideClass=this.$parent.options.slideClass)},updated:function(){this.update()},attached:function(){this.update()},methods:{update:function(){this.$parent&&this.$parent.swiper&&this.$parent.swiper.update&&(this.$parent.swiper.update(!0),this.$parent.options.loop&&this.$parent.swiper.reLoop())}}},i,!1,null,null,null);t.default=o.exports},"3S/7":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAdCAYAAAC9pNwMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAhNJREFUeNrEl00rRFEYx2e8bCQjRVgQCwsr8lJeajJ5VzaztLAyrIQVmbEaRNghwwdQigURZmMyfAGFhIyykAillJnxf/TcnG7X3Dtzruap39x7586c3zzPOeeeM9ZoNGpJRqTRi8/no0M3mAFlICXOdkKgWLim7xeCBxARP+hyuX7FCCfYAC9gB3zGKX4SzrO5jQYQBF3gVTNjxAR4AxXgXqKCJD0E1fxjSO4HzWq5UtJycGqi1AtywSRfk9ymJabMwxJSmyCdBR5+3y3IqfxWtdgiKfVz4xT1IEO47+FubAR5ZolFKWW2zoIdQT4Psrgij+rBJSv1cmap3GU9YBNcgkFwzDMnKitWZ6r0KUl7wRcf21jaCd61BpeM1K26T/JnPteUJiLWkyp9OqwhXQPXiYjFKRNLOvJHpvmgNF6xIq1JUGpJpNSmS42I6f4eS6d0pEGjUiPidlAHdsG4jrTDqNSIWMmQGu0zS6onbuFsaeW+ASuCXEqqJ6Y1egusgiZBvi8rjSV2gEowxNe0Ti/wstYKjmSkscQT/OAP8aTfBosgwGKHjPQvsR2UsIge/mcgk8tt5zkdMWWXqYpRUAAuwDlPqcC/bG95nVS2JXfgAEzzADIrUsVKKeJbUAVywMA/7N+LQC24UovnwBL354kZfShEOo8P2v70q8XL4IMHk9PkbMOc0Bg/93/Cmqz/Tt8CDACRvJVboNq30QAAAABJRU5ErkJggg=="},"5Btp":function(e,t){},Eg0l:function(e,t,n){"use strict";var i=n("vbKY"),o=n("wKTW"),a={name:"share",data:function(){return{global:i.a.data,show:!1}},props:{shareUrl:{type:String,required:!0}},created:function(){o.a.$on("change-share-pop",this.doChange)},methods:{doChange:function(e){this.show=e},doClickWrap:function(e){e.stopPropagation()}},beforeDestroy:function(){o.a.$off("change-share-pop",this.doChange)}},s={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"share-pop pop-modal",class:{active:e.show},on:{click:function(t){e.doChange(!1)}}},[e.global.userAgent.isWX?n("div",{staticClass:"top",on:{click:function(t){e.doClickWrap(t)}}},[e._v("发送给朋友或者分享到朋友圈")]):n("div",{staticClass:"center-wrap center",on:{click:function(t){e.doClickWrap(t)}}},[n("div",[n("a",{attrs:{href:e.shareUrl}},[e._v(e._s(e.shareUrl))])]),e._v(" "),n("div",[e._v("长按复制链接，发送给您的朋友")]),e._v(" "),n("div",{on:{click:function(t){e.doChange(!1)}}},[e._v("关闭")])])])},staticRenderFns:[]};var r=n("Z0/y")(a,s,!1,function(e){n("cbqi")},null,null);t.a=r.exports},Fc8N:function(e,t,n){"use strict";t.a={bind:function(e){e.addEventListener("input",function(){var t=e.value;/\D/.test(t)&&(t=t.replace(/\D/g,"")),t.length>4&&(t=t.substring(0,4)),e.value=t})}}},IcnI:function(e,t,n){"use strict";var i=n("ZLEe"),o=n.n(i),a=n("wy9b"),s=n.n(a),r=n("9rMa"),c=n("vbKY"),u=n("wKTW");s.a.use(r.a),t.a=new r.a.Store({state:{sessionList:[],talkerMessageList:[],talker:{id:"",name:"",userId:"",serialNo:"",type:"tech",header:"",status:"free",clubId:"",clubName:"",inviteCode:"",isAppointment:!0,isPhoneAppointment:!1,appointType:"appoint",telephone:[]},newMessageTotal:0},mutations:{setMessageSessionList:function(e,t){e.sessionList=t.map(function(e){return e})},updateMessageSession:function(e,t){e.sessionList.splice(t.index,1,t.obj)},addMessageSession:function(e,t){e.sessionList.push(t)},updateNewMessageTotal:function(e){var t=0,n=c.a.data;e.sessionList.forEach(function(e){"club"==n.pageMode&&e.clubId!=n.clubId||(t+=e.newMsgCount)}),e.newMessageTotal=t},changeMessageRevokeStatus:function(e,t){for(var n=e.talkerMessageList,i=n.length-1;i>=0;i--)if(n[i].msgId==t){n[i].isRevoke=!0;break}},addWelcomeMessage:function(e,t){e.talkerMessageList.push(t)},clearTalkerMessageList:function(e){e.talkerMessageList=[]},updateChatTalker:function(e,t){var n=e.talker;o()(t).forEach(function(e){"header"==e&&(t[e]=t[e]||c.a.data.defaultHeader),n[e]=t[e]})},addMessageToCurrList:function(e,t){e.talkerMessageList.push(t),setTimeout(function(){u.a.$emit("message-wrap-to-bottom")},300)},updateMessageSendStatus:function(e,t){for(var n=void 0,i=e.talkerMessageList.length-1;i>=0;i--)if((n=e.talkerMessageList[i]).msgId==t){n.sendStatus=!1;break}},addMessagesToCurrList:function(e,t){t.forEach(function(t){e.talkerMessageList.unshift(t)})}}})},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("wy9b"),o=n.n(i),a=n("zO6J"),s=n("vbKY"),r=n("wKTW");o.a.use(a.a);var c=s.a.data,u=document,l=location.href.toString().match(/\/(\d{18,18})\/?/),d="";l&&l[1]&&(d=l[1]);var h=""!=d,p=h?"":"/",g=[],f={template:"<div></div>",created:function(){location.reload()}},m=[{path:p+"home",name:"home",meta:{checkLogin:!1},component:function(e){Promise.all([n.e(0),n.e(3)]).then(function(){var t=[n("26dS")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"404",name:"404",meta:{checkLogin:!1,fullPage:!0},component:function(e){n.e(76).then(function(){var t=[n("+H76")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"message",name:"message",meta:{checkLogin:!0},component:function(e){n.e(75).then(function(){var t=[n("J4Wv")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"blacklist",name:"blacklist",meta:{checkLogin:!0},component:function(e){n.e(94).then(function(){var t=[n("Pefq")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"technicianList",name:"technicianList",meta:{checkLogin:!1},component:function(e){n.e(13).then(function(){var t=[n("Ojy7")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"technicianDetail",name:"technicianDetail",meta:{checkLogin:!1,share:!0},component:function(e){Promise.all([n.e(0),n.e(4)]).then(function(){var t=[n("kq4r")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"order",name:"order",meta:{checkLogin:!0,isNeedBind:!0},component:function(e){Promise.all([n.e(0),n.e(74)]).then(function(){var t=[n("vF69")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"orderDetail",name:"orderDetail",meta:{checkLogin:!0},component:function(e){Promise.all([n.e(0),n.e(34)]).then(function(){var t=[n("JTPM")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"personal",name:"personal",meta:{checkLogin:!1},component:function(e){Promise.all([n.e(0),n.e(2)]).then(function(){var t=[n("3niY")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"clubProfile",name:"clubProfile",meta:{checkLogin:!1},component:function(e){n.e(98).then(function(){var t=[n("9WtS")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"serviceList",name:"serviceList",meta:{checkLogin:!1,fullPage:!0},component:function(e){Promise.all([n.e(0),n.e(71)]).then(function(){var t=[n("0dkh")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"serviceItem",name:"serviceItem",meta:{checkLogin:!1},component:function(e){Promise.all([n.e(0),n.e(27)]).then(function(){var t=[n("QYr+")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"map",name:"map",meta:{checkLogin:!1,fullPage:!0},component:function(e){n.e(51).then(function(){var t=[n("tHHe")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"comment",name:"comment",meta:{checkLogin:!1},component:function(e){Promise.all([n.e(0),n.e(22)]).then(function(){var t=[n("KMQI")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"technicianImg",name:"technicianImg",meta:{checkLogin:!1,fullPage:!0},component:function(e){n.e(97).then(function(){var t=[n("Mnoj")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"chat",name:"chat",meta:{checkLogin:!0,fullPage:!0},component:function(e){Promise.all([n.e(0),n.e(1)]).then(function(){var t=[n("AOzQ")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"login",name:"login",meta:{checkLogin:!1,fullPage:!0},component:function(e){Promise.all([n.e(0),n.e(102)]).then(function(){var t=[n("Quw4")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"confirmLogin",name:"confirmLogin",meta:{checkLogin:!1,fullPage:!0},component:function(e){Promise.all([n.e(0),n.e(88)]).then(function(){var t=[n("rWLJ")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"recoverPassword",name:"recoverPassword",meta:{checkLogin:!1,fullPage:!0},component:function(e){Promise.all([n.e(0),n.e(101)]).then(function(){var t=[n("NBuL")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"register",name:"register",meta:{checkLogin:!1,fullPage:!0},component:function(e){Promise.all([n.e(0),n.e(78)]).then(function(){var t=[n("c2lw")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"promotionsActivity",name:"promotionsActivity",meta:{checkLogin:!1},component:function(e){n.e(44).then(function(){var t=[n("fz6a")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"accountDetail",name:"accountDetail",meta:{checkLogin:!0,fullPage:!0,isNeedBind:!0},component:function(e){n.e(67).then(function(){var t=[n("jfO4")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"account",name:"account",meta:{checkLogin:!0,fullPage:!0},component:function(e){n.e(61).then(function(){var t=[n("QLfc")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"coupon",name:"coupon",meta:{checkLogin:!0},component:function(e){Promise.all([n.e(0),n.e(57)]).then(function(){var t=[n("Uv4p")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"couponDetail",name:"couponDetail",meta:{checkLogin:!0,share:!0,title:"优惠券"},component:function(e){Promise.all([n.e(0),n.e(92)]).then(function(){var t=[n("RoPw")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"confirmOrder",name:"confirmOrder",meta:{checkLogin:!1,isNeedBind:!0},component:function(e){Promise.all([n.e(0),n.e(30)]).then(function(){var t=[n("R4cb")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"paidCouponDetail",name:"paidCouponDetail",meta:{checkLogin:!1,title:"券详情"},component:function(e){Promise.all([n.e(0),n.e(38)]).then(function(){var t=[n("aJCF")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"paidCoupon",name:"paidCoupon",meta:{checkLogin:!1,isNeedBind:!0},component:function(e){Promise.all([n.e(0),n.e(23)]).then(function(){var t=[n("fyhz")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"collect",name:"collect",meta:{checkLogin:!0,fullPage:!0},component:function(e){n.e(60).then(function(){var t=[n("td7z")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"techReward",name:"techReward",meta:{checkLogin:!0,fullPage:!0},component:function(e){Promise.all([n.e(0),n.e(7)]).then(function(){var t=[n("XKwd")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"info",name:"info",meta:{checkLogin:!0},component:function(e){n.e(84).then(function(){var t=[n("iNA+")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"picture",name:"picture",meta:{checkLogin:!0},component:function(e){n.e(41).then(function(){var t=[n("+xdX")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"integralDetail",name:"integralDetail",meta:{checkLogin:!0},component:function(e){n.e(56).then(function(){var t=[n("KSb3")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"integral",name:"integral",meta:{checkLogin:!0},component:function(e){n.e(91).then(function(){var t=[n("9nRx")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"integralExplain",name:"integralExplain",meta:{checkLogin:!1},component:function(e){n.e(96).then(function(){var t=[n("57ya")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"suggestions",name:"suggestions",meta:{checkLogin:!0,fullPage:!0},component:function(e){n.e(37).then(function(){var t=[n("aJHD")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"qrPayCode",name:"qrPayCode",meta:{checkLogin:!0,fullPage:!0},component:function(e){Promise.all([n.e(0),n.e(45)]).then(function(){var t=[n("ObJD")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"tradeRecords",name:"tradeRecords",meta:{checkLogin:!0},component:function(e){n.e(87).then(function(){var t=[n("irC1")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"treat",name:"treat",meta:{checkLogin:!0,fullPage:!0},component:function(e){n.e(50).then(function(){var t=[n("l1vS")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"recharge",name:"recharge",meta:{checkLogin:!0,fullPage:!0},component:function(e){n.e(69).then(function(){var t=[n("zw9Y")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"treatExplain",name:"treatExplain",meta:{checkLogin:!1},component:function(e){n.e(99).then(function(){var t=[n("W0PT")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"treatRecords",name:"treatRecords",meta:{checkLogin:!0},component:function(e){n.e(81).then(function(){var t=[n("4v9M")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"treatDetail",name:"treatDetail",meta:{checkLogin:!0},component:function(e){n.e(42).then(function(){var t=[n("VSwf")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"member",name:"member",meta:{checkLogin:!1},component:function(e){n.e(93).then(function(){var t=[n("exWw")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"qrPay",name:"qrPay",meta:{checkLogin:!0,fullPage:!0},component:function(e){n.e(59).then(function(){var t=[n("HR8b")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"qrPayComplete",name:"qrPayComplete",meta:{checkLogin:!0,fullPage:!0},component:function(e){n.e(36).then(function(){var t=[n("xT0j")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"follow9358",name:"follow9358",meta:{checkLogin:!1,fullPage:!0},component:function(e){n.e(17).then(function(){var t=[n("cWyz")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"robProjectDetail",name:"robProjectDetail",meta:{checkLogin:!1,share:!0},component:function(e){Promise.all([n.e(0),n.e(15)]).then(function(){var t=[n("7dTz")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"robProjectSuccess",name:"robProjectSuccess",meta:{checkLogin:!0,share:!0},component:function(e){n.e(72).then(function(){var t=[n("bNZ2")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"journalList",name:"journalList",meta:{checkLogin:!1},component:function(e){n.e(80).then(function(){var t=[n("Eqxk")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"luckyWheel",name:"luckyWheel",meta:{checkLogin:!0,share:!0,isNeedBind:!1},component:function(e){Promise.all([n.e(0),n.e(12)]).then(function(){var t=[n("1TuE")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"luckyShare",name:"luckyShare",meta:{checkLogin:!1,share:!1},component:function(e){n.e(10).then(function(){var t=[n("Lhh6")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"lucky",name:"lucky",meta:{checkLogin:!0},component:function(e){Promise.all([n.e(0),n.e(83)]).then(function(){var t=[n("MTUB")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"luckyDetail",name:"luckyDetail",meta:{checkLogin:!0},component:function(e){Promise.all([n.e(0),n.e(79)]).then(function(){var t=[n("a6jq")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"wifi",name:"wifi",meta:{checkLogin:!1},component:function(e){n.e(100).then(function(){var t=[n("V7/E")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"fastPay",name:"fastPay",meta:{checkLogin:!0,fullPage:!0},component:function(e){Promise.all([n.e(0),n.e(70)]).then(function(){var t=[n("tnfE")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"fastPayRecords",name:"fastPayRecords",meta:{checkLogin:!0},component:function(e){Promise.all([n.e(0),n.e(58)]).then(function(){var t=[n("D+JE")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"fastPayError",name:"fastPayError",meta:{checkLogin:!1,fullPage:!0},component:function(e){n.e(65).then(function(){var t=[n("TftR")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"discountMall",name:"discountMall",meta:{checkLogin:!1,fullPage:!0},component:function(e){n.e(20).then(function(){var t=[n("T0pb")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"itemCardDetail",name:"itemCardDetail",meta:{checkLogin:!1,share:!0},component:function(e){Promise.all([n.e(0),n.e(48)]).then(function(){var t=[n("ernl")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"payDetail",name:"payDetail",meta:{checkLogin:!1,share:!0},component:function(e){Promise.all([n.e(0),n.e(29)]).then(function(){var t=[n("gjs2")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"payInstead",name:"payInstead",meta:{checkLogin:!1,share:!0},component:function(e){n.e(33).then(function(){var t=[n("W2BF")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"itemCardOrders",name:"itemCardOrders",meta:{checkLogin:!0,fullPage:!0},component:function(e){Promise.all([n.e(0),n.e(21)]).then(function(){var t=[n("oeT4")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"itemCardOrderDetail",name:"itemCardOrderDetail",meta:{checkLogin:!0},component:function(e){Promise.all([n.e(0),n.e(25)]).then(function(){var t=[n("rQKb")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"activities",name:"activities",meta:{checkLogin:!0},component:function(e){Promise.all([n.e(0),n.e(11)]).then(function(){var t=[n("n4ll")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"appointTech",name:"appointTech",meta:{checkLogin:!1,fullPage:!0},component:function(e){Promise.all([n.e(0),n.e(8)]).then(function(){var t=[n("E0gL")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"clubList",name:"clubList",meta:{checkLogin:!1},component:function(e){n.e(16).then(function(){var t=[n("gc3q")];e.apply(null,t)}.bind(this)).catch(n.oe)},children:[{path:"all",name:"clubList-all",meta:{checkLogin:!1},component:function(e){Promise.all([n.e(0),n.e(35)]).then(function(){var t=[n("3Xfi")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:"search",name:"clubList-search",meta:{checkLogin:!1},component:function(e){Promise.all([n.e(0),n.e(18)]).then(function(){var t=[n("kaCv")];e.apply(null,t)}.bind(this)).catch(n.oe)}}]},{path:p+"inviteActivity",name:"inviteActivity",meta:{checkLogin:!0,share:!0,title:"邀请有礼"},component:function(e){Promise.all([n.e(0),n.e(14)]).then(function(){var t=[n("98VF")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"inviteActivityGifts",name:"inviteActivityGifts",meta:{checkLogin:!0,share:!1,title:"我的礼品"},component:function(e){Promise.all([n.e(0),n.e(55)]).then(function(){var t=[n("5u3k")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"inviteActivityShare",name:"inviteActivityShare",meta:{checkLogin:!0,share:!0},component:function(e){Promise.all([n.e(0),n.e(5)]).then(function(){var t=[n("2EIN")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"itemPackageDetail",name:"itemPackageDetail",meta:{checkLogin:!1,share:!0},component:function(e){Promise.all([n.e(0),n.e(52)]).then(function(){var t=[n("lMui")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"itemCardDonationRecord",name:"itemCardDonationRecord",meta:{checkLogin:!1,share:!1},component:function(e){n.e(32).then(function(){var t=[n("GGTn")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"itemCardDonationDetail",name:"itemCardDonationDetail",meta:{checkLogin:!1,share:!1},component:function(e){n.e(82).then(function(){var t=[n("oP+c")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"itemDonationDetail",name:"itemDonationDetail",meta:{checkLogin:!1,share:!1},component:function(e){Promise.all([n.e(0),n.e(89)]).then(function(){var t=[n("O6ZG")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"itemReceive",name:"itemReceive",meta:{checkLogin:!1,share:!1},component:function(e){Promise.all([n.e(0),n.e(53)]).then(function(){var t=[n("miis")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"posPay",name:"posPay",meta:{checkLogin:!0,fullPage:!0},component:function(e){Promise.all([n.e(0),n.e(73)]).then(function(){var t=[n("BJx3")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"posPaySuccess",name:"posPaySuccess",meta:{checkLogin:!0,fullPage:!0},component:function(e){n.e(49).then(function(){var t=[n("KSjY")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"chatPictures",name:"chatPictures",meta:{checkLogin:!0,fullPage:!0},component:function(e){n.e(77).then(function(){var t=[n("XJ6I")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"ilike",name:"ilike",meta:{checkLogin:!0,fullPage:!0},component:function(e){n.e(31).then(function(){var t=[n("pCXT")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"oClockCoupon",name:"oClockCoupon",meta:{checkLogin:!0,fullPage:!0},component:function(e){Promise.all([n.e(0),n.e(39)]).then(function(){var t=[n("j3a6")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"limit",name:"limit",meta:{checkLogin:!0,fullPage:!0},component:function(e){n.e(66).then(function(){var t=[n("VjoP")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"fastClubPay",name:"fastClubPay",meta:{checkLogin:!0,fullPage:!0},component:function(e){Promise.all([n.e(0),n.e(54)]).then(function(){var t=[n("yokS")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"memberChargePay",name:"memberChargePay",meta:{checkLogin:!0,fullPage:!0},component:function(e){Promise.all([n.e(0),n.e(43)]).then(function(){var t=[n("98uk")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"fastPayCouponsList",name:"fastPayCouponsList",meta:{checkLogin:!0,fullPage:!0},component:function(e){Promise.all([n.e(0),n.e(68)]).then(function(){var t=[n("w8EV")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"serviceItemCoupon",name:"serviceItemCoupon",meta:{checkLogin:!0},component:function(e){Promise.all([n.e(0),n.e(64)]).then(function(){var t=[n("yLUg")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"fastPaySuccess",name:"fastPaySuccess",meta:{checkLogin:!0},component:function(e){Promise.all([n.e(0),n.e(24)]).then(function(){var t=[n("dXyH")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"inviteFriends",name:"inviteFriends",meta:{checkLogin:!0,fullPage:!0,title:"我邀请的好友"},component:function(e){Promise.all([n.e(0),n.e(95)]).then(function(){var t=[n("eAKI")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"inviteRewards",name:"inviteRewards",meta:{checkLogin:!0,fullPage:!0,share:!0,title:"我的奖励"},component:function(e){Promise.all([n.e(0),n.e(26)]).then(function(){var t=[n("sbr2")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"clubChains",name:"clubChains",meta:{checkLogin:!1,fullPage:!0,title:"分店地址"},component:function(e){Promise.all([n.e(0),n.e(47)]).then(function(){var t=[n("roWG")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"fastPayCashier",name:"fastPayCashier",meta:{checkLogin:!0,fullPage:!0},component:function(e){Promise.all([n.e(0),n.e(19)]).then(function(){var t=[n("VEc2")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"fastClubPayCashier",name:"fastClubPayCashier",meta:{checkLogin:!0,fullPage:!0},component:function(e){n.e(28).then(function(){var t=[n("JVfH")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"notFastPayList",name:"notFastPayList",meta:{checkLogin:!0,fullPage:!0},component:function(e){n.e(40).then(function(){var t=[n("TZ1k")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"cacheClean",name:"cacheClean",meta:{checkLogin:!1,fullPage:!1},component:function(e){n.e(90).then(function(){var t=[n("KP8+")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"groupBuyActDetail",name:"groupBuyActDetail",meta:{checkLogin:!0,fullPage:!0,share:!0},component:function(e){Promise.all([n.e(0),n.e(9)]).then(function(){var t=[n("wKBf")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"groupBuyActShare",name:"groupBuyActShare",meta:{checkLogin:!0,fullPage:!0,share:!0},component:function(e){Promise.all([n.e(0),n.e(6)]).then(function(){var t=[n("NkJW")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"groupBuyActJoinSuccess",name:"groupBuyActJoinSuccess",meta:{checkLogin:!0,fullPage:!0,share:!0},component:function(e){Promise.all([n.e(0),n.e(63)]).then(function(){var t=[n("yTaq")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"groupBuyActFinished",name:"groupBuyActFinished",meta:{checkLogin:!0,fullPage:!0},component:function(e){Promise.all([n.e(0),n.e(62)]).then(function(){var t=[n("LdI3")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"groupBuyRecords",name:"groupBuyRecords",meta:{checkLogin:!0,fullPage:!0,share:!0},component:function(e){Promise.all([n.e(0),n.e(85)]).then(function(){var t=[n("Wfjs")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"groupBuyRecordDetail",name:"groupBuyRecordDetail",meta:{checkLogin:!0,fullPage:!0},component:function(e){Promise.all([n.e(0),n.e(86)]).then(function(){var t=[n("O476")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:p+"fastPayDetail",name:"fastPayDetail",meta:{checkLogin:!0,fullPage:!0},component:function(e){Promise.all([n.e(0),n.e(46)]).then(function(){var t=[n("8vkL")];e.apply(null,t)}.bind(this)).catch(n.oe)}}];m.push({path:h?"/clubList/*":"/:clubId/*",component:f}),m.push({path:"/",redirect:{name:h?"home":"clubList"}}),m.push({path:"*",redirect:{name:h?"home":"clubList"}}),h&&g.push({path:"/"+d,component:{template:"<router-view></router-view>"},children:m});var v=new a.a({linkActiveClass:"active",routes:h?g:m});v.beforeEach(function(e,t,n){if(("club"==c.pageMode&&!c.isClubOnline||c.userInBlicklist)&&"404"!=e.name)return n({name:"404"});if(null==e.name&&h&&setTimeout(function(){location.reload()},0),c.bodyScrollTop=u.body.scrollTop,e.name==t.name)return n();if(!s.a.checkAccess(e.name)||"clubList"==e.name&&/clubList-/.test(t.name))return n(!1);if(c.isLogin&&/^(login|confirmLogin)$/.test(e.name))return n(!1),void v.go("login"==e.name?-2:-3);if(c.loading=!0,e.meta.checkLogin&&!c.spec&&(!c.isLogin||!c.token))return s.a.login(null,e.name,e.query,!0),"login"==c.currPage.name&&(c.loading=!1),n({name:"login"});var i=u.body;e.meta.fullPage?i.classList.add("full"):i.classList.remove("full");var o=!!e.meta.isNeedBind,a=c.currPage,l=c.lastPage;l.name=t.name,l.query=a.query,a.query=e.query,a.name=e.name;var d=location.href.split("#")[0].split("?");if(d.length>1){var p;d=d[1].split("&");for(var g=0;g<d.length;g++)2==(p=d[g].split("=")).length&&(a.query[p[0]]=decodeURIComponent(p[1]))}o&&!c.userTel&&r.a.$emit("pop-bind-phone"),c.showAppMenu=h&&/^(home|message|order|personal|technicianList|blacklist)$/.test(e.name),c.show9358Menu=!h&&/(clubList|message|personal|blacklist)/.test(e.name),c.showServiceBtn=h&&/^(home|order|personal|activities|technicianList)$/.test(e.name),i.scrollTop=0,e.meta.title&&(document.title=e.meta.title),n()}),v.afterEach(function(e){c.userAgent.isWX&&!0!==e.meta.share&&s.a.shareConfig(c.shareConfigOption,"global"),c.eventMask=!1});var y=v,C=n("LyPZ"),I={data:function(){return{showBtn:!1,hasRun:!1,global:s.a.data,canShow:!1}},watch:{"global.showServiceBtn":function(e){e?this.showBtn=!1:(this.showBtn=!1,this.canShow=!1)}},mounted:function(){this.global.showServiceBtn&&(this.showBtn=!0),r.a.$on("do-show-service-btn",this.doShow)},methods:{doShow:function(){var e=this;e.$nextTick(function(){var t=e.$refs;setTimeout(function(){e.showBtn=!0,e.canShow=!0,e.hasRun||(t.serviceTip.classList.add("run"),t.servicer.classList.add("run"),t.serviceFont.classList.add("run"),e.hasRun=!0)},400)})},doServiceAniEnd:function(){this.$refs.servicer.classList.add("fix"),this.$refs.serviceFont.classList.add("fix")},doServiceTipAniEnd:function(){this.$refs.serviceWrap.classList.add("fix")},doContactServicer:function(){var e=this,t=e.global;e.$http.get("../api/v2/club/emchat/service/get",{params:{clubId:t.clubId}}).then(function(t){var n=(t=t.body).statusCode;200==n&&t.respData?e.$router.push({name:"chat",query:{techId:t.respData.techId}}):211==n?r.a.$emit("change-tel-detail",!0):210==n&&r.a.$emit("do-show-service-tip",!0)})}},beforeDestroy:function(){r.a.$off("do-show-service-btn",this.doShow)}},b={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"show",rawName:"v-show",value:e.showBtn&&e.canShow,expression:"showBtn && canShow"}],ref:"serviceWrap",staticClass:"customer-service",on:{click:function(t){e.doContactServicer()}}},[n("div",{ref:"serviceTip",on:{animationend:function(t){e.doServiceTipAniEnd()}}},[e._v("想了解更多服务项目，点我！")]),e._v(" "),n("div",{ref:"servicer",on:{animationend:function(t){e.doServiceAniEnd()}}},[n("div",{ref:"serviceFont",on:{animationend:function(t){e.doServiceAniEnd()}}})])])},staticRenderFns:[]},M=n("Z0/y")(I,b,!1,null,null,null).exports,S=n("TVG1"),A={data:function(){return{global:s.a.data,show:!1}},mounted:function(){r.a.$on("do-show-service-tip",this.doShow)},methods:{doShow:function(){this.show=!0},doCancel:function(){this.show=!1},doConfirm:function(){0==this.global.clubTelephone.length?S.a.tipShow("暂无会所电话！"):(this.show=!1,r.a.$emit("change-tel-detail",!0))}},beforeDestroy:function(){r.a.$off("do-show-service-tip",this.doShow)}},w={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"service-tip-pop pop-modal",class:{active:e.show}},[n("div",{staticClass:"center-wrap"},[n("div",[e._v("提醒")]),e._v(" "),n("div",[e._v("抱歉，会所客服正在忙碌，无法提供及时的服务。您可拨打会所电话进行咨询，是否拨打会所电话？")]),e._v(" "),n("div",[n("div",{on:{click:function(t){e.doCancel()}}},[e._v("不，谢谢")]),e._v(" "),n("div",{on:{click:function(t){e.doConfirm()}}},[e._v("拨打电话")])])])])},staticRenderFns:[]},_=n("Z0/y")(A,w,!1,null,null,null).exports,E={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"spinner-wrap"},[n("div",{staticClass:"spinner"},[n("div",{staticClass:"spinner-container container1"},[n("div",{staticClass:"circle1"}),e._v(" "),n("div",{staticClass:"circle2"}),e._v(" "),n("div",{staticClass:"circle3"}),e._v(" "),n("div",{staticClass:"circle4"})]),e._v(" "),n("div",{staticClass:"spinner-container container2"},[n("div",{staticClass:"circle1"}),e._v(" "),n("div",{staticClass:"circle2"}),e._v(" "),n("div",{staticClass:"circle3"}),e._v(" "),n("div",{staticClass:"circle4"})]),e._v(" "),n("div",{staticClass:"spinner-container container3"},[n("div",{staticClass:"circle1"}),e._v(" "),n("div",{staticClass:"circle2"}),e._v(" "),n("div",{staticClass:"circle3"}),e._v(" "),n("div",{staticClass:"circle4"})])])])}]};var T=n("Z0/y")(null,E,!1,function(e){n("5Btp")},null,null).exports,L=n("/PXN"),P={components:{Share:n("Eg0l").a},data:function(){return{global:s.a.data,show:!1,avatarUrl:"",techId:"",techName:"",clubName:"",clubId:"",shareUrl:"",qrcodeType:""}},created:function(){r.a.$on("pop-reward",this.popReward)},methods:{popReward:function(e){var t=this,n=this,i=n.global;n.avatarUrl=e.avatarUrl||i.defaultHeader,n.techId=e.id,n.techName=e.name,n.clubName=e.clubName,n.clubId=e.clubId,n.shareUrl=i.prefixPathname+"#/"+n.clubId+"/technicianDetail?visitChannel=9358&isNeedFollow=true&id="+n.techId,i.userAgent.isWX&&s.a.shareConfig({title:n.techName+"欢迎您",desc:"点我聊聊，更多优惠，更好服务！",link:n.shareUrl,imgUrl:n.avatarUrl,success:function(){t.qrcodeType&&n.$http.post("../api/v1/scan/code/stat",{clubId:t.clubId,qrcodeType:t.qrcodeType,statType:"share",techId:t.techId})}},"technicianDetail-"+n.techId),n.show=!0},doClose:function(){this.show=!1},doClickShare:function(){r.a.$emit("change-share-pop",!0)}},beforeDestroy:function(){r.a.$off("pop-reward",this.popReward)}},k={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"reward-pop-wrap pop-modal",class:{active:e.show}},[n("div",{staticClass:"wrap-content"},[n("div",[n("div",[n("div",{style:{"background-image":"url("+e.avatarUrl+")"}}),e._v(" "),n("div",[n("div",[e._v(e._s(e.techName))]),n("div",[e._v(e._s(e.clubName||e.global.clubName))])])])]),e._v(" "),e._m(0),e._v(" "),n("div",[n("div",{on:{click:function(t){e.doClickShare()}}},[e._v("分享名片")])]),e._v(" "),n("div",{on:{click:function(t){e.doClose()}}},[e._v("×")])]),e._v(" "),n("Share",{attrs:{"share-url":e.shareUrl}})],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("div",[t("p",[this._v("这么棒棒哒技师，赶紧告诉小伙伴吧！")])])])}]};var N=n("Z0/y")(P,k,!1,function(e){n("OI1G")},null,null).exports,x=n("f9Ou"),O=n("Fc8N"),D={directives:{"tel-input":x.a,"test-code-input":O.a},data:function(){return{global:s.a.data,show:!1,phoneCode:"",phoneNumber:"",inCodeGetting:!1,timeCount:60,inBinding:!1}},computed:{isTestCodeVaild:function(){return/^\d{4}$/.test(this.phoneCode)},isTelValid:function(){return/^1[3456789]\d{9}$/.test(this.phoneNumber)}},created:function(){r.a.$on("pop-bind-phone",this.pop)},methods:{pop:function(){this.phoneCode="",this.phoneNumber="",this.inCodeGetting=!1,this.timeCount=60,this.inBinding=!1,this.show=!0},doConfirm:function(){var e=this;e.inBinding&&S.a.tipShow("绑定中，请稍候..."),e.isTestCodeVaild&&e.isTelValid&&(e.inBinding=!0,s.a.execBindPhone(e.phoneNumber,e.phoneCode).then(function(t){200==t.statusCode?(t=t.respData,S.a.tipShow(t.message||"绑定成功！"),e.show=!1):"HAS_BOUND"!=t.msg?(t.msg=t.msg?0==t.msg.indexOf("绑定失败")?t.msg:"绑定失败："+t.msg:"绑定失败",S.a.tipShow(t.msg)):e.show=!1,e.inBinding=!1}))},doClose:function(){this.show=!1},doGetCode:function(){var e=this;if(e.isTelValid&&!e.inCodeGetting){e.timeCount=60,e.inCodeGetting=!0;var t=setInterval(function(){e.timeCount--,0==e.timeCount&&(e.inCodeGetting=!1,clearInterval(t))},1e3);e.$http.get("../api/v1/verifyCode",{params:{mobile:e.phoneNumber,which:"userBindPhoneNumber"}})}}},beforeDestroy:function(){r.a.$off("pop-bind-phone",this.pop)}},R={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"bind-phone-wrap pop-modal",class:{active:e.show}},[n("div",{staticClass:"center-wrap"},[n("div",{staticClass:"wrap"},[n("div",{staticClass:"title"},[e._v("绑定手机")]),e._v(" "),n("div",{staticClass:"section tel"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.phoneNumber,expression:"phoneNumber"},{name:"tel-input",rawName:"v-tel-input"}],attrs:{type:"tel",maxlength:"11",placeholder:"请输入手机号码"},domProps:{value:e.phoneNumber},on:{input:function(t){t.target.composing||(e.phoneNumber=t.target.value)}}})]),e._v(" "),n("div",{staticClass:"section code"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.phoneCode,expression:"phoneCode"},{name:"test-code-input",rawName:"v-test-code-input"}],attrs:{type:"tel",maxlength:"4",placeholder:"请输入验证码"},domProps:{value:e.phoneCode},on:{input:function(t){t.target.composing||(e.phoneCode=t.target.value)}}}),e._v(" "),n("button",{class:{notel:!e.isTelValid,disabled:e.inCodeGetting},on:{click:function(t){e.doGetCode()}}},[e._v(e._s(e.inCodeGetting?"重发("+e.timeCount+")":"获取验证码"))])]),e._v(" "),n("div",{staticClass:"submit",class:{disabled:!e.isTestCodeVaild||!e.isTelValid,processing:e.inBinding},on:{click:function(t){e.doConfirm()}}},[e._v(e._s(e.inBinding?"绑定中":"确认"))])]),e._v(" "),n("div",{staticClass:"close",on:{click:function(t){e.doClose()}}},[e._v("×")])])])},staticRenderFns:[]};var F=n("Z0/y")(D,R,!1,function(e){n("/rfF")},null,null).exports,U={data:function(){return{global:s.a.data,hasServicer:!1}},computed:{total:function(){return this.$store.state.newMessageTotal}},components:{ServiceBtn:M,ServiceTipPop:_,Spinner:T,TelDetail:L.a,RewardPop:N,BindPhonePop:F},watch:{"global.token":function(e){var t=this.global;e&&t.clubId&&(this.$http.post("../api/v2/log/add",{clubId:t.clubId,timestamp:+new Date,token:e,module:"LOGIN",remark:""}),s.a.bindClubTech(e))}},created:function(){var e=this.global,t=window;if(this.hasServicer=!0,/(spa.93wifi.com|sdcm165.stonebean.com)/.test(location.hostname)){var n=document.createElement("script");n.onload=function(){t._hmt=t._hmt||[]},n.src="http://hm.baidu.com/h.js?2b7f463ac6f2cf5b303005839e722cdc",document.querySelector("head").appendChild(n)}e.router=this.$router,t.addEventListener("resize",function(){s.a.resizeWidth()}),s.a.resizeWidth()}},B={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"page-container"}},[n("transition",{attrs:{name:"fade",mode:"out-in"}},[n("router-view")],1),e._v(" "),"club"==e.global.pageMode?n("div",{directives:[{name:"show",rawName:"v-show",value:e.global.showAppMenu&&!e.global.loading,expression:"global.showAppMenu && !global.loading"}],staticClass:"menu-container club"},e._l(e.global.clubHomeConfig.bottom_menu,function(t,i){return n("router-link",{key:i,class:t.code,attrs:{to:{name:t.code}}},["message"==t.code?n("div",[n("i",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}]},[e._v(e._s(e.total))])]):"personal"==t.code?n("div",[n("i",{directives:[{name:"show",rawName:"v-show",value:e.global.reminds.total>0,expression:"global.reminds.total>0"}]},[e._v(e._s(e.global.reminds.total))])]):n("div"),e._v(" "),n("div",[e._v(e._s(t.title))])])})):n("div",{directives:[{name:"show",rawName:"v-show",value:e.global.show9358Menu,expression:"global.show9358Menu"}],staticClass:"menu-container public"},[n("router-link",{staticClass:"clubList",attrs:{to:{name:"clubList"}}},[n("div"),n("div",[e._v("首页")])]),e._v(" "),n("router-link",{staticClass:"message",attrs:{to:{name:"message"}}},[n("div",[n("i",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}]},[e._v(e._s(e.total))])]),n("div",[e._v("聊天")])]),e._v(" "),n("router-link",{staticClass:"personal",attrs:{to:{name:"personal"}}},[n("div",[n("i",{directives:[{name:"show",rawName:"v-show",value:e.global.reminds.total>0,expression:"global.reminds.total>0"}]},[e._v(e._s(e.global.reminds.total))])]),n("div",[e._v("个人中心")])])],1),e._v(" "),e.hasServicer?n("ServiceBtn"):e._e(),e._v(" "),n("ServiceTipPop"),e._v(" "),e.global.clubTelephone.length>0?n("TelDetail",{attrs:{telephone:e.global.clubTelephone}}):e._e(),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.global.eventMask,expression:"global.eventMask"}],staticClass:"event-mask"}),e._v(" "),n("RewardPop"),e._v(" "),n("BindPhonePop"),e._v(" "),n("Spinner",{directives:[{name:"show",rawName:"v-show",value:e.global.loading,expression:"global.loading"}]})],1)},staticRenderFns:[]};var G=n("Z0/y")(U,B,!1,function(e){n("e4FV")},null,null).exports,q=n("IcnI"),H=n("6EQH"),K=n.n(H);o.a.use(C.a),o.a.use(K.a),o.a.http.options.emulateJSON=!0,o.a.config.productionTip=!1,s.a.beforeInit();var W=s.a.data,Y=window;Y._g=s.a,Y._u=S.a,Y._store=q.a,o.a.http.interceptors.push(function(e,t){var n;"get"===e.method.toLowerCase()?(n=e.params)._=+new Date:n=e.body,n.sessionType=W.sessionType,n.token||(n.token=W.token),n.tokenId||(n.tokenId=S.a.generateUUID()),e.headers.set("xmdAppId",W.xmdAppId),e.headers.set("appId",W.appId),t(function(e){if(401!=e.status&&401!=e.body.statusCode){var t=e.body;if("string"==typeof t)try{e.body=t=JSON.parse(t)}catch(e){}return t&&500===t.statusCode&&console.log("req error："+e.url),e}W.userAgent.isWX?S.a.tipShow("请求异常！401"):s.a.login()})}),s.a.init().then(function(){s.a.getClubData().then(function(){new o.a({el:"#_app",router:y,store:q.a,render:function(e){return e(G)}})})})},OI1G:function(e,t){},S4rg:function(e,t,n){"use strict";t.a={"/::O":"/大笑","/::Y":"/坏笑","/::B":"/害羞","/::A":"/色","/::C":"/晕","/::D":"/红心","/::X":"/心碎了","/::Z":"/握手","/::F":"/抱拳","/::E":"/花","/::T":"/花谢了","/::P":"/示爱","/::G":"/亲亲","/::H":"/大哭","/::I":"/可怜","/::J":"/生气","/::K":"/微笑","/::L":"/冷汗","/::M":"/困","/::N":"/调皮","/::Q":"/敲打","/::R":"/疑问","/::S":"/猪头","/::U":"/汽水","/::V":"/西瓜","/::W":"/鼓掌","/::a":"/大拇指","/::b":"/剪刀手"}},TVG1:function(e,t,n){"use strict";var i={Mon:"周一",Tues:"周二",Wed:"周三",Thur:"周四",Fri:"周五",Sat:"周六",Sun:"周日"};t.a={data:{tip:document.querySelector("#app-tip")},tipShow:function(e,t){var n=this.data.tip;n||(n=this.data.tip=document.querySelector("#app-tip")),n.children[0].innerHTML=e,n.classList.add("active"),setTimeout(function(){n.classList.remove("active")},t||3e3)},localStorage:function(e){function t(t,n,i){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t,n){if(e=(n||"spa_")+e,!t)return localStorage.getItem(e)||"";localStorage.setItem(e,t)}),removeLocalStorage:function(e,t){e&&localStorage.removeItem((t||"spa_")+e)},sessionStorage:function(e){function t(t,n,i){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t,n){if(e=(n||"spa_")+e,!t)return sessionStorage.getItem(e);sessionStorage.setItem(e,t)}),removeSessionStorage:function(e,t){e&&sessionStorage.removeItem((t||"spa_")+e)},generateUUID:function(){var e=+new Date;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:3&n|8).toString(16)})},dateFormat:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy-MM-dd hh:mm:ss",n={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(var i in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+i+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?n[i]:("00"+n[i]).substr((""+n[i]).length)));return t},parseDateFormat:function(e,t){var n=new Date(e),i=n.getMonth()+1,o=n.getDate(),a=n.getHours(),s=n.getMinutes(),r=n.getSeconds();a=a>9?a:"0"+a,s=s>9?s:"0"+s,r=r<10?"0"+r:r;var c=n.getFullYear()+"-"+(i<10?"0"+i:i)+"-"+(o<10?"0"+o:o);return"long"==t?c+" "+a+":"+s+":"+r:c},stringToDate:function(e){if(e){var t=e.split(" "),n=t[0].split("-"),i=void 0,o=new Date;return 3==n.length&&o.setFullYear(n[0]-0,n[1]-1,n[2]-0),t[1]&&((i=t[1].split(":"))[0]&&o.setHours(i[0]-0),i[1]&&o.setMinutes(i[1]-0),i[2]&&o.setSeconds(i[2]-0)),o}},spaceFormat:function(e,t,n,i,o){if(e){var a="";t=!0===t,n=Math.abs(n||4),i=Math.abs(i||1),o=o||" ";var s=new RegExp("(\\S{"+n+"})","g");t&&(s=new RegExp("(\\S)(?=(\\S{"+n+"})+$)","g"));for(var r=i;r>0;r--)a+=o;return e.replace(s,"$1"+a)}},urlFormat:function(e){var t=e.split("?")[1],n=t,i=t.split("#"),o=void 0,a={},s=null,r=void 0,c=void 0;if(t=i[0],i=i[1],t){var u=t.split("&");for(o=0;o<u.length;o++)2==(r=u[o].split("=")).length&&(a[r[0]]=r[1])}if(i){var l=i.split("&");for(o=0;o<l.length;o++)1==(r=l[o].split("=")).length&&n.indexOf("#"+r[0])>=0?c=r[0]:2==r.length&&(s||(s={}),s[r[0]]=r[1])}return{path:"/"+(a.club?a.club+"/":"")+c,page:c||"",params:a,query:s}},getPageParams:function(e){var t=new RegExp("(^|&)?([da-zA-Z_]+)=([^&\\?#/\\\\]*)(\\?|#|/|\\\\|&|$)","ig"),n=location,i={},o="",a=void 0;return[n.search.substring(1),n.hash.substring(1)].forEach(function(e){for(o=t.exec(e);o;)a=o[3],i[o[2]]=a,o=t.exec(e)}),e?i[e]||"":i},getLocation:function(e,t){navigator.geolocation?navigator.geolocation.getCurrentPosition(e,function(e){var n="";switch(e.code){case e.PERMISSION_DENIED:n="用户拒绝对获取地理位置的请求。";break;case e.POSITION_UNAVAILABLE:n="位置信息是不可用的。";break;case e.TIMEOUT:n="请求用户地理位置超时。";break;case e.UNKNOWN_ERROR:n="未知错误。"}"function"==typeof t&&t(n,e.code)}):"function"==typeof t&&t("该浏览器不支持定位。")},getGreatCircleDistance:function(e,t,n,i){var o=e*Math.PI/180,a=n*Math.PI/180,s=o-a,r=t*Math.PI/180-i*Math.PI/180,c=2*Math.asin(Math.sqrt(Math.pow(Math.sin(s/2),2)+Math.cos(o)*Math.cos(a)*Math.pow(Math.sin(r/2),2)));return c=Math.round(6378.137*c*1e4)/10},distanceFormat:function(e){return e&&e!=Number.MAX_VALUE?(e=1e3*parseFloat(e,10),isNaN(e)||1e9==e?"- m":e>1e3?(e/1e3).toFixed(1)+"km":e.toFixed(0)+"m"):"- m"},paddingTime:function(e){return e<10?"0"+e:e},getCustomActTime:function(e){return e.replace(/,/g,"，").replace(/(Mon|Tues|Wed|Thur|Fri|Sat|Sun)/g,function(){return i[arguments[0]]||arguments[0]})}}},XT6C:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABsAAAAjCAYAAABl/XGVAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAWpJREFUeNpi/P//PwO9AAuMMWvWLFUg1QHELkDMR6G5n4B4DxBXpKWl3YYJMoJ8BrRIDcg+CcQCVPbMByC2AFp4E9ln7VCLdgBxElDyOSU2AB0vCaTmAbEHELcBcTCyZS5QOgmI9YGKzwJpSTLteg41B4SfAbErTIIJSoPjCOqjeRRYxADVOw8pdHgxEgiaYpDFjGQG4X9cjmVioCMYtWzUslHLRi0btWyALWPBUflJQqsKcsELYn2WgksxkeAJECcT5TNgpbmNwpqapGDEVQOzAaluII6BCi0B4lKg435R3TIg6ALiPCQ+iP0d1DakRWqMhbVNkNonqUMq6eMCi4E4Hy1LzCHHZ5+QWrK4QBkQTwLi91AMYtfiSVASUOYX9Lb+WiA7CIhByT4ZGCeU5DOQeTJAaiYQewHxOqB5KM3vKiB2gko+ByqmZseiCiUYob0MM5ArgPgzFSz5DDXLHNaDgQfjsCz1AQIMAHvQbFoYhsT6AAAAAElFTkSuQmCC"},aEDl:function(e,t){},cbqi:function(e,t){},e4FV:function(e,t){},f2qF:function(e,t,n){"use strict";t.a={db:null,userId:"",sessionStoreName:"",messageStoreName:"",openDB:function(e,t,n){var i=this;i.userId=e,i.sessionStoreName="session",i.messageStoreName="message";var o=indexedDB.open("spadb-"+t+e,1);o.onsuccess=function(e){i.db=e.target.result,n&&n()},o.onerror=function(){},o.onupgradeneeded=function(e){var t=i.db=e.target.result,n=i.sessionStoreName,o=i.messageStoreName,a=t.objectStoreNames;a.contains(n)||t.createObjectStore(n,{keyPath:"id",autoIncrement:!1}).createIndex("index","name",{unique:!1});a.contains(o)||t.createObjectStore(o,{keyPath:"id",autoIncrement:!0}).createIndex("index","chatId",{unique:!1})}},closeDB:function(){this.db&&this.db.close()},getSessionList:function(e){var t=this.sessionStoreName,n=[];this.db.transaction(t,"readonly").objectStore(t).openCursor().onsuccess=function(){var t=this.result;t?(n.push(t.value),t.continue()):e&&e(n)}},saveSession:function(e){var t=this.sessionStoreName,n=this.db.transaction(t,"readwrite").objectStore(t);e.forEach(function(e){n.put(e)})},delSession:function(e){var t=this.sessionStoreName,n=this.db.transaction(t,"readwrite").objectStore(t).index("index").openCursor(),i=void 0,o={};e.forEach(function(e){o[e.id]=!0}),n.onsuccess=function(){(i=this.result)&&(o[i.value.id]&&i.delete(),i.continue())}},saveMessage:function(e){var t=this.messageStoreName;this.db.transaction(t,"readwrite").objectStore(t).put(e)},changeOrderMessagePayStatus:function(e,t,n){var i=this.messageStoreName,o=void 0,a=void 0;this.db.transaction(i,"readwrite").objectStore(i).index("index").openCursor(IDBKeyRange.only(e),"prev").onsuccess=function(){(o=this.result)&&((a=o.value).data.orderId==t?(a.data.hasPay=n,o.update(a)):o.continue())}},changMessageRevokeStatus:function(e,t,n){var i=this.messageStoreName,o=this.db.transaction(i,"readwrite").objectStore(i).index("index").openCursor(IDBKeyRange.only(t),"prev"),a=void 0,s=void 0;n=!!n,o.onsuccess=function(){(a=this.result)&&(s=a.value,!n&&s.msgId==e||n&&s.id==e?(s.isRevoke=!0,a.update(s)):a.continue())}},updateMessageStatus:function(e,t,n,i){var o=this.messageStoreName,a=void 0,s=void 0;this.db.transaction(o,"readwrite").objectStore(o).index("index").openCursor(IDBKeyRange.only(t),"prev").onsuccess=function(){(a=this.result)&&((s=a.value).msgId==e?(s[i]=n,a.update(s)):a.continue())}},updateMessageReadStatus:function(e,t,n){this.updateMessageStatus(e,t,n,"readStatus")},updateMessageSendStatus:function(e,t,n){this.updateMessageStatus(e,t,n,"sendStatus")},getLastedMessage:function(e,t){var n=this.messageStoreName,i=void 0;this.db.transaction(n,"readonly").objectStore(n).index("index").openCursor(IDBKeyRange.only(e),"prev").onsuccess=function(){i=this.result,t&&t(i?i.value:null)}},getMessageList:function(e,t){var n=this.messageStoreName,i=[];this.db.transaction(n,"readonly").objectStore(n).index("index").openCursor(IDBKeyRange.only(e.chatId),"prev").onsuccess=function(){var n=this.result;n?n.value.id<=e.endId?(i.push(n.value),i.length<e.pageSize?n.continue():t&&t(i)):n.continue():t&&t(i)}},delMessageRecord:function(e){var t=this.messageStoreName;this.db.transaction(t,"readwrite").objectStore(t).delete(e)},delMessage:function(e){var t=this,n=t.messageStoreName,i=void 0,o=[];t.db.transaction(n,"readwrite").objectStore(n).index("index").openCursor(IDBKeyRange.only(e),"prev").onsuccess=function(){if(i=this.result)o.push(i.value.id),i.continue();else if(o.length>0)for(var n=0;n<o.length;n++)0==n?t.changMessageRevokeStatus(o[n],e,!0):t.delMessageRecord(o[n])}}}},f9Ou:function(e,t,n){"use strict";t.a={bind:function(e){e.addEventListener("input",function(){var t=e.value;/\D/.test(t)&&(t=t.replace(/\D/g,"")),1==t.length&&1!=t&&(t=""),2!=t.length||/^1[3456789]$/.test(t)||(t=1),t.length>11&&(t=t.substring(0,11)),e.value=t})}}},q06d:function(e,t,n){"use strict";(function(e){var i=n("hRKE"),o=n.n(i);!function(t){if("object"===("undefined"==typeof exports?"undefined":o()(exports)))e.exports=t();else if("function"==typeof define&&n("xPu+"))define(t);else{var i;try{i=window}catch(e){i=self}i.SparkMD5=t()}}(function(e){var t=function(e,t){return e+t&4294967295},n=function(e,n,i,o,a,s){return n=t(t(n,e),t(o,s)),t(n<<a|n>>>32-a,i)},i=function(e,t,i,o,a,s,r){return n(t&i|~t&o,e,t,a,s,r)},o=function(e,t,i,o,a,s,r){return n(t&o|i&~o,e,t,a,s,r)},a=function(e,t,i,o,a,s,r){return n(t^i^o,e,t,a,s,r)},s=function(e,t,i,o,a,s,r){return n(i^(t|~o),e,t,a,s,r)},r=function(e,n){var r=e[0],c=e[1],u=e[2],l=e[3];r=i(r,c,u,l,n[0],7,-680876936),l=i(l,r,c,u,n[1],12,-389564586),u=i(u,l,r,c,n[2],17,606105819),c=i(c,u,l,r,n[3],22,-1044525330),r=i(r,c,u,l,n[4],7,-176418897),l=i(l,r,c,u,n[5],12,1200080426),u=i(u,l,r,c,n[6],17,-1473231341),c=i(c,u,l,r,n[7],22,-45705983),r=i(r,c,u,l,n[8],7,1770035416),l=i(l,r,c,u,n[9],12,-1958414417),u=i(u,l,r,c,n[10],17,-42063),c=i(c,u,l,r,n[11],22,-1990404162),r=i(r,c,u,l,n[12],7,1804603682),l=i(l,r,c,u,n[13],12,-40341101),u=i(u,l,r,c,n[14],17,-1502002290),c=i(c,u,l,r,n[15],22,1236535329),r=o(r,c,u,l,n[1],5,-165796510),l=o(l,r,c,u,n[6],9,-1069501632),u=o(u,l,r,c,n[11],14,643717713),c=o(c,u,l,r,n[0],20,-373897302),r=o(r,c,u,l,n[5],5,-701558691),l=o(l,r,c,u,n[10],9,38016083),u=o(u,l,r,c,n[15],14,-660478335),c=o(c,u,l,r,n[4],20,-405537848),r=o(r,c,u,l,n[9],5,568446438),l=o(l,r,c,u,n[14],9,-1019803690),u=o(u,l,r,c,n[3],14,-187363961),c=o(c,u,l,r,n[8],20,1163531501),r=o(r,c,u,l,n[13],5,-1444681467),l=o(l,r,c,u,n[2],9,-51403784),u=o(u,l,r,c,n[7],14,1735328473),c=o(c,u,l,r,n[12],20,-1926607734),r=a(r,c,u,l,n[5],4,-378558),l=a(l,r,c,u,n[8],11,-2022574463),u=a(u,l,r,c,n[11],16,1839030562),c=a(c,u,l,r,n[14],23,-35309556),r=a(r,c,u,l,n[1],4,-1530992060),l=a(l,r,c,u,n[4],11,1272893353),u=a(u,l,r,c,n[7],16,-155497632),c=a(c,u,l,r,n[10],23,-1094730640),r=a(r,c,u,l,n[13],4,681279174),l=a(l,r,c,u,n[0],11,-358537222),u=a(u,l,r,c,n[3],16,-722521979),c=a(c,u,l,r,n[6],23,76029189),r=a(r,c,u,l,n[9],4,-640364487),l=a(l,r,c,u,n[12],11,-421815835),u=a(u,l,r,c,n[15],16,530742520),c=a(c,u,l,r,n[2],23,-995338651),r=s(r,c,u,l,n[0],6,-198630844),l=s(l,r,c,u,n[7],10,1126891415),u=s(u,l,r,c,n[14],15,-1416354905),c=s(c,u,l,r,n[5],21,-57434055),r=s(r,c,u,l,n[12],6,1700485571),l=s(l,r,c,u,n[3],10,-1894986606),u=s(u,l,r,c,n[10],15,-1051523),c=s(c,u,l,r,n[1],21,-2054922799),r=s(r,c,u,l,n[8],6,1873313359),l=s(l,r,c,u,n[15],10,-30611744),u=s(u,l,r,c,n[6],15,-1560198380),c=s(c,u,l,r,n[13],21,1309151649),r=s(r,c,u,l,n[4],6,-145523070),l=s(l,r,c,u,n[11],10,-1120210379),u=s(u,l,r,c,n[2],15,718787259),c=s(c,u,l,r,n[9],21,-343485551),e[0]=t(r,e[0]),e[1]=t(c,e[1]),e[2]=t(u,e[2]),e[3]=t(l,e[3])},c=function(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n},u=function(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24);return n},l=function(e){var t,n,i,o,a,s,u=e.length,l=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=u;t+=64)r(l,c(e.substring(t-64,t)));for(n=(e=e.substring(t-64)).length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<n;t+=1)i[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(r(l,i),t=0;t<16;t+=1)i[t]=0;return o=(o=8*u).toString(16).match(/(.*?)(.{0,8})$/),a=parseInt(o[2],16),s=parseInt(o[1],16)||0,i[14]=a,i[15]=s,r(l,i),l},d=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],h=function(e){var t,n="";for(t=0;t<4;t+=1)n+=d[e>>8*t+4&15]+d[e>>8*t&15];return n},p=function(e){var t;for(t=0;t<e.length;t+=1)e[t]=h(e[t]);return e.join("")},g=function(){this.reset()};return"5d41402abc4b2a76b9719d911017c592"!==p(l("hello"))&&(t=function(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}),g.prototype.append=function(e){return/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),this.appendBinary(e),this},g.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var t,n=this._buff.length;for(t=64;t<=n;t+=64)r(this._state,c(this._buff.substring(t-64,t)));return this._buff=this._buff.substr(t-64),this},g.prototype.end=function(e){var t,n,i=this._buff,o=i.length,a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<o;t+=1)a[t>>2]|=i.charCodeAt(t)<<(t%4<<3);return this._finish(a,o),n=e?this._state:p(this._state),this.reset(),n},g.prototype._finish=function(e,t){var n,i,o,a=t;if(e[a>>2]|=128<<(a%4<<3),a>55)for(r(this._state,e),a=0;a<16;a+=1)e[a]=0;n=(n=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),i=parseInt(n[2],16),o=parseInt(n[1],16)||0,e[14]=i,e[15]=o,r(this._state,e)},g.prototype.reset=function(){return this._buff="",this._length=0,this._state=[1732584193,-271733879,-1732584194,271733878],this},g.prototype.destroy=function(){delete this._state,delete this._buff,delete this._length},g.hash=function(e,t){/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e)));var n=l(e);return t?n:p(n)},g.hashBinary=function(e,t){var n=l(e);return t?n:p(n)},(g.ArrayBuffer=function(){this.reset()}).prototype.append=function(e){var t,n=this._concatArrayBuffer(this._buff,e),i=n.length;for(this._length+=e.byteLength,t=64;t<=i;t+=64)r(this._state,u(n.subarray(t-64,t)));return this._buff=t-64<i?n.subarray(t-64):new Uint8Array(0),this},g.ArrayBuffer.prototype.end=function(e){var t,n,i=this._buff,o=i.length,a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<o;t+=1)a[t>>2]|=i[t]<<(t%4<<3);return this._finish(a,o),n=e?this._state:p(this._state),this.reset(),n},g.ArrayBuffer.prototype._finish=g.prototype._finish,g.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._state=[1732584193,-271733879,-1732584194,271733878],this},g.ArrayBuffer.prototype.destroy=g.prototype.destroy,g.ArrayBuffer.prototype._concatArrayBuffer=function(e,t){var n=e.length,i=new Uint8Array(n+t.byteLength);return i.set(e),i.set(new Uint8Array(t),n),i},g.ArrayBuffer.hash=function(e,t){var n=function(e){var t,n,i,o,a,s,c=e.length,l=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=c;t+=64)r(l,u(e.subarray(t-64,t)));for(n=(e=t-64<c?e.subarray(t-64):new Uint8Array(0)).length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<n;t+=1)i[t>>2]|=e[t]<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(r(l,i),t=0;t<16;t+=1)i[t]=0;return o=(o=8*c).toString(16).match(/(.*?)(.{0,8})$/),a=parseInt(o[2],16),s=parseInt(o[1],16)||0,i[14]=a,i[15]=s,r(l,i),l}(new Uint8Array(e));return t?n:p(n)},g}),t.a=SparkMD5}).call(t,n("eiHH")(e))},qbkd:function(e,t){e.exports="data:image/gif;base64,R0lGODlhFAAUALMIAPh2AP+TMsZiALlcAKNOAOp4ANVqAP+PFv///wAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQFCgAIACwAAAAAFAAUAAAEUxDJSau9iBDMtebTMEjehgTBJYqkiaLWOlZvGs8WDO6UIPCHw8TnAwWDEuKPcxQml0Ynj2cwYACAS7VqwWItWyuiUJB4s2AxmWxGg9bl6YQtl0cAACH5BAUKAAgALAEAAQASABIAAAROEMkpx6A4W5upENUmEQT2feFIltMJYivbvhnZ3Z1h4FMQIDodz+cL7nDEn5CH8DGZhcLtcMBEoxkqlXKVIgAAibbK9YLBYvLtHH5K0J0IACH5BAUKAAgALAEAAQASABIAAAROEMkphaA4W5upMdUmDQP2feFIltMJYivbvhnZ3V1R4BNBIDodz+cL7nDEn5CH8DGZAMAtEMBEoxkqlXKVIg4HibbK9YLBYvLtHH5K0J0IACH5BAUKAAgALAEAAQASABIAAAROEMkpjaE4W5tpKdUmCQL2feFIltMJYivbvhnZ3R0A4NMwIDodz+cL7nDEn5CH8DGZh8ONQMBEoxkqlXKVIgIBibbK9YLBYvLtHH5K0J0IACH5BAUKAAgALAEAAQASABIAAAROEMkpS6E4W5spANUmGQb2feFIltMJYivbvhnZ3d1x4JMgIDodz+cL7nDEn5CH8DGZgcBtMMBEoxkqlXKVIggEibbK9YLBYvLtHH5K0J0IACH5BAUKAAgALAEAAQASABIAAAROEMkpAaA4W5vpOdUmFQX2feFIltMJYivbvhnZ3V0Q4JNhIDodz+cL7nDEn5CH8DGZBMJNIMBEoxkqlXKVIgYDibbK9YLBYvLtHH5K0J0IACH5BAUKAAgALAEAAQASABIAAAROEMkpz6E4W5tpCNUmAQD2feFIltMJYivbvhnZ3R1B4FNRIDodz+cL7nDEn5CH8DGZg8HNYMBEoxkqlXKVIgQCibbK9YLBYvLtHH5K0J0IACH5BAkKAAgALAEAAQASABIAAAROEMkpQ6A4W5spIdUmHQf2feFIltMJYivbvhnZ3d0w4BMAIDodz+cL7nDEn5CH8DGZAsGtUMBEoxkqlXKVIgwGibbK9YLBYvLtHH5K0J0IADs="},"r4/i":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i="undefined"!=typeof window;i&&(window.Swiper=n("Bnvi"),n("aEDl"));var o={name:"swiper",props:{options:{type:Object,default:function(){return{autoplay:3500}}}},data:function(){return{defaultSwiperClasses:{wrapperClass:"swiper-wrapper"}}},ready:function(){!this.swiper&&i&&(this.swiper=new Swiper(this.$el,this.options))},mounted:function(){var e=this,t=function(){if(!e.swiper&&i){delete e.options.notNextTick;var t=!1;for(var n in e.defaultSwiperClasses)e.defaultSwiperClasses.hasOwnProperty(n)&&e.options[n]&&(t=!0,e.defaultSwiperClasses[n]=e.options[n]);var o=function(){e.swiper=new Swiper(e.$el,e.options)};t?e.$nextTick(o):o()}};this.options.notNextTick?t():this.$nextTick(t)},updated:function(){this.swiper&&this.swiper.update()},beforeDestroy:function(){this.swiper&&(this.swiper.destroy(),delete this.swiper)}},a={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"swiper-container"},[e._t("parallax-bg"),e._v(" "),n("div",{class:e.defaultSwiperClasses.wrapperClass},[e._t("default")],2),e._v(" "),e._t("pagination"),e._v(" "),e._t("button-prev"),e._v(" "),e._t("button-next"),e._v(" "),e._t("scrollbar")],2)},staticRenderFns:[]},s=n("Z0/y")(o,a,!1,null,null,null);t.default=s.exports},vbKY:function(e,t,n){"use strict";var i=n("rVsN"),o=n.n(i),a=n("wy9b"),s=n.n(a),r=n("TVG1"),c=n("zDZx"),u=n("wKTW"),l=window,d=document,h=n("P6uy");t.a={data:{baseWidth:null,winWidth:null,winHeight:null,winScale:1,bodyScrollTop:0,currPage:{name:"",query:null},lastPage:{name:"",query:null},router:null,loginPage:"",loginPageQuery:{},prefixPathname:"",showAppMenu:!1,show9358Menu:!1,loading:!1,pageMode:"club",isClubOnline:!0,sessionType:"web",showServiceBtn:!1,token:"",userId:"",userInBlicklist:!1,userAvatar:"",userHeader:"",userTel:"",userName:"",isLogin:!1,currLngx:"",currLaty:"",openId:"",chatId:"",chatToken:"",xmdAppId:"",clubsInAppId:[],appId:"",eventMask:!1,authCode:"",loginChanel:"",sessionId:"",clubInviteCode:"",techSerialNo:"",techInviteCode:"",clubSource:"",loginChanelClubId:"",isFollowed:!1,userAgent:{isWX:!1,isAliPay:!1,isiPhone:!1},accessMenus:{},defaultClubLogo:"./static/images/logo_default.jpg",defaultHeader:"./static/images/defaultUserLogo.png",defaultCouponBg:"./static/images/coupon_icon.png",defaultManagerHeader:"./static/images/defaultManagerLogo.png",defaultTechName:"小摩豆技师",defaultName:"散客",defaultBannerImgUrl:"./static/images/banner_default.jpg",defaultServiceItemImgUrl:"./static/images/serviceItem_default.jpg",defaultGiftImg:"gift_default.png",loadError:"数据请求失败！",visitError:"页面缺少参数！",clubId:null,clubHomeConfig:{},clubLogoUrl:null,clubName:"",clubTelephone:[],clubCfg:{accountSwitch:null,creditSwitch:!1,diceGameTimeout:864e5,diceGameSwitch:!1,paidCouponSwitch:!1,paidCouponFee:0,paidOrderSwitch:!1,paidOrderFee:0},reminds:{coupon:0,itemLimit:0,itemCard:0,order:0,itemCoupon:0,orderCoupon:0,total:0},shareConfigOption:{},techList:[],techListID:{},pageData:{}},beforeInit:function(){var e=navigator.userAgent.toLowerCase(),t=this.data,n=t.userAgent;if(n.isWX=/micromessenger/.test(e),n.isiPhone=/iPhone/i.test(e),n.isAliPay=/alipay/i.test(e),(n.isWX||n.isAliPay)&&(t.sessionType="9358"),n.isAliPay){var i=document.createElement("script");i.src="./static/lib/alipayjsapi.min.js",document.querySelector("head").appendChild(i)}var o=location.href.toString().match(/\/(\d{18,18})\/?/);o&&o[1]?(t.pageMode="club",t.clubId=o[1]):t.pageMode="9358";var a=location.href.split("#")[0];a.indexOf("?")>0&&(a=a.split("?")[0]),t.prefixPathname=a+"?o=xmd"},init:function(){var e=this,t=e.data,n=r.a.getPageParams(),i=r.a.localStorage,a=r.a.sessionStorage;return t.token=i("token")||i("userToken"),t.userId=i("userID"),t.userHeader=i("userHeader")||t.defaultHeader,t.userAvatar=i("userAvatar"),t.userTel=i("userTel"),t.userName=i("userName")||t.defaultName,t.currLaty=a("currLaty"),t.currLngx=a("currLngx"),t.chatId=i("chatId"),t.chatToken=i("chatToken"),t.authCode=n.code,t.xmdAppId=n.xmdAppId,t.appId=n.appId,t.isFollowed=1==i("isFollowed"),t.loginChanel=a("loginChanel"),t.loginChanelClubId=a("loginChanelClubId"),t.openId=i("openId"),t.sessionId=i("sessionId"),t.clubInviteCode=a("clubInviteCode"),t.techSerialNo=a("techSerialNo")||n.techCode||"",t.techInviteCode=a("techInviteCode")||n.techInviteCode||"",t.xmdAppId&&(t.prefixPathname+="xmdAppId="+t.xmdAppId),new o.a(function(n){var i=t.userAgent;i.isWX?e.initInWx(n):i.isAliPay?e.initInAlipay(n):t.token&&t.userId?e.checkTokenValid(n):(e.clearLoginInfo(),n())})},initInWx:function(e){var t=this,n=t.data,i=r.a.getPageParams(),o=r.a.localStorage,a=r.a.removeLocalStorage,c=r.a.sessionStorage;if(!n.loginChanel||/personal/.test(location.hash)){if(!n.authCode)return t.getOauthCode("9358","9358","base");var u=location.href;s.a.http.post("../api/v2/wx/9358/index",{openid:n.openId||"",code:n.authCode,scope:/personal/.test(location.hash)?"snsapi_userinfo":"snsapi_base",state:/inviteActivity/.test(u.substring(u.lastIndexOf("/")))?"inviteGift"+i.sceneId:"clubList",sessionId:n.sessionId||""}).then(function(i){if(200==(i=i.body).statusCode){var s=(i=i.respData).wxUserInfo,u=i.loginChanelData;n.token=u.token,n.userId=u.userId,n.chatId=u.emchatId,n.chatToken=u.emchatPassword,n.userName=s.nickname||u.userName||n.defaultName,n.userHeader=s.headimgurl,n.openId=s.openid,n.sessionId=s.sessionId,n.loginChanelClubId=u.clubId,n.loginChanel=u.loginChannel,n.clubInviteCode=u.clubInviteCode,n.techSerialNo=u.techSerialNo,n.techInviteCode=u.techInviteCode,n.currLngx=u.lngx,n.currLaty=u.laty,n.isLogin="Y"==u.isLogin,n.isFollowed=1==s.subscribe,o("token",n.token),o("userID",n.userId),o("userName",n.userName),o("openId",n.openId),o("sessionId",n.sessionId),o("isFollowed",s.subscribe),o("chatId",n.chatId),o("chatToken",n.chatToken),c("loginChanelClubId",n.loginChanelClubId),c("loginChanel",n.loginChanel),c("clubInviteCode",n.clubInviteCode),c("techSerialNo",n.techSerialNo),c("techInviteCode",n.techInviteCode),c("currLngx",n.currLngx),c("currLaty",n.currLaty),s.headimgurl||t.updateUserNameAndHeader(),u.telephone?(n.userTel=u.telephone,o("userTel",n.userTel)):(n.userTel=null,a("userTel")),n.userId&&t.initChat(),n.clubId&&t.bindClubTech(n.token),t.queryReminds(),t.doQueryClubsInAppId()}else 935801==i.statusCode?t.getOauthCode("9358","9358","base"):404==i.statusCode?(t.clearLoginInfo(),location.hash="#/login"):r.a.tipShow(i.msg||"wx/9358/index接口异常！");e()})}else n.isLogin=!0,t.initChat(),t.queryReminds(),t.doQueryClubsInAppId(),e()},initInAlipay:function(e){var t=this,n=t.data,i=r.a.getPageParams(),o=r.a.localStorage,a=r.a.sessionStorage;if(!n.loginChanel||/personal/.test(location.hash)){if(n.authCode=i.auth_code,!n.authCode)return t.getOauthCodeOfAlipay("9358","userInfo");s.a.http.post("../api/v2/alipay/oauth2/index",{auth_code:n.authCode,scope:/personal/.test(location.hash)?"auth_user":"auth_base",state:"9358"}).then(function(i){if(200==(i=i.body).statusCode){var s=(i=i.respData).loginChanelData;n.token=s.token,n.userId=s.userId,n.chatId=s.emchatId,n.chatToken=s.emchatPassword,n.userName=s.userName||n.defaultName,n.userHeader=n.defaultHeader,n.loginChanelClubId=s.clubId,n.loginChanel=s.loginChannel,n.clubInviteCode=s.clubInviteCode,n.techSerialNo=s.techSerialNo,n.techInviteCode=s.techInviteCode,n.currLngx=s.lngx,n.currLaty=s.laty,n.isLogin="Y"==s.isLogin,o("token",n.token),o("userID",n.userId),o("userName",n.userName),o("chatId",n.chatId),o("chatToken",n.chatToken),o("userHeader",n.userHeader),a("loginChanelClubId",n.loginChanelClubId),a("loginChanel",n.loginChanel),a("clubInviteCode",n.clubInviteCode),a("techSerialNo",n.techSerialNo),a("techInviteCode",n.techInviteCode),a("currLngx",n.currLngx),a("currLaty",n.currLaty),s.userId&&(t.initChat(),t.queryReminds()),n.clubId&&t.bindClubTech(n.token)}else r.a.tipShow(i.msg||"alipay/oauth2/index接口调用失败！");e()})}else n.isLogin=!0,t.initChat(),t.queryReminds(),e()},checkTokenValid:function(e){var t=this,n=t.data;s.a.http.get("../api/v1/check_login/"+n.sessionType+"/"+n.token).then(function(i){"Y"!==(i=i.body).msg?t.clearLoginInfo():(n.isLogin=!0,t.initChat(),t.updateUserNameAndHeader(),t.queryReminds(),t.doQueryClubsInAppId()),e()})},getClubData:function(){var e=this,t=e.data;return new o.a(function(n){t.clubId?(e.doStatUserVisitClub(),o.a.all([s.a.http.get("../api/v2/club/menu/all",{params:{clubId:t.clubId}}),s.a.http.get("../api/v2/club/"+t.clubId+"/clubName"),s.a.http.get("../api/v2/user/website/setting",{params:{clubId:t.clubId}})]).then(function(t){e.doHandleClubMenuAuth(t[0]),e.doHandlerClubName(t[1]),e.doHandlerClubHomeData(t[2]),n()})):n()})},doHandleClubMenuAuth:function(e){var t=this.data;200==(e=e.body).statusCode&&(e=e.respData,this.handlerMenuAuth(e.enabledResourcesIds||[],e.switchOffResourcesIds,e.menuList,t.accessMenus))},doQueryClubsInAppId:function(){var e=this.data;"9358"==e.pageMode&&e.xmdAppId&&s.a.http.get("../api/v2/club/wx/clubIds").then(function(t){200==(t=t.body).statusCode&&(e.clubsInAppId=t.respData||[])})},isClubInXmdAppId:function(e){var t=this.data;if("9358"==t.pageMode&&t.xmdAppId){for(var n=0;n<t.clubsInAppId.length;n++)if(t.clubsInAppId[n]==e)return!0;return!1}return!0},doHandlerClubName:function(e){var t=this.data;401!=(e=e.body).statusCode&&(t.clubLogoUrl=e.logo||t.defaultClubLogo,t.clubName=e.name,t.clubTelephone=e.telephone?e.telephone.split(","):[],t.isClubOnline="online"==e.status,t.shareConfigOption={title:t.clubName+"欢迎您",desc:"选个技师，选个项目，给身体放个假，这里太合适不过了。",link:t.prefixPathname+"#/"+t.clubId+"/home",imgUrl:t.clubLogoUrl})},doHandlerClubHomeData:function(e){var t=this.data;200==e.body.statusCode&&(t.clubHomeConfig=e.body.respData)},doStatUserVisitClub:function(){var e=this.data,t=r.a.localStorage("prev_save_time")||"",n=r.a.getPageParams("_t");if(""==t||!n&&t==n){""!=t&&t!=n||r.a.localStorage("prev_save_time",t);var i=r.a.getPageParams("clubsource")||"link";i&&/wifi/.test(i)&&(i="wifi"),e.clubSource=i;var o={clubId:e.clubId,clubName:e.clubName,source:i,techCode:e.techInviteCode||"",url:encodeURIComponent(location.href)};/inviteActivity/.test(location.hash)&&(o.scene="user_invite",o.inviteId=r.a.getPageParams("userId")||"",o.activityId=r.a.getPageParams("actId")||"",o.inviteType="user"),s.a.http.get("../api/v2/log/club/visit",{params:o})}},resizeWidth:function(){var e=this.data,t=d.documentElement;e.baseWidth||(e.baseWidth=d.body.clientWidth||320),e.winWidth=t.clientWidth||l.innerWidth||d.body.clientWidth,e.winHeight=t.clientHeight||l.innerHeight,e.winWidth=e.winWidth>540?540:e.winWidth<320?320:e.winWidth,e.winScale=e.winWidth/e.baseWidth,t.style.fontSize=16*e.winScale+"px"},clearLoginInfo:function(){var e=this.data,t=r.a.removeLocalStorage;e.isLogin=!1,e.token="",e.userId="",e.userHeader="",e.userAvatar="",e.userTel="",e.userName="",e.chatId="",e.chatToken="",t("token"),t("userID"),t("userHeader"),t("userAvatar"),t("userTel"),t("userName"),t("chatId"),t("chatToken"),c.a.close();var n=e.reminds;n.coupon=0,n.itemLimit=0,n.itemCard=0,n.order=0,n.itemCoupon=0,n.orderCoupon=0,n.total=0},initChat:function(){var e=this.data;c.a.name=e.userName,c.a.userId=e.userId,c.a.avatar=e.userAvatar,c.a.header=e.userHeader,c.a.id=e.chatId,c.a.token=e.chatToken,c.a.id&&c.a.token?c.a.init():r.a.tipShow("缺少IM账号信息！")},execBindPhone:function(e,t){var n=this.data,i=n.userId,a=r.a.localStorage;return new o.a(function(o){s.a.http.post("../api/v2/wx/bind_phone/save",{appVersion:"",clubCode:n.clubInviteCode||"",techInviteCode:n.techInviteCode||"",clubId:n.clubId||"",code:t,phoneNum:e}).then(function(e){var t=e=e.body;200==e.statusCode&&(e=e.respData,n.token=e.token,n.userId=e.userId,n.userHeader=e.avatarUrl||n.defaultHeader,n.userTel=e.phoneNum,n.userName=e.name,a("token",n.token),a("userID",n.userId),a("userHeader",n.userHeader),a("userTel",n.userTel),a("userName",n.userName),i&&i!=n.userId&&(c.a.close(),setTimeout(function(){location.reload(!0)},100))),o(t)})})},getClubSwitches:function(e){var t=this;return e=e||t.data.clubId,new o.a(function(n,i){s.a.http.get("../api/v2/user/switches",{params:{clubId:e}}).then(function(o){if(200==(o=o.body).statusCode){o=o.respData;var a=e==t.data.clubId?t.data.clubCfg:{};a.accountSwitch="on"==o.account.switch,a.creditSwitch="on"==o.credit.systemSwitch&&"on"==o.credit.clubSwitch,a.diceGameSwitch=a.creditSwitch&&"on"==o.credit.diceGameSwitch,a.diceGameSwitch&&(a.diceGameTimeout=1e3*o.credit.gameTimeoutSeconds),a.paidCouponSwitch="on"==o.paidCoupon.couponSwitch,a.paidCouponSwitch&&(a.paidCouponFee=o.paidCoupon.couponPlatformFee),a.paidOrderSwitch="on"==o.paidOrder.switch,a.paidOrderSwitch&&(a.paidOrderFee=o.paidOrder.platformFee),n(a)}else i("请求异常！")})})},getCreditAccount:function(e){return e=e||this.data.clubId,new o.a(function(t,n){s.a.http.get("../api/v2/credit/user/account",{params:{clubId:e,userType:"user"}}).then(function(e){200==(e=e.body).statusCode?t(e.respData):n()})})},updateUserNameAndHeader:function(){var e=this.data,t=r.a.localStorage;e.token&&s.a.http.get("../api/v2/profile/user/info/view").then(function(n){200==(n=n.body).statusCode&&(n=n.respData,e.userAvatar=n.avatar||"",e.userName=n.name||e.defaultName,e.userHeader=n.avatarUrl||e.defaultHeader,t("userName",e.userName),t("userAvatar",e.userAvatar),t("userHeader",e.userHeader),c.a.header=e.userHeader)})},shareConfig:function(e,t){if(h)if(e=e||{},t=t||this.data.currPage.name+Math.random(),1==h.signReady){if(t==h.configPage)return;e.title?(h.hideMenuItems({menuList:["menuItem:copyUrl"]}),h.showAllNonBaseMenuItem(),h.onMenuShareAppMessage(e),h.onMenuShareTimeline(e),h.onMenuShareQQ(e),h.onMenuShareWeibo(e),h.onMenuShareQZone(e)):h.hideAllNonBaseMenuItem(),h.configPage=t}else void 0==l.requestSignCount&&(l.requestSignCount=2,this.weiXinCfgSignature(e,t))},weiXinCfgSignature:function(e,t){var n=location,i=n.origin+n.pathname+n.search,o=this;s.a.http.get("../api/v1/wx/sign",{params:{url:encodeURIComponent(i),sessionType:"9358"}}).then(function(n){n=n.body,h.config({debug:!1,appId:n.appId,timestamp:n.timestamp,nonceStr:n.nonceStr,signature:n.signature,jsApiList:["onMenuShareAppMessage","onMenuShareTimeline","onMenuShareQQ","onMenuShareWeibo","onMenuShareQZone","hideAllNonBaseMenuItem","showAllNonBaseMenuItem","hideMenuItems"]}),l.wxError||(l.wxError=!0,h.error(function(){h.signReady=!1,l.requestSignCount--,0!==l.requestSignCount&&o.weiXinCfgSignature(e,t)})),l.wxReady||(l.wxReady=!0,h.ready(function(){h.signReady=!0,o.shareConfig(e,t)}))})},checkAccess:function(e,t){var n=this.data,i=n.accessMenus;if("9358"==n.pageMode||!e)return!0;var o=!i[e]||i[e].isPass;return o||!1===t||r.a.tipShow("会所未开通此功能！"),o},bindTelPhone:function(){u.a.$emit("pop-bind-phone")},login:function(e,t,n,i){var o=this.data,a=o.currPage;for(var s in o.loginPage=t||a.name,o.loginPageQuery={},n=n||a.query,e=e||o.router,n)o.loginPageQuery[s]=n[s];e&&!0!==i&&e.push({name:"login"})},redirectToLastPage:function(e){var t=this.data;t.loginPage?e.push({name:t.loginPage,query:t.loginPageQuery}):"club"==t.pageMode?e.push({name:"home"}):e.push({path:"/"})},getOauthCode:function(e,t,n,i){var o=location,a="_t="+ +new Date,c=o.origin+o.pathname+(this.data.xmdAppId?"?xmdAppId="+this.data.xmdAppId:"")+o.hash+(o.hash.indexOf("?")>0?"&"+a:"?"+a);n=/personal/.test(location.hash)?"snsapi_userinfo":"snsapi_base",/_offline_notice/.test(c)||(c=c.replace(/(&|\?)code=[\da-zA-Z]+(&?)/g,function(e,t,n){return"?"==t?n?"?":"":n?"&":""})),c=c.replace(/(&|\?)state=[\da-zA-Z_-]+(&?)/g,function(e,t,n){return"?"==t?n?"?":"":n?"&":""}),s.a.http.post("../api/v2/wx/oauth2/code",{wxmp:e,state:t,pageUrl:c,scope:n}).then(function(e){(e=e.body)&&200==e.statusCode?o.href=e.respData:r.a.tipShow(i||e.msg||"请求微信授权失败！")})},getOauthCodeOfAlipay:function(e,t,n){var i=location,o="_t="+ +new Date,a=i.origin+i.pathname+(this.data.xmdAppId?"?xmdAppId="+this.data.xmdAppId:"")+i.hash+(i.hash.indexOf("?")>0?"&"+o:"?"+o);t=/personal/.test(location.hash)?"auth_user":"auth_base",/_offline_notice/.test(a)||(a=a.replace(/(&|\?)code=[\da-zA-Z]+(&?)/g,function(e,t,n){return"?"==t?n?"?":"":n?"&":""})),a=a.replace(/(&|\?)state=[\da-zA-Z_-]+(&?)/g,function(e,t,n){return"?"==t?n?"?":"":n?"&":""}),s.a.http.post("../api/v2/alipay/oauth2/code",{state:e,pageUrl:a,scope:t}).then(function(e){(e=e.body)&&200==e.statusCode?(i.href=e.respData,setTimeout(function(){i.href=e.respData,setTimeout(function(){i.href=e.respData},100)},100)):r.a.tipShow(n||e.msg||"请求支付宝授权失败！")})},getOpenId:function(e){var t=this;return new o.a(function(n,i){s.a.http.post("../api/v2/wx/oauth2/openid",{code:e.authCode,scope:e.scope||"snsapi_base",sessionType:"9358",openId:"",webSessionId:e.sessionId||""}).then(function(o){200==(o=o.body).statusCode?(o=o.respData.openid,t.data.openId=o,n(o)):40029==o.statusCode?(t.getOauthCode("9358",e.state||"9358","base"),i("重新获取授权！")):i(o.msg||"获取openId失败！")},function(){i("获取openId失败！")})})},toBack:function(){var e=this.data,t=e.router;"club"==e.pageMode?"home"==e.currPage.name||e.lastPage.name?t.back():t.push({name:"home"}):/clubList/.test(e.currPage.name)||e.lastPage.name?t.back():t.push({name:"clubList"})},alipayJsApiLoaded:function(){return new o.a(function(e){if(l.ap)e();else var t=setInterval(function(){l.ap&&(l.clearInterval(t),e())},50)})},alipayJsBridgeReady:function(e){this.alipayJsApiLoaded().then(function(){l.AlipayJSBridge?e&&e():document.addEventListener("AlipayJSBridgeReady",e,!1)})},wxJsBridgeReady:function(e){window.WeixinJSBridge?e&&e():document.addEventListener("WeixinJSBridgeReady",e,!1)},handlerMenuAuth:function(e,t,n,i){n=n||[],i=i||{};for(var o=void 0,a=0,s=n.length;a<s;a++)i[(o=n[a]).code]=o,o.isPass=e.some(function(e){return e==o.id}),o.isOff=t.some(function(e){return e==o.id}),o.children&&o.children.length>0&&this.handlerMenuAuth(e,t,o.children,i)},bindClubTech:function(e){var t=this.data,n=r.a.getPageParams;setTimeout(function(){var i={clubId:t.clubId,timestamp:+new Date,token:e,techId:n("techId")||"",techCode:t.techInviteCode?t.techInviteCode.split("/")[0]:"",openId:t.openId||"",source:/scan/.test(t.loginChanel)?"qrCode":"web"};/inviteActivity/.test(location.hash)&&(i.scene="user_invite",i.inviteId=n("userId")||"",i.activityId=n("actId")||"",i.inviteType="user"),s.a.http.post("../api/v2/log/user_bind_club_tech",i)},350)},queryReminds:function(){var e=this.data,t=e.reminds;e.isLogin&&s.a.http.get("../api/v2/profile/coupon/expire/count",{params:{clubId:e.clubId}}).then(function(e){200==(e=e.body).statusCode&&(e=e.respData,t.coupon=e.coupon,t.itemLimit=e.timeLimit,t.itemCard=e.itemCard+e.itemPackage+e.creditGift,t.order=e.order||0,t.itemCoupon=e.serviceItem,t.orderCoupon=e.paidCoupon,t.total=e.total||0)})},queryClubTechRewardStatus:function(e){return new o.a(function(t){s.a.http.get("../api/v2/user/reward/isRewardOn",{params:{clubId:e}}).then(function(e){200==(e=e.body).statusCode?t(e.respData):t(!1)})})},setPageTitle:function(e){var t=this.data,n="";return!!t.clubId&&(t.clubHomeConfig.bottom_menu.forEach(function(t){t.code==e&&(n=t.title)}),n)}}},wKTW:function(e,t,n){"use strict";var i=n("wy9b"),o=n.n(i);t.a=new o.a},zDZx:function(e,t,n){"use strict";var i,o=n("4YfN"),a=n.n(o),s=n("rVsN"),r=n.n(s),c=n("wy9b"),u=n.n(c),l=n("IcnI"),d=n("f2qF"),h=n("S4rg"),p=n("3cXf"),g=n.n(p),f=n("a3Yh"),m=n.n(f),v=n("q06d");i=this,window.Long=i.Long=function(){function e(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function t(e){return!0===(e&&e.__isLong__)}e.prototype.__isLong__,Object.defineProperty(e.prototype,"__isLong__",{value:!0,enumerable:!1,configurable:!1}),e.isLong=t;var n={},i={};function o(e,t){var o,a,r;return t?(r=0<=(e>>>=0)&&e<256)&&(a=i[e])?a:(o=s(e,(0|e)<0?-1:0,!0),r&&(i[e]=o),o):(r=-128<=(e|=0)&&e<128)&&(a=n[e])?a:(o=s(e,e<0?-1:0,!1),r&&(n[e]=o),o)}function a(e,t){if(isNaN(e)||!isFinite(e))return t?f:g;if(t){if(e<0)return f;if(e>=d)return I}else{if(e<=-h)return b;if(e+1>=h)return C}return e<0?a(-e,t).neg():s(e%l|0,e/l|0,t)}function s(t,n,i){return new e(t,n,i)}e.fromInt=o,e.fromNumber=a,e.fromBits=s;var r=Math.pow;function c(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return g;if("number"==typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var i;if((i=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===i)return c(e.substring(1),t,n).neg();for(var o=a(r(n,8)),s=g,u=0;u<e.length;u+=8){var l=Math.min(8,e.length-u),d=parseInt(e.substring(u,u+l),n);if(l<8){var h=a(r(n,l));s=s.mul(h).add(a(d))}else s=(s=s.mul(o)).add(a(d))}return s.unsigned=t,s}function u(t){return t instanceof e?t:"number"==typeof t?a(t):"string"==typeof t?c(t):s(t.low,t.high,t.unsigned)}e.fromString=c,e.fromValue=u;var l=4294967296,d=l*l,h=d/2,p=o(1<<24),g=o(0);e.ZERO=g;var f=o(0,!0);e.UZERO=f;var m=o(1);e.ONE=m;var v=o(1,!0);e.UONE=v;var y=o(-1);e.NEG_ONE=y;var C=s(-1,2147483647,!1);e.MAX_VALUE=C;var I=s(-1,-1,!0);e.MAX_UNSIGNED_VALUE=I;var b=s(0,-2147483648,!1);e.MIN_VALUE=b;var M=e.prototype;return M.toInt=function(){return this.unsigned?this.low>>>0:this.low},M.toNumber=function(){return this.unsigned?(this.high>>>0)*l+(this.low>>>0):this.high*l+(this.low>>>0)},M.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(b)){var t=a(e),n=this.div(t),i=n.mul(t).sub(this);return n.toString(e)+i.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var o=a(r(e,6),this.unsigned),s=this,c="";;){var u=s.div(o),l=(s.sub(u.mul(o)).toInt()>>>0).toString(e);if((s=u).isZero())return l+c;for(;l.length<6;)l="0"+l;c=""+l+c}},M.getHighBits=function(){return this.high},M.getHighBitsUnsigned=function(){return this.high>>>0},M.getLowBits=function(){return this.low},M.getLowBitsUnsigned=function(){return this.low>>>0},M.getNumBitsAbs=function(){if(this.isNegative())return this.eq(b)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},M.isZero=function(){return 0===this.high&&0===this.low},M.isNegative=function(){return!this.unsigned&&this.high<0},M.isPositive=function(){return this.unsigned||this.high>=0},M.isOdd=function(){return 1==(1&this.low)},M.isEven=function(){return 0==(1&this.low)},M.equals=function(e){return t(e)||(e=u(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},M.eq=M.equals,M.notEquals=function(e){return!this.eq(e)},M.neq=M.notEquals,M.lessThan=function(e){return this.comp(e)<0},M.lt=M.lessThan,M.lessThanOrEqual=function(e){return this.comp(e)<=0},M.lte=M.lessThanOrEqual,M.greaterThan=function(e){return this.comp(e)>0},M.gt=M.greaterThan,M.greaterThanOrEqual=function(e){return this.comp(e)>=0},M.gte=M.greaterThanOrEqual,M.compare=function(e){if(t(e)||(e=u(e)),this.eq(e))return 0;var n=this.isNegative(),i=e.isNegative();return n&&!i?-1:!n&&i?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},M.comp=M.compare,M.negate=function(){return!this.unsigned&&this.eq(b)?b:this.not().add(m)},M.neg=M.negate,M.add=function(e){t(e)||(e=u(e));var n=this.high>>>16,i=65535&this.high,o=this.low>>>16,a=65535&this.low,r=e.high>>>16,c=65535&e.high,l=e.low>>>16,d=0,h=0,p=0,g=0;return p+=(g+=a+(65535&e.low))>>>16,h+=(p+=o+l)>>>16,d+=(h+=i+c)>>>16,d+=n+r,s((p&=65535)<<16|(g&=65535),(d&=65535)<<16|(h&=65535),this.unsigned)},M.subtract=function(e){return t(e)||(e=u(e)),this.add(e.neg())},M.sub=M.subtract,M.multiply=function(e){if(this.isZero())return g;if(t(e)||(e=u(e)),e.isZero())return g;if(this.eq(b))return e.isOdd()?b:g;if(e.eq(b))return this.isOdd()?b:g;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(p)&&e.lt(p))return a(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,i=65535&this.high,o=this.low>>>16,r=65535&this.low,c=e.high>>>16,l=65535&e.high,d=e.low>>>16,h=65535&e.low,f=0,m=0,v=0,y=0;return v+=(y+=r*h)>>>16,m+=(v+=o*h)>>>16,v&=65535,m+=(v+=r*d)>>>16,f+=(m+=i*h)>>>16,m&=65535,f+=(m+=o*d)>>>16,m&=65535,f+=(m+=r*l)>>>16,f+=n*h+i*d+o*l+r*c,s((v&=65535)<<16|(y&=65535),(f&=65535)<<16|(m&=65535),this.unsigned)},M.mul=M.multiply,M.divide=function(e){if(t(e)||(e=u(e)),e.isZero())throw Error("division by zero");if(this.isZero())return this.unsigned?f:g;var n,i,o;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return f;if(e.gt(this.shru(1)))return v;o=f}else{if(this.eq(b))return e.eq(m)||e.eq(y)?b:e.eq(b)?m:(n=this.shr(1).div(e).shl(1)).eq(g)?e.isNegative()?m:y:(i=this.sub(e.mul(n)),o=n.add(i.div(e)));if(e.eq(b))return this.unsigned?f:g;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();o=g}for(i=this;i.gte(e);){n=Math.max(1,Math.floor(i.toNumber()/e.toNumber()));for(var s=Math.ceil(Math.log(n)/Math.LN2),c=s<=48?1:r(2,s-48),l=a(n),d=l.mul(e);d.isNegative()||d.gt(i);)d=(l=a(n-=c,this.unsigned)).mul(e);l.isZero()&&(l=m),o=o.add(l),i=i.sub(d)}return o},M.div=M.divide,M.modulo=function(e){return t(e)||(e=u(e)),this.sub(this.div(e).mul(e))},M.mod=M.modulo,M.not=function(){return s(~this.low,~this.high,this.unsigned)},M.and=function(e){return t(e)||(e=u(e)),s(this.low&e.low,this.high&e.high,this.unsigned)},M.or=function(e){return t(e)||(e=u(e)),s(this.low|e.low,this.high|e.high,this.unsigned)},M.xor=function(e){return t(e)||(e=u(e)),s(this.low^e.low,this.high^e.high,this.unsigned)},M.shiftLeft=function(e){return t(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?s(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):s(0,this.low<<e-32,this.unsigned)},M.shl=M.shiftLeft,M.shiftRight=function(e){return t(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?s(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):s(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},M.shr=M.shiftRight,M.shiftRightUnsigned=function(e){if(t(e)&&(e=e.toInt()),0==(e&=63))return this;var n=this.high;return e<32?s(this.low>>>e|n<<32-e,n>>>e,this.unsigned):s(32===e?n:n>>>e-32,0,this.unsigned)},M.shru=M.shiftRightUnsigned,M.toSigned=function(){return this.unsigned?s(this.low,this.high,!1):this},M.toUnsigned=function(){return this.unsigned?this:s(this.low,this.high,!0)},M.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},M.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24&255,255&e,e>>>8&255,e>>>16&255,e>>>24&255]},M.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24&255,e>>>16&255,e>>>8&255,255&e,t>>>24&255,t>>>16&255,t>>>8&255,255&t]},e}();var y={login:function(e,t,n){},syncMsgs:function(e,t){},getC2CHistoryMsgs:function(e,t,n){},syncGroupMsgs:function(e,t,n){},sendMsg:function(e,t,n){},logout:function(e,t){},setAutoRead:function(e,t,n){},getProfilePortrait:function(e,t,n){},setProfilePortrait:function(e,t,n){},applyAddFriend:function(e,t,n){},getPendency:function(e,t,n){},deletePendency:function(e,t,n){},responseFriend:function(e,t,n){},getAllFriend:function(e,t,n){},deleteFriend:function(e,t,n){},addBlackList:function(e,t,n){},getBlackList:function(e,t,n){},deleteBlackList:function(e,t,n){},uploadPic:function(e,t,n){},createGroup:function(e,t,n){},applyJoinGroup:function(e,t,n){},handleApplyJoinGroup:function(e,t,n){},deleteApplyJoinGroupPendency:function(e,t,n){},quitGroup:function(e,t,n){},getGroupPublicInfo:function(e,t,n){},getGroupInfo:function(e,t,n){},modifyGroupBaseInfo:function(e,t,n){},destroyGroup:function(e,t,n){},getJoinedGroupListHigh:function(e,t,n){},getGroupMemberInfo:function(e,t,n){},addGroupMember:function(e,t,n){},modifyGroupMember:function(e,t,n){},forbidSendMsg:function(e,t,n){},deleteGroupMember:function(e,t,n){},getPendencyGroup:function(e,t,n){},getPendencyReport:function(e,t,n){},getPendencyGroupRead:function(e,t,n){},sendCustomGroupNotify:function(e,t,n){},Msg:function(e,t,n,i,o,a,s,r){},MsgStore:{sessMap:function(){return{}},sessCount:function(){return 0},sessByTypeId:function(e,t){return{}},delSessByTypeId:function(e,t){return!0},resetCookieAndSyncFlag:function(){},downloadMap:{}}};!function(e){var t="1.7.0",n="537048168",i="10",o=!0,a={FORMAL:{COMMON:"https://webim.tim.qq.com",PIC:"https://pic.tim.qq.com"},TEST:{COMMON:"https://test.tim.qq.com",PIC:"https://pic.tim.qq.com"}},s={},r=!1,c="openim",u="group_open_http_svc",l="sns",d="profile",h="recentcontact",p="openpic",f="group_open_long_polling_http_noauth_svc",y="imopenstat",C=m()({openim:"v4",group_open_http_svc:"v4",sns:"v4",profile:"v4",recentcontact:"v4",openpic:"v4",group_open_http_noauth_svc:"v1",group_open_long_polling_http_noauth_svc:"v1",imopenstat:"v4"},"recentcontact","v4"),I={login:1,pic_up:3,apply_join_group:9,create_group:10,longpolling:18,send_group_msg:19,sendmsg:20},b={C2C:"C2C",GROUP:"GROUP"},M={OK:"OK",FAIL:"FAIL"},S={TEXT:"TIMTextElem",FACE:"TIMFaceElem",IMAGE:"TIMImageElem",CUSTOM:"TIMCustomElem",SOUND:"TIMSoundElem",FILE:"TIMFileElem",LOCATION:"TIMLocationElem",GROUP_TIP:"TIMGroupTipElem"},A={JPG:1,JPEG:1,GIF:2,PNG:3,BMP:4,UNKNOWN:255},w=1,_="10001",E=2106,T=2107,L={IMAGE:1,FILE:2,SHORT_VIDEO:3,SOUND:4},P="2.1",k=1,N={C2C:1,GROUP_COMMON:3,GROUP_TIP:4,GROUP_SYSTEM:5,GROUP_TIP2:6,FRIEND_NOTICE:7,PROFILE_NOTICE:8,C2C_COMMON:9,C2C_EVENT:10},x=92,O=96,D={COMMON:0,LOVEMSG:1,TIP:2,REDPACKET:3},R={FRIEND_ADD:1,FRIEND_DELETE:2,PENDENCY_ADD:3,PENDENCY_DELETE:4,BLACK_LIST_ADD:5,BLACK_LIST_DELETE:6,PENDENCY_REPORT:7,FRIEND_UPDATE:8},F=1,U={INIT:-1,ON:0,RECONNECT:1,OFF:9999},B=14,G=U.INIT,q=!1,H=0,K=6e4,W=null,Y=0,z=0,J=0,j=null,V=null,Q=[],$=null,X={sdkAppID:null,appIDAt3rd:null,identifier:null,accountType:null,tinyid:null,identifierNick:null,userSig:null,a2:null,contentType:"json",apn:1},Z={},ee=0,te={},ne=0,ie=[],oe=[],ae=[],se={downloadMap:{}},re=new function(){this.formatTimeStamp=function(e,t){if(!e)return 0;var n;t=t||"yyyy-MM-dd hh:mm:ss";var i=new Date(1e3*e),o={"M+":i.getMonth()+1,"d+":i.getDate(),"h+":i.getHours(),"m+":i.getMinutes(),"s+":i.getSeconds()};for(var a in n=/(y+)/.test(t)?t.replace(RegExp.$1,(i.getFullYear()+"").substr(4-RegExp.$1.length)):t,o)new RegExp("("+a+")").test(n)&&(n=n.replace(RegExp.$1,1==RegExp.$1.length?o[a]:("00"+o[a]).substr((""+o[a]).length)));return n},this.groupTypeEn2Ch=function(e){var t=null;switch(e){case"Public":t="公开群";break;case"ChatRoom":t="聊天室";break;case"Private":t="私有群";break;case"AVChatRoom":t="直播聊天室";break;default:t=e}return t},this.groupTypeCh2En=function(e){var t=null;switch(e){case"公开群":t="Public";break;case"聊天室":t="ChatRoom";break;case"私有群":t="Private";break;case"直播聊天室":t="AVChatRoom";break;default:t=e}return t},this.groupRoleEn2Ch=function(e){var t=null;switch(e){case"Member":t="成员";break;case"Admin":t="管理员";break;case"Owner":t="群主";break;default:t=e}return t},this.groupRoleCh2En=function(e){var t=null;switch(e){case"成员":t="Member";break;case"管理员":t="Admin";break;case"群主":t="Owner";break;default:t=e}return t},this.groupMsgFlagEn2Ch=function(e){var t=null;switch(e){case"AcceptAndNotify":t="接收并提示";break;case"AcceptNotNotify":t="接收不提示";break;case"Discard":t="屏蔽";break;default:t=e}return t},this.groupMsgFlagCh2En=function(e){var t=null;switch(e){case"接收并提示":t="AcceptAndNotify";break;case"接收不提示":t="AcceptNotNotify";break;case"屏蔽":t="Discard";break;default:t=e}return t},this.formatText2Html=function(e){var t=e;return t&&(t=(t=(t=this.xssFilter(t)).replace(/ /g,"&nbsp;")).replace(/\n/g,"<br/>")),t},this.formatHtml2Text=function(e){var t=e;return t&&(t=(t=t.replace(/&nbsp;/g," ")).replace(/<br\/>/g,"\n")),t},this.getStrBytes=function(e){if(null==e||void 0===e)return 0;if("string"!=typeof e)return 0;var t,n,i,o=0;for(n=0,i=e.length;n<i;n++)o+=(t=e.charCodeAt(n))<=127?1:t<=2047?2:t<=65535?3:4;return o},this.xssFilter=function(e){return e=(e=(e=(e=e.toString()).replace(/[<]/g,"&lt;")).replace(/[>]/g,"&gt;")).replace(/"/g,"&quot;")},this.trimStr=function(e){return e?(e=e.toString()).replace(/(^\s*)|(\s*$)/g,""):""},this.validNumber=function(e){return(e=e.toString()).match(/(^\d{1,8}$)/g)},this.getReturnError=function(e,t){return t||(t=-100),{ActionStatus:M.FAIL,ErrorCode:t,ErrorInfo:e+"["+t+"]"}},this.setCookie=function(e,t,n,i,o){var a=new Date;a.setTime(a.getTime()+1e3*n),document.cookie=e+"="+escape(t)+";expires="+a.toGMTString()},this.getCookie=function(e){var t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));return null!=t?unescape(t[2]):null},this.delCookie=function(e){var t=new Date;t.setTime(t.getTime()-1);var n=this.getCookie(e);null!=n&&(document.cookie=e+"="+escape(n)+";expires="+t.toGMTString())},this.getQueryString=function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),n=window.location.search.substr(1).match(t);return null!=n?unescape(n[2]):null},this.isIE=function(e){var t=document.createElement("b");return t.innerHTML="\x3c!--[if IE "+e+"]><i></i><![endif]--\x3e",1===t.getElementsByTagName("i").length},this.getBrowserInfo=function(){var e,t={},n=navigator.userAgent.toLowerCase();return ce.info("navigator.userAgent="+n),(e=n.match(/msie ([\d.]+)/))?t.ie=e[1]:(e=n.match(/firefox\/([\d.]+)/))?t.firefox=e[1]:(e=n.match(/chrome\/([\d.]+)/))?t.chrome=e[1]:(e=n.match(/opera.([\d.]+)/))?t.opera=e[1]:(e=n.match(/version\/([\d.]+).*safari/))&&(t.safari=e[1]),t.ie?{type:"ie",ver:t.ie}:t.firefox?{type:"firefox",ver:t.firefox}:t.chrome?{type:"chrome",ver:t.chrome}:t.opera?{type:"opera",ver:t.opera}:t.safari?{type:"safari",ver:t.safari}:{type:"unknow",ver:-1}}},ce=new function(){var e=!0;this.setOn=function(t){e=t},this.getOn=function(){return e},this.error=function(t){try{e&&console.error(t)}catch(e){}},this.warn=function(t){try{e&&console.warn(t)}catch(e){}},this.info=function(t){try{e&&console.info(t)}catch(e){}},this.debug=function(t){try{e&&console.debug(t)}catch(e){}}},ue=function(e){return e||(e=new Date),Math.round(e.getTime()/1e3)},le=function(){return ne?ne+=1:ne=Math.round(1e7*Math.random()),ne},de=function(){return Math.round(4294967296*Math.random())},he=function(e,t,n,i,o,a,s){var r,c=function(){var e=null;if(window.XMLHttpRequest)e=new XMLHttpRequest;else try{e=new ActiveXObject("Msxml2.XMLHTTP")}catch(t){try{e=new ActiveXObject("Microsoft.XMLHTTP")}catch(e){return null}}return e}();if(!c){r="创建请求失败";var u=re.getReturnError(r,-1);return ce.error(r),void(s&&s(u))}te[++ee]=c,c.open(e,t,!0),c.onreadystatechange=function(){4==c.readyState&&(te[ee]=null,200==c.status?(a&&a(c.responseText),c=null,H=Y=0):(c=null,setTimeout(function(){var e=re.getReturnError("请求服务器失败,请检查你的网络是否正常",-2);s&&s(e)},16)))},c.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i||(i=15e3),i&&(c.timeout=i,c.ontimeout=function(e){c=null}),c.send(n)},pe=function(){return X.sdkAppID&&X.identifier},ge=function(e,t){if(!pe()){if(t){var n=re.getReturnError("请登录",-4);e&&e(n)}return!1}return!0},fe=function(){return o},me=function(e,o,s,r){var c=a;c=fe()?a.FORMAL.COMMON:a.TEST.COMMON,e==p&&(c=fe()?a.FORMAL.PIC:a.TEST.PIC);var u=c+"/"+C[e]+"/"+e+"/"+o+"?websdkappid="+n+"&v="+t+"&platform="+i;if(pe()){if("login"==o)u+="&identifier="+encodeURIComponent(X.identifier)+"&usersig="+X.userSig;else if(X.tinyid&&X.a2)u+="&tinyid="+X.tinyid+"&a2="+X.a2;else if(r)return ce.error("tinyid或a2为空["+e+"]["+o+"]"),r(re.getReturnError("tinyid或a2为空["+e+"]["+o+"]",-5)),!1;u+="&contenttype="+X.contentType}return u+="&sdkappid="+X.sdkAppID+"&apn="+X.apn+"&reqtime="+ue()+"&accounttype="+X.accountType},ve=function(e,t,n){var i=null;return $&&Q[0]?i="http://"+Q[0]+"/asn.com/stddownload_common_file?authkey="+$+"&bid="+_+"&subbid="+X.sdkAppID+"&fileid="+e+"&filetype="+T+"&openid="+t+"&ver=0&filename="+encodeURIComponent(n):ce.error("拼接文件下载url不报错：ip或者authkey为空"),se.downloadMap["uuid_"+e]=i,i},ye=function(e,t,n,i,o,a,s){var r={From_Account:t,To_Account:o,os_platform:10,Timestamp:ue().toString(),Random:de().toString(),request_info:[{busi_id:a,download_flag:i,type:s,uuid:e,version:k,auth_key:$,ip:Q[0]}]};Le(r,function(e){0==e.error_code&&e.response_info&&(se.downloadMap["uuid_"+r.uuid]=e.response_info.url),onAppliedDownloadUrl&&onAppliedDownloadUrl({uuid:r.uuid,url:e.response_info.url,maps:se.downloadMap})},function(e){ce.error("获取下载地址失败",r.uuid)})},Ce=function(){!function(){for(var e in te){var t=te[e];t&&(t.abort(),te[ee]=null)}ee=0,te={}}(),X={sdkAppID:null,appIDAt3rd:null,identifier:null,identifierNick:null,accountType:null,userSig:null,contentType:"json",apn:1},Z={},ne=0,J=0,j=null,ae=[],Re.clear(),W=null},Ie=function(e,n,i){if("longpolling"!=e||60008!=n&&91101!=n){var o=I[e];if(o){var a=ue(),s=null,r={Code:n,ErrMsg:i};if(X.a2?s=X.a2.substring(0,10)+"_"+a+"_"+de():X.userSig&&(s=X.userSig.substring(0,10)+"_"+a+"_"+de()),s){var c={UniqKey:s,EventId:o,ReportTime:a,MsgCmdErrorCode:r};if("login"==e){var u=[];u.push(c),Ee({EvtItems:u,MainVersion:t,Version:"0"},function(e){u=null},function(e){u=null})}else{if(ae.push(c),ae.length>=20)Ee({EvtItems:ae,MainVersion:t,Version:"0"},function(e){ae=[]},function(e){ae=[]})}}}}},be=function(e,t){Pe.apiCall(c,"login",{State:"Online"},function(n){if(n.TinyId)X.tinyid=n.TinyId;else if(t)return void t(re.getReturnError("TinyId is empty",-10));if(n.A2Key)X.a2=n.A2Key;else if(t)return void t(re.getReturnError("A2Key is empty",-11));var i={From_Account:X.identifier,To_Account:[X.identifier],LastStandardSequence:0,TagList:["Tag_Profile_IM_Nick","Tag_Profile_IM_Image"]};we(i,function(t){var n;if(t.UserProfileItem&&t.UserProfileItem.length>0)for(var i in t.UserProfileItem)for(var o in t.UserProfileItem[i].ProfileItem)switch(t.UserProfileItem[i].ProfileItem[o].Tag){case"Tag_Profile_IM_Nick":(n=t.UserProfileItem[i].ProfileItem[o].Value)&&(X.identifierNick=n);break;case"Tag_Profile_IM_Image":image=t.UserProfileItem[i].ProfileItem[o].Value,image&&(X.headurl=image)}e&&e(X.identifierNick,X.headurl)},t)},t)},Me=function(e,t,n){if(!ge(n,!1))return Ce(),void(t&&t({ActionStatus:M.OK,ErrorCode:0,ErrorInfo:"logout success"}));"all"==e?Pe.apiCall(c,"logout",{},function(e){Ce(),t&&t(e)},n):Pe.apiCall(c,"longpollinglogout",{LongPollingId:W},function(e){Ce(),t&&t(e)},n)},Se=function(e,t,n){(o||"undefined"==typeof stopPolling||1!=stopPolling)&&ge(n,!0)&&Pe.apiCall(c,"longpolling",e,t,n,K,!0)},Ae=function(e,t,n,i){if(ge(i,!0)){var o=[];for(var a in t){var s={To_Account:t[a].toAccount,LastedMsgTime:t[a].lastedMsgTime};o.push(s)}Pe.apiCall(c,"msgreaded",{C2CMsgReaded:{Cookie:e,C2CMsgReadedItem:o}},n,i)}},we=function(e,t,n){e.To_Account.length>100&&(e.To_Account.length=100,ce.error("获取用户资料人数不能超过100人")),ge(n,!0)&&Pe.apiCall(d,"portrait_get",{From_Account:X.identifier,To_Account:e.To_Account,TagList:e.TagList},function(e){var i=[];if(e.Fail_Account&&e.Fail_Account.length&&(i=e.Fail_Account),e.Invalid_Account&&e.Invalid_Account.length)for(var o in e.Invalid_Account)i.push(e.Invalid_Account[o]);if(i.length)for(var a in e.ActionStatus=M.FAIL,e.ErrorCode=99999,e.ErrorInfo="",i){var s=i[a];for(var r in e.UserProfileItem)if(e.UserProfileItem[r].To_Account==s){var c=e.UserProfileItem[r].ResultCode;e.UserProfileItem[r].ResultInfo="["+c+"]"+e.UserProfileItem[r].ResultInfo,e.ErrorInfo+="账号:"+s+","+e.UserProfileItem[r].ResultInfo+"\n";break}}e.ActionStatus==M.FAIL?n&&n(e):t&&t(e)},n)},_e=function(e,t,n){var i;ge(n,!0)&&(i=fe()?"pic_up":"pic_up_test",Pe.apiCall(p,i,{App_Version:P,From_Account:X.identifier,To_Account:e.To_Account,Seq:e.Seq,Timestamp:e.Timestamp,Random:e.Random,File_Str_Md5:e.File_Str_Md5,File_Size:e.File_Size,File_Type:e.File_Type,Server_Ver:k,Auth_Key:$,Busi_Id:e.Busi_Id,PkgFlag:e.PkgFlag,Slice_Offset:e.Slice_Offset,Slice_Size:e.Slice_Size,Slice_Data:e.Slice_Data},t,n))},Ee=function(e,t,n){ge(n,!0)&&Pe.apiCall(y,"web_report",e,t,n)},Te=function(e,t,n){ge(n,!0)&&Pe.apiCall(c,"getlongpollingid",{},function(e){t&&t(e)},n)},Le=function(e,t,n){Pe.apiCall(p,"apply_download",e,t,n)};"ie"==(s=re.getBrowserInfo()).type&&parseInt(s.ver)<10&&(r=!0);var Pe=0==r?new function(){var e=null;this.init=function(t,n,i){t&&(e=t)},this.callBack=function(t){e&&e(t)},this.clear=function(){e=null},this.apiCall=function(e,t,n,i,o,a,s){var r=me(e,t,0,o);0!=r&&function(e,t,n,i,o,a,s){he(e,t,g()(n),i,0,function(e){var t=null;e&&(t=JSON.parse(e)),a&&a(t)},s)}("POST",r,n,a,0,function(a){var s=null,c="";"pic_up"==t&&(n.Slice_Data="");var u="\n request url: \n"+r+"\n request body: \n"+g()(n)+"\n response: \n"+g()(a);a.ActionStatus==M.OK?(ce.info("["+e+"]["+t+"]success: "+u),i&&i(a),s=0,c=""):(s=a.ErrorCode,c=a.ErrorInfo,o&&(a.SrcErrorInfo=a.ErrorInfo,a.ErrorInfo="["+e+"]["+t+"]failed: "+u,"longpolling"==t&&60008==a.ErrorCode||ce.error(a.ErrorInfo),o(a))),Ie(t,s,c)},function(e){o&&o(e),Ie(t,e.ErrorCode,e.ErrorInfo)})}}:new function(){var e=null;this.init=function(t,n,i){t&&(e=t)},this.callBack=function(t){e&&e(t)},this.clear=function(){e=null},this.apiCall=function(e,t,n,i,o,a,s){var r=me(e,t,0,o);if(0!=r){var c=J++,u="jsonpRequest"+c,l=document.createElement("script"),d=0;window[u]=V,l.type="text/javascript",r=r+"&jsonpcallback="+u+"&jsonpbody="+encodeURIComponent(g()(n)),l.src=r,l.async=!0,void 0!==l.onreadystatechange&&(l.event="onclick",l.htmlFor=l.id="_jsonpRequest_"+c),l.onload=l.onreadystatechange=function(){if(this.readyState&&"complete"!==this.readyState&&"loaded"!==this.readyState||d)return!1;l.onload=l.onreadystatechange=null,l.onclick&&l.onclick();var a=j,s="\n request url: \n"+r+"\n request body: \n"+g()(n)+"\n response: \n"+g()(a);a.ActionStatus==M.OK?(ce.info("["+e+"]["+t+"]success: "+s),i&&i(a)):(a.ErrorInfo="["+e+"]["+t+"]failed "+s,"longpolling"!=t||60008!=a.ErrorCode?ce.error(a.ErrorInfo):ce.warn("["+e+"]["+t+"]success: "+s),o&&o(a)),j=void 0,document.body.removeChild(l),d=1},document.body.appendChild(l)}}},ke=function e(t,n,i,o,a,s){this._impl={skey:e.skey(t,n),type:t,id:n,name:i,icon:o,unread:0,isAutoRead:!1,time:a>=0?a:0,curMaxMsgSeq:s>=0?s:0,msgs:[],isFinished:1}};ke.skey=function(e,t){return e+t},ke.prototype.type=function(){return this._impl.type},ke.prototype.id=function(){return this._impl.id},ke.prototype.name=function(){return this._impl.name},ke.prototype.icon=function(){return this._impl.icon},ke.prototype.unread=function(e){if(void 0===e)return this._impl.unread;this._impl.unread=e},ke.prototype.isFinished=function(e){if(void 0===e)return this._impl.isFinished;this._impl.isFinished=e},ke.prototype.time=function(){return this._impl.time},ke.prototype.curMaxMsgSeq=function(e){if(void 0===e)return this._impl.curMaxMsgSeq;this._impl.curMaxMsgSeq=e},ke.prototype.msgCount=function(){return this._impl.msgs.length},ke.prototype.msg=function(e){return this._impl.msgs[e]},ke.prototype.msgs=function(){return this._impl.msgs},ke.prototype._impl_addMsg=function(e){this._impl.msgs.push(e),e.time>this._impl.time&&(this._impl.time=e.time),e.seq>this._impl.curMaxMsgSeq&&(this._impl.curMaxMsgSeq=e.seq),e.isSend||this._impl.isAutoRead||this._impl.unread++};var Ne=function(e,t){this.toAccount=e,this.lastedMsgTime=t},xe=function(e,t){for(var n,i=parseInt(e).toString(2)+"00000000000000000000000000000000",o=parseInt(t).toString(2),a=i.split("").reverse(),s=o.split("").reverse(),r=[],c=a.length>s.length?a.length:s.length,u=0;u<c;u++)n=Number(a[u]||0)||Number(s[u]||0),r.push(n);var l=r.reverse().join(""),d={high:"0x"+parseInt(l.substr(0,l.length-32),2).toString(16),low:"0x"+parseInt(l.substr(l.length-32-1),2).toString(16)};return new Long(d.low,d.high,!0).toString()},Oe=function(e,t,n,i,o,a,s,r){switch(this.sess=e,this.subType=s>=0?s:0,this.fromAccount=a,this.fromAccountNick=r||a,this.isSend=Boolean(t),this.seq=n>=0?n:le(),this.random=i>=0?i:de(),this.time=o>=0?o:ue(),this.elems=[],e.type()){case b.GROUP:this.uniqueId=xe(this.seq,this.random);break;case b.C2C:default:this.uniqueId=xe(this.time,this.random)}};Oe.prototype.getSession=function(){return this.sess},Oe.prototype.getType=function(){return this.subType},Oe.prototype.getSubType=function(){return this.subType},Oe.prototype.getFromAccount=function(){return this.fromAccount},Oe.prototype.getFromAccountNick=function(){return this.fromAccountNick},Oe.prototype.getIsSend=function(){return this.isSend},Oe.prototype.getSeq=function(){return this.seq},Oe.prototype.getTime=function(){return this.time},Oe.prototype.getRandom=function(){return this.random},Oe.prototype.getElems=function(){return this.elems},Oe.prototype.getMsgUniqueId=function(){return this.uniqueId},Oe.prototype.addText=function(t){this.addElem(new e.Msg.Elem(S.TEXT,t))},Oe.prototype.addFace=function(t){this.addElem(new e.Msg.Elem(S.FACE,t))},Oe.prototype.addImage=function(t){this.addElem(new e.Msg.Elem(S.IMAGE,t))},Oe.prototype.addLocation=function(t){this.addElem(new e.Msg.Elem(S.LOCATION,t))},Oe.prototype.addFile=function(t){this.addElem(new e.Msg.Elem(S.FILE,t))},Oe.prototype.addCustom=function(t){this.addElem(new e.Msg.Elem(S.CUSTOM,t))},Oe.prototype.addElem=function(e){this.elems.push(e)},Oe.prototype.toHtml=function(){var e="";for(var t in this.elems){e+=this.elems[t].toHtml()}return e},(Oe.Elem=function(e,t){this.type=e,this.content=t}).prototype.getType=function(){return this.type},Oe.Elem.prototype.getContent=function(){return this.content},Oe.Elem.prototype.toHtml=function(){return this.content.toHtml()},Oe.Elem.Text=function(e){this.text=re.xssFilter(e)},Oe.Elem.Text.prototype.getText=function(){return this.text},Oe.Elem.Text.prototype.toHtml=function(){return this.text},Oe.Elem.Face=function(e,t){this.index=e,this.data=t},Oe.Elem.Face.prototype.getIndex=function(){return this.index},Oe.Elem.Face.prototype.getData=function(){return this.data},Oe.Elem.Location=function(e,t,n){this.latitude=t,this.longitude=e,this.desc=n},Oe.Elem.Location.prototype.getLatitude=function(){return this.latitude},Oe.Elem.Location.prototype.getLongitude=function(){return this.longitude},Oe.Elem.Location.prototype.getDesc=function(){return this.desc},Oe.Elem.Images=function(e,t){this.UUID=e,"number"!=typeof t&&(t=parseInt(A[t]||A.UNKNOWN,10)),this.ImageFormat=t,this.ImageInfoArray=[]},Oe.Elem.Images.prototype.addImage=function(e){this.ImageInfoArray.push(e)},Oe.Elem.Images.prototype.getImageId=function(){return this.UUID},Oe.Elem.Images.prototype.getImageFormat=function(){return this.ImageFormat},Oe.Elem.Images.prototype.getImage=function(e){for(var t in this.ImageInfoArray)if(this.ImageInfoArray[t].getType()==e)return this.ImageInfoArray[t];return null},Oe.Elem.Images.Image=function(e,t,n,i,o){this.type=e,this.size=t,this.width=n,this.height=i,this.url=o},Oe.Elem.Images.Image.prototype.getType=function(){return this.type},Oe.Elem.Images.Image.prototype.getSize=function(){return this.size},Oe.Elem.Images.Image.prototype.getWidth=function(){return this.width},Oe.Elem.Images.Image.prototype.getHeight=function(){return this.height},Oe.Elem.Images.Image.prototype.getUrl=function(){return this.url},Oe.Elem.Sound=function(e,t,n,i,o,a,s){this.uuid=e,this.second=t,this.size=n,this.senderId=i,this.receiverId=o,this.downFlag=a,this.busiId=s==b.C2C?2:1,void 0!==a&&void 0!==busiId?ye(e,i,0,a,o,this.busiId,L.SOUND):this.downUrl=function(e,t){var n=null;return $&&Q[0]?n="http://"+Q[0]+"/asn.com/stddownload_common_file?authkey="+$+"&bid="+_+"&subbid="+X.sdkAppID+"&fileid="+e+"&filetype="+E+"&openid="+t+"&ver=0":ce.error("拼接语音下载url不报错：ip或者authkey为空"),n}(e,i)},Oe.Elem.Sound.prototype.getUUID=function(){return this.uuid},Oe.Elem.Sound.prototype.getSecond=function(){return this.second},Oe.Elem.Sound.prototype.getSize=function(){return this.size},Oe.Elem.Sound.prototype.getSenderId=function(){return this.senderId},Oe.Elem.Sound.prototype.getDownUrl=function(){return this.downUrl},Oe.Elem.File=function(e,t,n,i,o,a,s){this.uuid=e,this.name=t,this.size=n,this.senderId=i,this.receiverId=o,this.downFlag=a,this.busiId=s==b.C2C?2:1,void 0!==a&&void 0!==busiId?ye(e,i,0,a,o,this.busiId,L.FILE):this.downUrl=ve(e,i,t)},Oe.Elem.File.prototype.getUUID=function(){return this.uuid},Oe.Elem.File.prototype.getName=function(){return this.name},Oe.Elem.File.prototype.getSize=function(){return this.size},Oe.Elem.File.prototype.getSenderId=function(){return this.senderId},Oe.Elem.File.prototype.getDownUrl=function(){return this.downUrl},Oe.Elem.File.prototype.getDownFlag=function(){return this.downFlag},Oe.Elem.File.prototype.toHtml=function(){var e,t;return e=this.size,t="Byte",this.size>=1024&&(e=Math.round(this.size/1024),t="KB"),'<a href="javascript" onclick="webim.onDownFile("'+this.uuid+'")" title="点击下载文件" ><i class="glyphicon glyphicon-file">&nbsp;'+this.name+"("+e+t+")</i></a>"},Oe.Elem.Custom=function(e,t,n){this.data=e,this.desc=t,this.ext=n},Oe.Elem.Custom.prototype.getData=function(){return this.data},Oe.Elem.Custom.prototype.getDesc=function(){return this.desc},Oe.Elem.Custom.prototype.getExt=function(){return this.ext},Oe.Elem.Custom.prototype.toHtml=function(){return this.data};var De=new function(){var e={},t=[];window.msgCache={},this.cookie="",this.syncFlag=0;var n=function(t){for(var n in e)t(e[n])};this.sessMap=function(){return e},this.sessCount=function(){return t.length},this.sessByTypeId=function(t,n){var i=ke.skey(t,n);return void 0===i||null==i?null:e[i]},this.delSessByTypeId=function(t,n){var i=ke.skey(t,n);return void 0!==i&&null!=i&&(e[i]&&(delete e[i],delete msgCache[i]),!0)},this.resetCookieAndSyncFlag=function(){this.cookie="",this.syncFlag=0},this.setAutoRead=function(e,t,i){if(i&&n(function(e){e._impl.isAutoRead=!1}),e&&(e._impl.isAutoRead=t,t))if(e._impl.unread=0,e._impl.type==b.C2C){var o=[];o.push(new Ne(e._impl.id,e._impl.time)),Ae(De.cookie,o,function(e){ce.info("[setAutoRead]: c2CMsgReaded success")},function(e){ce.error("[setAutoRead}: c2CMsgReaded failed:"+e.ErrorInfo)})}else if(e._impl.type==b.GROUP){var a={GroupId:e._impl.id,MsgReadedSeq:e._impl.curMaxMsgSeq};proto_groupMsgReaded(a,function(e){ce.info("groupMsgReaded success")},function(e){ce.error("groupMsgReaded failed:"+e.ErrorInfo)})}},this.c2CMsgReaded=function(e,t,n){var i=[];i.push(new Ne(e.To_Account,e.LastedMsgTime)),Ae(De.cookie,i,function(e){t&&(ce.info("c2CMsgReaded success"),t(e))},function(e){n&&(ce.error("c2CMsgReaded failed:"+e.ErrorInfo),n(e))})},this.addSession=function(t){e[t._impl.skey]=t},this.delSession=function(t){delete e[t._impl.skey]},this.addMsg=function(t){if(function(e){var t=!1,n=e.sess._impl.skey,i=e.isSend+e.seq+e.random;return msgCache[n]&&msgCache[n][i]&&(t=!0),msgCache[n]?msgCache[n][i]={time:e.time}:(msgCache[n]={},msgCache[n][i]={time:e.time}),t}(t))return!1;var n=t.sess;return e[n._impl.skey]||this.addSession(n),n._impl_addMsg(t),!0},this.updateTimeline=function(){var e=new Array;n(function(t){e.push(t)}),e.sort(function(e,t){return t.time-e.time}),t=e}},Re=new function(){var e=null,t={1:null,2:null,3:null,4:null,5:null,6:null,7:null,8:null},n={1:null},i=!1,o=0,a=0,s=null,r=!1,l=0,d=90,h=null,p={},m={92:null,96:null},v=null,y=0,C={};this.setLongPollingOn=function(e){i=e},this.getLongPollingOn=function(){return i},this.resetLongPollingInfo=function(){i=!1,o=0,a=0},this.setBigGroupLongPollingOn=function(e){r=e},this.setBigGroupLongPollingKey=function(e){h=e},this.resetBigGroupLongPollingInfo=function(){r=!1,l=0,h=null,p={}},this.setBigGroupLongPollingMsgMap=function(e,t){var n=p[e];n?(n=parseInt(n)+t,p[e]=n):p[e]=t},this.clear=function(){null,t={1:null,2:null,3:null,4:null,5:null,6:null,7:null,8:null},n={1:null},e=null,i=!1,o=0,a=0,s=null,r=!1,l=0,h=null,p={},{},Q=[],$=null,null};var I=function(e,t){!function(e,t){ge(t,!0)&&Pe.apiCall(c,"authkey",{},e,t)}(function(t){Q=t.IpList,$=t.AuthKey,t.ExpireTime,e&&e(t)},function(e){ce.error("initIpAndAuthkey failed:"+e.ErrorInfo),t&&t(e)})},A=function(e,t){!function(e,t,n){ge(n,!0)&&Pe.apiCall(u,"get_joined_group_list",{Member_Account:e.Member_Account,Limit:e.Limit,Offset:e.Offset,GroupType:e.GroupType,ResponseFilter:{GroupBaseInfoFilter:e.GroupBaseInfoFilter,SelfInfoFilter:e.SelfInfoFilter}},t,n)}({Member_Account:X.identifier,Limit:1e3,Offset:0,GroupBaseInfoFilter:["NextMsgSeq"]},function(t){if(!t.GroupIdList||0==t.GroupIdList.length)return ce.info("initMyGroupMaxSeqs: 目前还没有加入任何群组"),void(e&&e(t));for(var n=0;n<t.GroupIdList.length;n++){var i=t.GroupIdList[n].GroupId,o=t.GroupIdList[n].NextMsgSeq-1;C[i]=o}e&&e(t)},function(e){ce.error("initMyGroupMaxSeqs failed:"+e.ErrorInfo),t&&t(e)})},w=function(e,t,n){y++;var i={GroupId:e,ReqMsgSeq:t,ReqMsgNumber:n};ce.warn("第"+y+"次补齐群消息,参数="+g()(i)),Re.syncGroupMsgs(i)},_=function(e,t){var n=C[e];n?t>n&&(C[e]=t):C[e]=t},E=function(e,t){for(var n in e){var i=e[n];if(i.From_Account){var o=handlerGroupMsg(i,!1,!0);o&&t.push(o),_(i.ToGroupId,i.MsgSeq)}}return t},T=function(t,n){var i={},o=[];for(var s in n){var r=i[n[s].ToGroupId];r||(r=i[n[s].ToGroupId]={min:99999999,max:-1,msgs:[]}),n[s].NoticeSeq>a&&(ce.warn("noticeSeq="+a+",msgNoticeSeq="+n[s].NoticeSeq),a=n[s].NoticeSeq),n[s].Event=t,i[n[s].ToGroupId].msgs.push(n[s]),n[s].MsgSeq<r.min&&(i[n[s].ToGroupId].min=n[s].MsgSeq),n[s].MsgSeq>r.max&&(i[n[s].ToGroupId].max=n[s].MsgSeq)}for(var c in i){var u=i[c].max-i[c].min+1,l=C[c];l?i[c].min-l>1||i[c].msgs.length<u?(ce.warn("发起一次补齐群消息请求,curMaxMsgSeq="+l+", minMsgSeq="+i[c].min+", maxMsgSeq="+i[c].max+", msgs.length="+i[c].msgs.length+", tempCount="+u),w(c,i[c].max,i[c].max-l),_(c,i[c].max)):o=E(i[c].msgs,o):(ce.warn("不存在该群的最大消息seq，群id="+c),i[c].msgs.length<u?(ce.warn("发起一次补齐群消息请求,minMsgSeq="+i[c].min+", maxMsgSeq="+i[c].max+", msgs.length="+i[c].msgs.length+", tempCount="+u),w(c,i[c].max,u),_(c,i[c].max)):o=E(i[c].msgs,o))}o.length&&De.updateTimeline(),e&&o.length&&e(o)},L=function(e,n){var i,o,s;for(var r in e){switch(o=(i=e[r]).PushType,0==n&&i.NoticeSeq&&i.NoticeSeq>a&&(a=i.NoticeSeq),s={Type:o},o){case R.FRIEND_ADD:s.Accounts=i.FriendAdd_Account;break;case R.FRIEND_DELETE:s.Accounts=i.FriendDel_Account;break;case R.PENDENCY_ADD:s.PendencyList=i.PendencyAdd;break;case R.PENDENCY_DELETE:s.Accounts=i.FrienPencydDel_Account;break;case R.BLACK_LIST_ADD:s.Accounts=i.BlackListAdd_Account;break;case R.BLACK_LIST_DELETE:s.Accounts=i.BlackListDel_Account;break;default:ce.error("未知好友系统通知类型：friendNotice="+g()(i))}n?o==R.PENDENCY_ADD&&t[o]&&t[o](s):t[o]&&t[o](s)}},P=function(e,t){var i,o,s;for(var r in e){switch(o=(i=e[r]).PushType,0==t&&i.NoticeSeq&&i.NoticeSeq>a&&(a=i.NoticeSeq),s={Type:o},o){case F:s.Profile_Account=i.Profile_Account,s.ProfileList=i.ProfileList;break;default:ce.error("未知资料系统通知类型：profileNotice="+g()(i))}t?o==F&&n[o]&&n[o](s):n[o]&&n[o](s)}},k=function(e){for(var t=0,n=e.length;t<n;t++)z(e[t])},z=function(e){var t=e.SubMsgType;switch(t){case x:if(e.ReadC2cMsgNotify.UinPairReadArray&&m[t])for(var n=0,i=e.ReadC2cMsgNotify.UinPairReadArray.length;n<i;n++){var o=e.ReadC2cMsgNotify.UinPairReadArray[n];m[t](o)}break;case O:m[t]&&m[t]();break;default:ce.error("未知C2c系统消息：subType="+t)}};this.longPolling=function(e,t){var n={Timeout:K/1e3,Cookie:{NotifySeq:o,NoticeSeq:a}};function i(){Se(n,function(e){for(var t in e.EventArray){var n=e.EventArray[t];switch(n.Event){case N.C2C:o=n.NotifySeq,ce.warn("longpolling: received new c2c msg"),Re.syncMsgs();break;case N.GROUP_COMMON:ce.warn("longpolling: received new group msgs"),handlerOrdinaryAndTipGroupMsgs(n.Event,n.GroupMsgArray);break;case N.GROUP_TIP:case N.GROUP_TIP2:ce.warn("longpolling: received new group tips"),handlerOrdinaryAndTipGroupMsgs(n.Event,n.GroupTips);break;case N.GROUP_SYSTEM:ce.warn("longpolling: received new group system msgs"),handlerGroupSystemMsgs(n.GroupTips,!1);break;case N.FRIEND_NOTICE:ce.warn("longpolling: received new friend system notice"),L(n.FriendListMod,!1);break;case N.PROFILE_NOTICE:ce.warn("longpolling: received new profile system notice"),P(n.ProfileDataMod,!1);break;case N.C2C_COMMON:a=n.C2cMsgArray[0].NoticeSeq,ce.warn("longpolling: received new c2c_common msg",a),T(n.Event,n.C2cMsgArray);break;case N.C2C_EVENT:a=n.C2cNotifyMsgArray[0].NoticeSeq,ce.warn("longpolling: received new c2c_event msg"),k(n.C2cNotifyMsgArray);break;default:ce.error("longpolling收到未知新消息类型: Event="+n.Event)}}var i={ActionStatus:M.OK,ErrorCode:0};J(i)},function(e){J(e),t&&t(e)})}W?(n.Cookie.LongPollingId=W,i()):Te(0,function(e){W=n.Cookie.LongPollingId=e.LongPollingId,K=e.Timeout>60?K:1e3*e.Timeout,i()})},this.bigGroupLongPolling=function(e,t){!function(e,t,n,i){Pe.apiCall(f,"get_msg",e,t,n,i)}({StartSeq:l,HoldTime:d,Key:h},function(t){var n=[];if(l=t.NextSeq,d=t.HoldTime,h=t.Key,t.RspMsgList&&t.RspMsgList.length>0){for(var i,o,a,c=0,u=t.RspMsgList.length-1;u>=0;u--)if(!(i=t.RspMsgList[u]).IsPlaceMsg&&i.From_Account&&i.MsgBody&&0!=i.MsgBody.length)switch(o=i.Event){case N.GROUP_COMMON:ce.info("bigGroupLongPolling: return new group msg"),(a=handlerGroupMsg(i,!1,!1))&&n.push(a),c+=1;break;case N.GROUP_TIP:case N.GROUP_TIP2:ce.info("bigGroupLongPolling: return new group tip"),(a=handlerGroupMsg(i,!1,!1))&&n.push(a);break;case N.GROUP_SYSTEM:ce.info("bigGroupLongPolling: new group system msg"),handlerGroupSystemMsg(i);break;default:ce.error("bigGroupLongPolling收到未知新消息类型: Event="+o)}c>0&&(Re.setBigGroupLongPollingMsgMap(i.ToGroupId,c),ce.warn("current bigGroupLongPollingMsgMap: "+g()(p)))}Y=0;var f={ActionStatus:M.OK,ErrorCode:U.ON,ErrorInfo:"connection is ok..."};Pe.callBack(f),e?e(n):s&&s(n),r&&Re.bigGroupLongPolling()},function(e){if(60008!=e.ErrorCode&&(ce.error(e.ErrorInfo),Y++),91101==e.ErrorCode&&(ce.error("多实例登录，被kick"),v&&v()),Y<10)r&&Re.bigGroupLongPolling();else{var n={ActionStatus:M.FAIL,ErrorCode:U.OFF,ErrorInfo:"connection is off"};Pe.callBack(n)}t&&t(e)},1e3*d)};var J=function(e){if(0==e.ErrorCode||60008==e.ErrorCode){var t;H=0,q=!1;var n=!1;switch(G){case U.INIT:n=!0,G=U.ON,t="create connection successfully(INIT->ON)";break;case U.ON:t="connection is on...(ON->ON)";break;case U.RECONNECT:G=U.ON,t="connection is on...(RECONNECT->ON)";break;case U.OFF:n=!0,G=U.RECONNECT,t="reconnect successfully(OFF->RECONNECT)"}var o={ActionStatus:M.OK,ErrorCode:G,ErrorInfo:t};n&&Pe.callBack(o),i&&Re.longPolling()}else if(91101==e.ErrorCode)ce.error("多实例登录，被kick"),v&&v();else if(H++,ce.warn("longPolling接口第"+H+"次报错: "+e.ErrorInfo),H<=10)setTimeout(j,100);else{G=U.OFF;var a={ActionStatus:M.FAIL,ErrorCode:U.OFF,ErrorInfo:"connection is off"};0==q&&Pe.callBack(a),q=!0,ce.warn("5000毫秒之后,SDK会发起新的longPolling请求..."),setTimeout(j,5e3)}},j=(T=function(t,n){var i,o=[];for(var a in i=n){var s,r,c,u=i[a];u.From_Account==X.identifier?(s=!0,r=u.To_Account,c=""):(s=!1,r=u.From_Account,c="");var l=De.sessByTypeId(b.C2C,r);l||(l=new ke(b.C2C,r,r,c,0,0));var d=new Oe(l,s,u.MsgSeq,u.MsgRandom,u.MsgTimeStamp,u.From_Account),h=null,p=null,g=null;for(var f in u.MsgBody){switch(g=(h=u.MsgBody[f]).MsgType){case S.TEXT:p=new Oe.Elem.Text(h.MsgContent.Text);break;case S.FACE:p=new Oe.Elem.Face(h.MsgContent.Index,h.MsgContent.Data);break;case S.IMAGE:for(var m in p=new Oe.Elem.Images(h.MsgContent.UUID,h.MsgContent.ImageFormat||""),h.MsgContent.ImageInfoArray){var v=h.MsgContent.ImageInfoArray[m];p.addImage(new Oe.Elem.Images.Image(v.Type,v.Size,v.Width,v.Height,v.URL))}break;case S.SOUND:h.MsgContent?p=new Oe.Elem.Sound(h.MsgContent.UUID,h.MsgContent.Second,h.MsgContent.Size,u.From_Account,u.To_Account,h.MsgContent.Download_Flag,b.C2C):(g=S.TEXT,p=new Oe.Elem.Text("[语音消息]下载地址解析出错"));break;case S.LOCATION:p=new Oe.Elem.Location(h.MsgContent.Longitude,h.MsgContent.Latitude,h.MsgContent.Desc);break;case S.FILE:case S.FILE+" ":g=S.FILE,h.MsgContent?p=new Oe.Elem.File(h.MsgContent.UUID,h.MsgContent.FileName,h.MsgContent.FileSize,u.From_Account,u.To_Account,h.MsgContent.Download_Flag,b.C2C):(g=S.TEXT,p=new Oe.Elem.Text("[文件消息下载地址解析出错]"));break;case S.CUSTOM:try{var y=JSON.parse(h.MsgContent.Data);if(y&&y.userAction&&y.userAction==B)continue}catch(e){}g=S.CUSTOM,p=new Oe.Elem.Custom(h.MsgContent.Data,h.MsgContent.Desc,h.MsgContent.Ext);break;default:g=S.TEXT,p=new Oe.Elem.Text("web端暂不支持"+h.MsgType+"消息")}d.elems.push(new Oe.Elem(g,p))}d.elems.length>0&&De.addMsg(d)&&o.push(d)}o.length>0&&De.updateTimeline(),o.length>0&&e&&e(o)},function(){i&&Re.longPolling()});this.syncMsgs=function(t,n){var i=[],o=[];!function e(t,n,i,o){ge(o,!0)&&Pe.apiCall(c,"getmsg",{Cookie:t,SyncFlag:n},function(t){if(t.MsgList&&t.MsgList.length)for(var n in t.MsgList)ie.push(t.MsgList[n]);1==t.SyncFlag?e(t.Cookie,t.SyncFlag,i,o):(t.MsgList=ie,ie=[],i&&i(t))},o)}(De.cookie,De.syncFlag,function(n){for(var a in 2==n.SyncFlag&&(De.syncFlag=0),o=n.MsgList,De.cookie=n.Cookie,o){var s,r,c,u=o[a];u.From_Account==X.identifier?(s=!0,r=u.To_Account,c=""):(s=!1,r=u.From_Account,c="");var l=De.sessByTypeId(b.C2C,r);l||(l=new ke(b.C2C,r,r,c,0,0));var d=new Oe(l,s,u.MsgSeq,u.MsgRandom,u.MsgTimeStamp,u.From_Account),h=null,p=null,g=null;for(var f in u.MsgBody){switch(g=(h=u.MsgBody[f]).MsgType){case S.TEXT:p=new Oe.Elem.Text(h.MsgContent.Text);break;case S.FACE:p=new Oe.Elem.Face(h.MsgContent.Index,h.MsgContent.Data);break;case S.IMAGE:for(var m in p=new Oe.Elem.Images(h.MsgContent.UUID,h.MsgContent.ImageFormat),h.MsgContent.ImageInfoArray){var v=h.MsgContent.ImageInfoArray[m];p.addImage(new Oe.Elem.Images.Image(v.Type,v.Size,v.Width,v.Height,v.URL))}break;case S.SOUND:h.MsgContent?p=new Oe.Elem.Sound(h.MsgContent.UUID,h.MsgContent.Second,h.MsgContent.Size,u.From_Account,u.To_Account,h.MsgContent.Download_Flag,b.C2C):(g=S.TEXT,p=new Oe.Elem.Text("[语音消息]下载地址解析出错"));break;case S.LOCATION:p=new Oe.Elem.Location(h.MsgContent.Longitude,h.MsgContent.Latitude,h.MsgContent.Desc);break;case S.FILE:case S.FILE+" ":g=S.FILE,h.MsgContent?p=new Oe.Elem.File(h.MsgContent.UUID,h.MsgContent.FileName,h.MsgContent.FileSize,u.From_Account,u.To_Account,h.MsgContent.Download_Flag,b.C2C):(g=S.TEXT,p=new Oe.Elem.Text("[文件消息下载地址解析出错]"));break;case S.CUSTOM:try{var y=JSON.parse(h.MsgContent.Data);if(y&&y.userAction&&y.userAction==B)continue}catch(e){}g=S.CUSTOM,p=new Oe.Elem.Custom(h.MsgContent.Data,h.MsgContent.Desc,h.MsgContent.Ext);break;default:g=S.TEXT,p=new Oe.Elem.Text("web端暂不支持"+h.MsgType+"消息")}d.elems.push(new Oe.Elem(g,p))}d.elems.length>0&&De.addMsg(d)&&i.push(d)}handlerApplyJoinGroupSystemMsgs(n.EventArray),i.length>0&&De.updateTimeline(),t?t(i):i.length>0&&e&&e(i)},function(e){ce.error("getMsgs failed:"+e.ErrorInfo),n&&n(e)})},this.getC2CHistoryMsgs=function(e,t,n){if(e.Peer_Account||!n)if(e.MaxCnt||(e.MaxCnt=15),e.MaxCnt<=0&&n)n(re.getReturnError("MaxCnt should be greater than 0",-14));else{if(e.MaxCnt>15)return n?void n(re.getReturnError("MaxCnt can not be greater than 15",-15)):void 0;null!=e.MsgKey&&void 0!==e.MsgKey||(e.MsgKey=""),function e(t,n,i){ge(i,!0)&&Pe.apiCall(c,"getroammsg",t,function(o){var a=t.MaxCnt,s=o.Complete,r=o.MaxCnt,c=o.MsgKey,u=o.LastMsgTime;if(o.MsgList&&o.MsgList.length)for(var l in o.MsgList)oe.push(o.MsgList[l]);var d=null;0==s&&r<a&&(d={Peer_Account:t.Peer_Account,MaxCnt:a-r,LastMsgTime:u,MsgKey:c}),d?e(d,n,i):(o.MsgList=oe,oe=[],n&&n(o))},i)}({Peer_Account:e.Peer_Account,MaxCnt:e.MaxCnt,LastMsgTime:e.LastMsgTime,MsgKey:e.MsgKey},function(n){var i,o=[];i=n.MsgList;var a=De.sessByTypeId(b.C2C,e.Peer_Account);for(var s in a||(a=new ke(b.C2C,e.Peer_Account,e.Peer_Account,"",0,0)),i){var r,c=i[s];c.From_Account==X.identifier?(r=!0,c.To_Account,""):(r=!1,c.From_Account,"");var u=new Oe(a,r,c.MsgSeq,c.MsgRandom,c.MsgTimeStamp,c.From_Account),l=null,d=null,h=null;for(var p in c.MsgBody){switch(h=(l=c.MsgBody[p]).MsgType){case S.TEXT:d=new Oe.Elem.Text(l.MsgContent.Text);break;case S.FACE:d=new Oe.Elem.Face(l.MsgContent.Index,l.MsgContent.Data);break;case S.IMAGE:for(var g in d=new Oe.Elem.Images(l.MsgContent.UUID,l.MsgContent.ImageFormat),l.MsgContent.ImageInfoArray){var f=l.MsgContent.ImageInfoArray[g];d.addImage(new Oe.Elem.Images.Image(f.Type,f.Size,f.Width,f.Height,f.URL))}break;case S.SOUND:l.MsgContent?d=new Oe.Elem.Sound(l.MsgContent.UUID,l.MsgContent.Second,l.MsgContent.Size,c.From_Account,c.To_Account,l.MsgContent.Download_Flag,b.C2C):(h=S.TEXT,d=new Oe.Elem.Text("[语音消息]下载地址解析出错"));break;case S.LOCATION:d=new Oe.Elem.Location(l.MsgContent.Longitude,l.MsgContent.Latitude,l.MsgContent.Desc);break;case S.FILE:case S.FILE+" ":h=S.FILE,l.MsgContent?d=new Oe.Elem.File(l.MsgContent.UUID,l.MsgContent.FileName,l.MsgContent.FileSize,c.From_Account,c.To_Account,l.MsgContent.Download_Flag,b.C2C):(h=S.TEXT,d=new Oe.Elem.Text("[文件消息下载地址解析出错]"));break;case S.CUSTOM:h=S.CUSTOM,d=new Oe.Elem.Custom(l.MsgContent.Data,l.MsgContent.Desc,l.MsgContent.Ext);break;default:h=S.TEXT,d=new Oe.Elem.Text("web端暂不支持"+l.MsgType+"消息")}u.elems.push(new Oe.Elem(h,d))}De.addMsg(u),o.push(u)}if(De.updateTimeline(),t){var m={Complete:n.Complete,MsgCount:o.length,LastMsgTime:n.LastMsgTime,MsgKey:n.MsgKey,MsgList:o};a.isFinished(n.Complete),t(m)}},function(e){ce.error("getC2CHistoryMsgs failed:"+e.ErrorInfo),n&&n(e)})}else n(re.getReturnError("Peer_Account is empty",-13))},this.init=function(o,a,r){if(o.onMsgNotify||ce.warn("listeners.onMsgNotify is empty"),e=o.onMsgNotify,o.onBigGroupMsgNotify&&(s=o.onBigGroupMsgNotify),o.onC2cEventNotifys&&(m=o.onC2cEventNotifys),o.onGroupInfoChangeNotify&&o.onGroupInfoChangeNotify,o.onFriendSystemNotifys&&(t=o.onFriendSystemNotifys),o.onProfileSystemNotifys&&(n=o.onProfileSystemNotifys),o.onKickedEventCall&&(v=o.onKickedEventCall),o.onAppliedDownloadUrl&&o.onAppliedDownloadUrl,X.identifier&&X.userSig)A(function(e){ce.info("initMyGroupMaxSeqs success"),I(function(e){if(ce.info("initIpAndAuthkey success"),a){ce.info("login success(have login state))");var t={ActionStatus:M.OK,ErrorCode:0,ErrorInfo:"login success"};a(t)}Re.setLongPollingOn(!0),i&&Re.longPolling(a)},r)},r);else if(a){var c={ActionStatus:M.OK,ErrorCode:0,ErrorInfo:"login success(no login state)"};a(c)}},this.sendMsg=function(e,t,n){!function(e,t,n){if(ge(n,!0)){var i=null;switch(e.sess.type()){case b.C2C:i={From_Account:X.identifier,To_Account:e.sess.id().toString(),MsgTimeStamp:e.time,MsgSeq:e.seq,MsgRandom:e.random,MsgBody:[]};break;case b.GROUP:var o=e.getSubType();switch(i={GroupId:e.sess.id().toString(),From_Account:X.identifier,Random:e.random,MsgBody:[]},o){case D.COMMON:i.MsgPriority="COMMON";break;case D.REDPACKET:i.MsgPriority="REDPACKET";break;case D.LOVEMSG:i.MsgPriority="LOVEMSG";break;case D.TIP:ce.error("不能主动发送群提示消息,subType="+o);break;default:return void ce.error("发送群消息时，出现未知子消息类型：subType="+o)}}for(var a in e.elems){var s=e.elems[a],r=null,l=s.type;switch(l){case S.TEXT:r={Text:s.content.text};break;case S.FACE:r={Index:s.content.index,Data:s.content.data};break;case S.IMAGE:var d=[];for(var h in s.content.ImageInfoArray)d.push({Type:s.content.ImageInfoArray[h].type,Size:s.content.ImageInfoArray[h].size,Width:s.content.ImageInfoArray[h].width,Height:s.content.ImageInfoArray[h].height,URL:s.content.ImageInfoArray[h].url});r={ImageFormat:s.content.ImageFormat,UUID:s.content.UUID,ImageInfoArray:d};break;case S.SOUND:ce.warn("web端暂不支持发送语音消息");continue;case S.LOCATION:ce.warn("web端暂不支持发送地理位置消息");continue;case S.FILE:r={UUID:s.content.uuid,FileName:s.content.name,FileSize:s.content.size,DownloadFlag:s.content.downFlag};break;case S.CUSTOM:r={Data:s.content.data,Desc:s.content.desc,Ext:s.content.ext},l=S.CUSTOM;break;default:ce.warn("web端暂不支持发送"+s.type+"消息");continue}e.PushInfoBoolean&&(i.OfflinePushInfo=e.PushInfo),i.MsgBody.push({MsgType:l,MsgContent:r})}e.sess.type()==b.C2C?Pe.apiCall(c,"sendmsg",i,t,n):e.sess.type()==b.GROUP&&Pe.apiCall(u,"send_group_msg",i,t,n)}}(e,function(i){if(e.sess.type()==b.C2C){if(!De.addMsg(e)){var o="sendMsg: addMsg failed!",a=re.getReturnError(o,-17);return ce.error(o),void(n&&n(a))}De.updateTimeline()}t&&t(i)},function(e){n&&n(e)})}},Fe=new function(){this.fileMd5=null;this.uploadFile=function(e,t,n){var i={init:function(e,t,n){var i=this;i.file=e.file,i.onProgressCallBack=e.onProgressCallBack,e.abortButton&&(e.abortButton.onclick=i.abortHandler),i.total=i.file.size,i.loaded=0,i.step=1105920,i.sliceSize=0,i.sliceOffset=0,i.timestamp=ue(),i.seq=le(),i.random=de(),i.fromAccount=X.identifier,i.toAccount=e.To_Account,i.fileMd5=e.fileMd5,i.businessType=e.businessType,i.fileType=e.fileType,i.cbOk=t,i.cbErr=n,i.reader=new FileReader,i.blobSlice=File.prototype.mozSlice||File.prototype.webkitSlice||File.prototype.slice,i.reader.onloadstart=i.onLoadStart,i.reader.onprogress=i.onProgress,i.reader.onabort=i.onAbort,i.reader.onerror=i.onerror,i.reader.onload=i.onLoad,i.reader.onloadend=i.onLoadEnd},upload:function(){i.readBlob(0)},onLoadStart:function(){},onProgress:function(e){var t=i;t.loaded+=e.loaded,t.onProgressCallBack&&t.onProgressCallBack(t.loaded,t.total)},onAbort:function(){},onError:function(){},onLoad:function(e){var t=i;if(e.target.readyState==FileReader.DONE){var n=e.target.result,o=n.indexOf(",");-1!=o&&(n=n.substr(o+1));var a={From_Account:t.fromAccount,To_Account:t.toAccount,Busi_Id:t.businessType,File_Type:t.fileType,File_Str_Md5:t.fileMd5,PkgFlag:w,File_Size:t.total,Slice_Offset:t.sliceOffset,Slice_Size:t.sliceSize,Slice_Data:n,Seq:t.seq,Timestamp:t.timestamp,Random:t.random},s=function(e){if(0==e.IsFinish)t.loaded=e.Next_Offset,t.loaded<t.total?t.readBlob(t.loaded):t.loaded=t.total;else if(t.cbOk){var n={ActionStatus:e.ActionStatus,ErrorCode:e.ErrorCode,ErrorInfo:e.ErrorInfo,File_UUID:e.File_UUID,File_Size:e.Next_Offset,URL_INFO:e.URL_INFO,Download_Flag:e.Download_Flag};t.fileType==L.FILE&&(n.URL_INFO=ve(e.File_UUID,X.identifier,t.file.name)),t.cbOk(n)}z=0};_e(a,s,function e(n){z<20?(z++,setTimeout(function(){_e(a,s,e)},1e3)):t.cbErr(n)})}},onLoadEnd:function(){},readBlob:function(e){var t,n=i,o=n.file,a=e+n.step;a>n.total?(a=n.total,n.sliceSize=a-e):n.sliceSize=n.step,n.sliceOffset=e,t=n.blobSlice.call(o,e,a),n.reader.readAsDataURL(t)},abortHandler:function(){var e=i;e.reader&&e.reader.abort()}};!function(e,t,n){var i=null;try{i=new FileReader}catch(e){if(n)return void n(re.getReturnError("当前浏览器不支持FileReader",-18))}var o=File.prototype.mozSlice||File.prototype.webkitSlice||File.prototype.slice;if(o||!n){var a=2097152,s=Math.ceil(e.size/a),r=0,c=new v.a;i.onload=function(e){for(var n="",i=new Uint8Array(e.target.result),o=i.byteLength,a=0;a<o;a++)n+=String.fromCharCode(i[a]);c.appendBinary(n),++r<s?u():(this.fileMd5=c.end(),t&&t(this.fileMd5))},u()}else n(re.getReturnError("当前浏览器不支持FileAPI",-19));function u(){var t=r*a,n=t+a>=e.size?e.size:t+a,s=o.call(e,t,n);i.readAsArrayBuffer(s)}}(e.file,function(o){ce.info("fileMd5: "+o),e.fileMd5=o,i.init(e,t,n),i.upload()},n)}};e.SESSION_TYPE=b,e.MSG_MAX_LENGTH={C2C:12e3,GROUP:8898},e.C2C_MSG_SUB_TYPE={COMMON:0},e.GROUP_MSG_SUB_TYPE=D,e.MSG_ELEMENT_TYPE=S,e.GROUP_TIP_TYPE={JOIN:1,QUIT:2,KICK:3,SET_ADMIN:4,CANCEL_ADMIN:5,MODIFY_GROUP_INFO:6,MODIFY_MEMBER_INFO:7},e.IMAGE_TYPE={ORIGIN:1,LARGE:2,SMALL:3},e.GROUP_SYSTEM_TYPE={JOIN_GROUP_REQUEST:1,JOIN_GROUP_ACCEPT:2,JOIN_GROUP_REFUSE:3,KICK:4,DESTORY:5,CREATE:6,INVITED_JOIN_GROUP_REQUEST:7,QUIT:8,SET_ADMIN:9,CANCEL_ADMIN:10,REVOKE:11,READED:15,CUSTOM:255,INVITED_JOIN_GROUP_REQUEST_AGREE:12},e.FRIEND_NOTICE_TYPE=R,e.GROUP_TIP_MODIFY_GROUP_INFO_TYPE={FACE_URL:1,NAME:2,OWNER:3,NOTIFICATION:4,INTRODUCTION:5},e.BROWSER_INFO=s,e.Emotions=e.EmotionPicData={},e.EmotionDataIndexs=e.EmotionPicDataIndex={},e.TLS_ERROR_CODE={OK:0,SIGNATURE_EXPIRATION:11},e.CONNECTION_STATUS=U,e.UPLOAD_PIC_BUSSINESS_TYPE={GROUP_MSG:1,C2C_MSG:2,USER_HEAD:3,GROUP_HEAD:4},e.RECENT_CONTACT_TYPE={C2C:1,GROUP:2},e.UPLOAD_RES_TYPE=L,e.Tool=re,e.Log=ce,e.Msg=Oe,e.Session=ke,e.MsgStore={sessMap:function(){return De.sessMap()},sessCount:function(){return De.sessCount()},sessByTypeId:function(e,t){return De.sessByTypeId(e,t)},delSessByTypeId:function(e,t){return De.delSessByTypeId(e,t)},resetCookieAndSyncFlag:function(){return De.resetCookieAndSyncFlag()}},e.Resources=se,e.login=e.init=function(t,n,i,a,s){Pe.init(n.onConnNotify,a,s),n.jsonpCallback&&(V=n.jsonpCallback),function(t,n,i,a,s){Ce(),i&&(Z=i),"false"==e.Tool.getQueryString("isAccessFormalEnv")&&(o=!1,ce.error("请切换为正式环境")),0==Z.isAccessFormalEnv&&(ce.error("请切换为正式环境"),o=Z.isAccessFormalEnv),0==Z.isLogOn&&ce.setOn(Z.isLogOn),t||!s?t.sdkAppID||!s?t.accountType||!s?(t.identifier&&(X.identifier=t.identifier.toString()),t.identifier&&!t.userSig&&s?s(re.getReturnError("loginInfo.userSig is empty",-9)):(t.userSig&&(X.userSig=t.userSig.toString()),X.sdkAppID=t.sdkAppID,X.accountType=t.accountType,X.identifier&&X.userSig?be(function(e,t){Re.init(n,function(n){a&&(n.identifierNick=e,n.headurl=t,a(n))},s)},s):Re.init(n,a,s))):s(re.getReturnError("loginInfo.accountType is empty",-8)):s(re.getReturnError("loginInfo.sdkAppID is empty",-7)):s(re.getReturnError("loginInfo is empty",-6))}(t,n,i,a,s)},e.logout=e.offline=function(e,t){return Me("instance",e,t)},e.logoutAll=function(e,t){return Me("all",e,t)},e.sendMsg=function(e,t,n){return Re.sendMsg(e,t,n)},e.syncMsgs=function(e,t){return Re.syncMsgs(e,t)},e.getC2CHistoryMsgs=function(e,t,n){return Re.getC2CHistoryMsgs(e,t,n)},e.c2CMsgReaded=function(e,t,n){return De.c2CMsgReaded(e,t,n)},e.setAutoRead=function(e,t,n){return De.setAutoRead(e,t,n)},e.deleteChat=function(e,t,n){return proto_deleteChat(e,t,n)},e.addBlackList=function(e,t,n){return function(e,t,n){ge(n,!0)&&Pe.apiCall(l,"black_list_add",{From_Account:X.identifier,To_Account:e.To_Account},function(e){var i=convertErrorEn2ZhFriend(e);i.ActionStatus==M.FAIL?n&&n(i):t&&t(i)},n)}(e,t,n)},e.deleteBlackList=function(e,t,n){return function(e,t,n){ge(n,!0)&&Pe.apiCall(l,"black_list_delete",{From_Account:X.identifier,To_Account:e.To_Account},function(e){var i=convertErrorEn2ZhFriend(e);i.ActionStatus==M.FAIL?n&&n(i):t&&t(i)},n)}(e,t,n)},e.getBlackList=function(e,t,n){return function(e,t,n){ge(n,!0)&&Pe.apiCall(l,"black_list_get",{From_Account:X.identifier,StartIndex:e.StartIndex,MaxLimited:e.MaxLimited,LastSequence:e.LastSequence},t,n)}(e,t,n)},e.getRecentContactList=function(e,t,n){return function(e,t,n){ge(n,!0)&&Pe.apiCall(h,"get",{From_Account:X.identifier,Count:e.Count},t,n)}(e,t,n)},e.uploadFile=e.uploadPic=function(e,t,n){return Fe.uploadFile(e,t,n)},e.uploadFileByBase64=e.uploadPicByBase64=function(e,t,n){var i={To_Account:e.toAccount,Busi_Id:e.businessType,File_Type:e.File_Type,File_Str_Md5:e.fileMd5,PkgFlag:w,File_Size:e.totalSize,Slice_Offset:0,Slice_Size:e.totalSize,Slice_Data:e.base64Str,Seq:le(),Timestamp:ue(),Random:de()};return _e(i,t,n)},e.setJsonpLastRspData=function(e){j="string"==typeof e?JSON.parse(e):e},e.getLongPollingId=function(e,t,n){return Te(0,t,n)},e.applyDownload=function(e,t,n){return Le(e,t,n)},e.onDownFile=function(e){window.open(se.downloadMap["uuid_"+e])},e.checkLogin=function(e,t){return ge(e,t)}}(y);var C=y,I=n("TVG1"),b={timeLimit:{title:"限时抢",desc:"超值抢购，限时秒杀"},groupBuy:{title:"拼团活动",desc:"单打独斗，不如拼团抢购~"},luckyWheel:{title:"大转盘",desc:"幸运抽奖，惊喜连连"},journal:{title:"会所期刊",desc:"有美女、有福利，你就是我的VIP！"},inviteGift:{title:"邀请有礼",desc:"邀请好友赢豪礼~"},itemCard:{item_card:{title:"次卡",desc:"品质服务，畅快享受"},item_package:{title:"混合套餐",desc:"特惠套餐，超值期待"},credit_gift:{title:"积分礼物",desc:"会员积分，超值兑换！！"}}},M={"&nbsp;":" ","&gt;":">","&lt;":"<","&amp;":"&"},S=new RegExp("/::[A-Zab]+","g"),A=new RegExp("&[a-z]+;","g");window._webim=C;var w=C.SESSION_TYPE.C2C,_={id:"",appID:"1400063117",accountType:21719,token:"",init:function(e){var t=e.imInstance;this.id=t.id,this.token=t.token,/(spa.93wifi.com|sdcm165.stonebean.com|sdcm166.stonebean.com)/.test(location.hostname)&&(this.appID="1400063194",this.accountType=21874);var n={sdkAppID:this.appID,appIDAt3rd:this.appID,identifier:this.id,userSig:this.token,accountType:this.accountType},i={onConnNotify:function(n){e.onConnNotify.call(t,n)},onMsgNotify:function(n){e.onMsgNotify.call(t,n)},onKickedEventCall:function(){e.onKickedEventCall.call(t)}};return C.login(n,i,{isAccessFormalEnv:!0,isLogOn:!1},function(){e.loginSuccess()},function(e){console.log("error ",e)}),null},getConnStatus:function(e){var t=C.CONNECTION_STATUS,n=void 0,i=void 0;switch(e.ErrorCode){case t.ON:i="tim建立连接成功！",n=1;break;case t.OFF:i="连接已断开，无法收到新消息，请检查网络是否正常！",I.a.tipShow(i),n=2;break;case t.RECONNECT:i="连接状态恢复正常！",I.a.tipShow(i),n=1;break;default:i="未知连接状态！",n=3}return n},getRecentContactList:function(){return new r.a(function(e){C.getRecentContactList({Count:50},function(t){e(t.SessionItem||[])})})},doPullOfflineMessage:function(e){return new r.a(function(t){C.getC2CHistoryMsgs({Peer_Account:e,MaxCnt:15,LastMsgTime:0,MsgKey:""},function(e){t(e)})})},onMsgNotify:function(e){var t=null,n="",i=void 0,o=this,a=[];return console.log("onMsgNotify：",e),e.forEach(function(e){if(!e.isSend)if(1==e.elems.length){if("TIMCustomElem"==(t=e.elems[0]).type)try{var s=(i=JSON.parse(t.content.data)).type,r=i.data;if("text"==s)i.data=r.content,n=o.decodeExpression(i.data);else if("image2"==s)n="[图片]",i.data.width=0,i.data.height=0,s="image";else if("clubLocation"==s)n="[位置]";else if("requestReward"==s)n="万水千山总是情，打赏两个行不行~";else if("journal"==s)n="[电子期刊]",r.title=r.actName,r.desc=b.journal.desc;else if("inviteGift"==s)n="[邀请有礼活动]",r.title=b.inviteGift.title,r.desc=b.inviteGift.desc;else if("itemCard"==s){var c=r.cardType;n="["+b.itemCard[c].title+"]",r.title=r.actName,r.desc=b.itemCard[c].desc}else"luckyWheel"==s?(n="[转盘抽奖]",r.title=r.actName,r.desc=b.luckyWheel.desc):"groupBuy"==s?(n="[拼团活动]",r.title=r.actName,r.desc=b.groupBuy.desc):"timeLimit"==s?(n="[限时抢活动]",r.title=r.actName,r.desc=b.timeLimit.desc):"paidCoupon"==s?n="[点钟券]立减"+r.discountValue+"元":"ordinaryCoupon"==s?n="["+r.typeName+"]"+r.couponName:"order_request"==s?n="选项目、约技师，线上预约，方便快捷~":"order_confirm"==s?n="[预约确认]":"order_cancel"==s?n="[预约取消]":"order_refuse"==s?n="[拒绝预约]":"order_success"==s?n="[预约成功]":"revert_msg"==s?(n="撤回了一条消息",i.data=r.msgId):"order"==s&&("refuse"==r.orderStatus?n="[拒绝预约]":"accept"==r.orderStatus&&(n="[接受预约]"));a.push({msgType:s,recentMsg:n,msg:i,receiveObj:{time:e.time,chatId:e.fromAccount,desc:n,data:i.data,msgId:e.uniqueId,uid:e.random+""+e.seq}})}catch(e){console.log("解析错误！",e)}}else if(2==e.elems.length){var u=void 0,l=void 0;e.elems.forEach(function(e){"TIMCustomElem"==e.type?u=e:l=e});try{var d=(i=JSON.parse(u.content.data)).type;if("image"==d){var h={};l.content.ImageInfoArray.forEach(function(e){e.type==C.IMAGE_TYPE.ORIGIN&&(h.url=e.url,h.width=e.width,h.height=e.height)}),h.url&&(n="[图片]",a.push({msgType:d,recentMsg:n,msg:i,receiveObj:{time:e.time,chatId:e.fromAccount,desc:n,data:h,msgId:e.uniqueId,uid:e.random+""+e.seq}}))}else"voice"==d&&(n="[语音]",a.push({msgType:d,recentMsg:n,msg:i,receiveObj:{time:e.time,chatId:e.fromAccount,desc:n,msgId:e.uniqueId,uid:e.random+""+e.seq,data:{duration:i.data.duration,url:l.content.downUrl}}}))}catch(e){console.log("解析消息错误！",e)}}}),a},decodeExpression:function(e){return e.replace(S,function(){return h.a[arguments[0]]||arguments[0]})},decodeSpecialCode:function(e){return e.replace(A,function(){return M[arguments[0]]||arguments[0]})},checkMaxLength:function(e){var t=C.Tool.getStrBytes(e),n=C.MSG_MAX_LENGTH.C2C;return!(t>n)||(I.a.tipShow("消息长度超出限制(最多"+Math.round(n/3)+"个汉字)"),!1)},doSendCommonMessage:function(e,t,n,i,o){var a=Math.round,s=a(+new Date/1e3),r=new C.Session(w,e.to,e.to,"",s),c=a(4294967296*Math.random()),u=C.C2C_MSG_SUB_TYPE.COMMON,l=new C.Msg(r,!0,-1,c,s,"",u,""),d=new C.Msg.Elem.Custom(g()(i));l.addCustom(d),l.sending=1,l.PushInfoBoolean=!0,l.PushInfo={PushFlag:0,Desc:n};var h={chatId:e.to,data:e.data,desc:n,isRevoke:!1,isSend:!0,msgId:l.uniqueId,uid:l.random+""+l.seq,time:l.time,type:t,sendStatus:!0,readStatus:!0};return C.sendMsg(l,function(t){e.success&&e.success()},function(t){console.log("error：",t),o(h.msgId,e.to,!1)}),h},doSendImageMessage:function(e,t,n){var i=this,o={file:e.file,To_Account:e.to,businessType:C.UPLOAD_PIC_BUSSINESS_TYPE.C2C_MSG};C.uploadPic(o,function(o){i.doImageUploaded(o,e.to,t,n)},function(e){console.log(e.ErrorInfo)})},doImageUploaded:function(e,t,n,i){var o=Math.round,a=o(+new Date/1e3),s=new C.Session(w,t,t,"",a),r=o(4294967296*Math.random()),c=C.C2C_MSG_SUB_TYPE.COMMON,u=new C.Msg(s,!0,-1,r,a,"",c,""),l={data:{},time:+new Date,type:"image",userId:this.userId},d=new C.Msg.Elem.Custom(g()(l));u.addCustom(d),u.PushInfoBoolean=!0,u.PushInfo={PushFlag:0,Desc:"[图片]"};var h=new C.Msg.Elem.Images(e.File_UUID),p=void 0,f=void 0,m={};e.URL_INFO.forEach(function(e){1==e.PIC_TYPE?(f=1,m.url=e.DownUrl,m.width=e.PIC_Width,m.height=e.PIC_Height):2==e.PIC_TYPE?f=3:4==e.PIC_TYPE&&(f=2),p=new C.Msg.Elem.Images.Image(f,e.PIC_Size,e.PIC_Width,e.PIC_Height,e.DownUrl),h.addImage(p)}),u.addImage(h),u.sending=1;var v={chatId:t,data:m,desc:"[图片]",isRevoke:!1,isSend:!0,msgId:u.uniqueId,uid:u.random+""+u.seq,time:u.time,type:"image",sendStatus:!0,readStatus:!0};n(v),C.sendMsg(u,function(e){console.log("发送成功：",e,v)},function(e){console.log(e.ErrorInfo),v.sendStatus=!1,i(v.msgId,t)})},close:function(){C.logout()}},E=null,T=new RegExp("/::[A-Zab]+","g"),L=window;L._impl=_,L._idb=d.a;t.a={id:"",token:"",userId:"",header:null,name:"",status:0,dbStatus:0,category:"t",conn:null,init:function(){var e=this;e.id&&e.token?e.conn=_.init({imInstance:e,onConnNotify:e.onConnNotify,onMsgNotify:e.onMsgNotify,onKickedEventCall:e.onKickedEventCall,loginSuccess:function(){d.a.openDB(e.userId,e.category,function(){e.dbStatus=1,e.getSessionList(function(){"t"==e.category&&e.pullOfflineMessages()})})}}):console.log("缺少im的id或者token!")},ready:function(){var e=this;return new r.a(function(t){if(0!=e.status&&3!=e.status&&1==e.dbStatus)t();else var n=setInterval(function(){0!=e.status&&3!=e.status&&1==e.dbStatus&&(clearInterval(n),t())},50)})},close:function(){1==this.dbStatus&&d.a.closeDB(),0!=this.status&&_.close()},pullOfflineMessages:function(){var e=this;_.getRecentContactList().then(function(t){t.length>0&&t.forEach(function(t){e.isInSessionList(t.To_Account)||e.updateSessionList({id:t.To_Account,recentMsg:"@@",newMsgCount:0},!1,!1)});var n=l.a.state.sessionList;e.doPullOfflineMessage(0,n)})},doPullOfflineMessage:function(e,t){var n=this;if(t[e]){var i=t[e].id;_.doPullOfflineMessage(i).then(function(o){if(o){var a=o.MsgList,s=a.length,r=void 0,c=[],u=0;s>0?d.a.getLastedMessage(i,function(i){if(i){for(s--,u=i.time;s>=0&&(r=a[s]).random+""+r.seq!=i.uid;s--);s++}else s=0;for(;s<a.length;s++)!(r=a[s]).isSend&&u<r.time&&c.push(r);c.length>0&&n.onMsgNotify(c),n.doPullOfflineMessageNext(e,t)}):n.doPullOfflineMessageNext(e,t)}else n.doPullOfflineMessageNext(e,t)})}},doPullOfflineMessageNext:function(e,t){e<t.length-1&&this.doPullOfflineMessage(e+1,t)},isInSessionList:function(e){for(var t=l.a.state.sessionList,n=0;n<t.length;n++)if(t[n].id==e)return!0;return!1},getSessionList:function(e){var t=this;return 0==l.a.state.sessionList.length&&d.a.getSessionList(function(n){return l.a.commit("setMessageSessionList",n),n.length>0&&t.updateSessionHeaderUrl(n),t.updateTotalNewMsgCount(),e&&e(),n}),l.a.state.sessionList},getSessionObj:function(e,t){var n=null,i=-1,o=l.a.state.sessionList;t=!!t;for(var a=void 0,s=0;s<o.length;s++)if(a=o[s],!t&&a.id==e||t&&a.userId==e){n=a,i=s;break}return n?{obj:n,index:i}:null},updateSessionList:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this,i=null,o=-1,a=void 0;(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&(a=n.getSessionObj(e.id)),a&&(i=a.obj,o=a.index),i?(i.time=e.time||Math.round(+new Date/1e3),e.recentMsg&&(i.recentMsg=e.recentMsg),e.avatar&&(i.avatar=e.avatar),e.header&&(i.header=e.header),e.type&&(i.type=e.type),e.clubId&&(i.clubId=e.clubId),e.serialNo&&(i.serialNo=e.serialNo),e.name&&(i.name=e.name),t?l.a.state.talker.id==i.id?i.newMsgCount=0:i.newMsgCount=i.newMsgCount+1:void 0!=e.newMsgCount&&(i.newMsgCount=e.newMsgCount),l.a.commit("updateMessageSession",{index:o,obj:i}),n.updateTotalNewMsgCount(),n.saveSession([i])):u.a.http.get("../api/v2/chat/userInfo/{id}",{params:{id:e.id,getPermission:!1,idType:"emchat"}}).then(function(t){200==(t=t.body).statusCode&&(t=t.respData,i={id:e.id,name:t.name||e.name||"",time:e.time||Math.round(+new Date/1e3),header:t.avatar||e.header||"",avatar:e.avatar||"",userId:t.userId,recentMsg:e.recentMsg,newMsgCount:l.a.state.talker.id==e.id?0:void 0!=e.newMsgCount?e.newMsgCount:1,type:t.userType,clubId:t.clubId||e.clubId,serialNo:t.serialNo},(a=n.getSessionObj(e.id))||(l.a.commit("addMessageSession",i),n.updateTotalNewMsgCount(),n.saveSession([i])))})},saveSession:function(e){this.ready().then(function(){d.a.saveSession(e)})},delMessage:function(e){var t=[],n=[];l.a.state.sessionList.forEach(function(i){i.id==e?(d.a.delMessage(i.id),i.recentMsg="",t.push(i)):n.push(i)}),0!=t.length&&(d.a.delSession(t),l.a.commit("setMessageSessionList",n))},delAllMessage:function(e,t){var n=[];l.a.state.sessionList.forEach(function(t){(e&&e==t.clubId||!e)&&(d.a.delMessage(t.id),t.recentMsg="",t.newMsgCount=0,n.push(t))}),0!=n.length&&(t?(d.a.delSession(n),l.a.commit("setMessageSessionList",[])):(d.a.saveSession(n),l.a.commit("setMessageSessionList",n)))},updateTotalNewMsgCount:function(){l.a.commit("updateNewMessageTotal")},setTalker:function(e){l.a.commit("updateChatTalker",e)},updateSessionHeaderUrl:function(e){for(var t=this,n=[],i=void 0,o=[],a=0;a<e.length;a++)(i=e[a].avatar)&&i.length>0&&(n.push(i),o.push(e[a]));n.length>0&&u.a.http.get("../api/v1/emchat/tech/avatars",{params:{avatarIds:n.join(",")}}).then(function(n){if(200==(n=n.body).statusCode&&n instanceof Array){for(var i=0;i<n.length;i++)n[i]&&(o[i].header=n[i]);t.saveSession(e),l.a.commit("setMessageSessionList",e)}})},onConnNotify:function(e){this.status=_.getConnStatus(e)},onMsgNotify:function(e){var t=this;_.onMsgNotify(e).forEach(function(e){if(e){var n=e.receiveObj;if("revert_msg"==e.msgType&&(d.a.changMessageRevokeStatus(e.msg.data,n.chatId),l.a.state.talker.id==n.chatId&&l.a.commit("changeMessageRevokeStatus",e.msg.data)),e.recentMsg){t.doReceiveMessage(n,e.msgType);var i={time:n.time,id:n.chatId,recentMsg:e.recentMsg,clubId:e.clubId,header:e.header,name:e.name,avatar:e.avatar};t.updateSessionList(i)}}})},getLastedMessage:function(e,t){d.a.getLastedMessage(e,t)},getMessageList:function(e,t){d.a.getMessageList(e,t)},doReceiveMessage:function(e,t){var n=a()({},e,{type:t,isSend:!1,isRevoke:!1,readStatus:!1});d.a.saveMessage(n),l.a.state.talker.id==e.chatId&&l.a.commit("addMessageToCurrList",n)},doSendTextMessage:function(e){var t=this,n=e.data=e.data.replace(/<br>/gi,"\n").replace(/<br\/>/gi,"\n");_.checkMaxLength(n)&&u.a.http.post("../api/v2/chat/sensitive/filter",{str:n}).then(function(i){200==(i=i.body).statusCode?(i=t.decodeSpecialCode(i.respData),e.data=i,t.doSendCommonMessage(e,"text",t.decodeExpression(i))):t.doSendCommonMessage(e,"text",t.decodeExpression(n))})},doSendMoneyRewardMessage:function(e){var t=e.data;this.doSendCommonMessage(e,"reward","打赏金额"+t.amount+"元")},doSendGiftRewardMessage:function(e){var t=e.data;this.doSendCommonMessage(e,"gift","打赏礼物["+t.giftName+"]")},doSendPaidCouponPurchaseTipMessage:function(e){var t=e.data;this.doSendCommonMessage(e,"paidCouponTip","您购买了"+t.techName+"的["+t.name+"]")},doSendCouponGetTipMessage:function(e){var t=e.data;this.doSendCommonMessage(e,"couponTip","您领取了"+t.techName+"的["+t.name+"]")},doSendAppointTechMessage:function(e){var t=e.data;this.doSendCommonMessage(e,"order","[发起预约]"+t.serviceItemName)},doSendOrderStartMessage:function(e){this.doSendCommonMessage(e,"order_start","[发起预约]")},doSendOrderSuccessMessage:function(e){this.doSendCommonMessage(e,"order_success","[预约成功]")},doSendCommonMessage:function(e,t,n){var i=l.a.state.talker,o={data:"text"==t?{content:e.data}:e.data,time:+new Date,type:t,userId:this.userId,tag:e.tag||""},a=_.doSendCommonMessage(e,t,n,o,function(e,t){d.a.updateMessageSendStatus(e,t,!1),t==i.id&&l.a.commit("updateMessageSendStatus",e)});d.a.saveMessage(a);var s={id:e.to,recentMsg:n};i.id==e.to&&(s.clubId=i.clubId),this.updateSessionList(s,!0),i.id==e.to&&(l.a.commit("addMessageToCurrList",a),this.makeFriend({toChatId:e.to,fromType:"user",toType:"",msgType:t,msgId:a.msgId,msgContent:a.desc}))},doSendImageMessage:function(e){var t=this;_.doSendImageMessage(e,function(n){d.a.saveMessage(n),t.updateSessionList({id:e.to,recentMsg:"[图片]"},!0),l.a.state.talker.id==e.to&&(l.a.commit("addMessageToCurrList",n),t.makeFriend({toChatId:e.to,fromType:"user",toType:"",msgType:"image",msgId:n.msgId,msgContent:n.desc}))},function(e,t){d.a.updateMessageSendStatus(e,t,!1)})},changeOrderMessagePayStatus:function(e,t,n){d.a.changeOrderMessagePayStatus(e,t,n)},updateMessageReadStatus:function(e,t,n){d.a.updateMessageReadStatus(e,t,n)},onKickedEventCall:function(){},decodeExpression:function(e){return _.decodeExpression(e)},decodeSpecialCode:function(e){return _.decodeSpecialCode(e)},decodeExpressionToImg:function(e){var t=void 0;if(!E)for(var n in E={},t=1,h.a)E[n]=t++;return e.replace(T,function(){return(t=E[arguments[0]])?'<img src="./static/images/chat/expression/'+t+'.png" data-exp="'+arguments[0]+'"/>':arguments[0]})},makeFriend:function(e){if(e.toChatId){u.a.http.post("../api/v1/emchat/markchattouser",{currentChatId:this.id,currentUserType:e.fromType||"user",friendChatId:e.toChatId,friendUserType:e.toType||"tech",msgType:e.msgType,msgId:e.msgId,msgContent:e.msgContent})}}}}},["NHnr"]);