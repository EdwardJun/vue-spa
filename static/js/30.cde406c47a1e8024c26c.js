webpackJsonp([30],{"+Z4i":function(e,i){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAMAAADW3miqAAAAbFBMVEUAAAD7VUn7VUn7VUn7VUn7VUn7VUn7VUn7VUn7VUn7VUn7VUn7VUn7VUn7VUn7VUn7VUn7VUn7VUn7VUn7VUn7VUn7VUn7VUn7VUn7VUn7VUn7VUn7VUn7VUn7VUn7VUn7VUn7VUn7VUn7VUnaCXswAAAAI3RSTlMAJPoMMwXIwZzr2Bf00Jl1VwiJ6bedEzw63r9Mn4uKf2loHk3dua4AAAE1SURBVDjLtZTZjoMwDEWzh4S1QOk2+/3/f5wWMnEgQpVG6n3AAY5sy0vYayS7xgxCDKbp5A7CiwpRVcFZrkMvANueS63Lc2sB0R8yNzVw5Mn7Eag3ztSAi1qO1oZPFwxq5cfhOoUzEA6TheNJPjVGzQgK0iNqyquHl6wzUwopz5n06GMwIRTTHl8p9Ib3OynEX8ACx/vzp12F09/LryLUuULACYpBUC2172DZHsQsutk2aPehFs1sDU770Almtg7lPlTCzVbgUcgrolJeQySQiYzJIApHysJR4qQscSoBKSsBFZOUFZPaUqp1MjdqS+zi5KuUkl7cwq9kVFhjVmv0WU9xVGjomNysz8MdPvLxJdH4poswym3v5AjHNyvl1RpSnlbqyXI+X/P/XBh09TghXLh6XqBf8dEcNG0otWwAAAAASUVORK5CYII="},"/UDp":function(e,i){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACUAAAAlCAMAAADyQNAxAAAAhFBMVEUAAAD7VUn7VUn7VUn7VUn7VUn7VUn7VUn7VUn7VUn7VUn7VUn7VUn7VUn7VUn7VUn7VUn7VUn7VUn/////+vr9sKv/6+r8hXz/8fD+6Ob8kIj8cGb7Z1z7XVL7WU3+xMD+3Nr9lo/8f3b8fnX+2NX+1tP+3dv9tbD9l5D+y8f8a2H7XlILvoDhAAAAEnRSTlMA+uok9dHJnJkMCIlXMlgjioikLo1JAAABLElEQVQ4y8WU2XLCMAxFsZ21CbS98pKdsFP6//9XhoChwYzz0ul5zZlYI+lq9lekeRJxxniU5OkrR8QBLEEsXM7bJwM2altIWWzVBmDZ25P0HgKrkizlCgjHv5tznHoirUzTtbVRZ78/gc9/l8SxLkhXsFSaig24eKwphJH09Y0H2iVJg/Chtgy1pANGHEjWyO6VM/S0xBNL6sHsmzFWpNtnq9V0RHzreICSKjioqERwnUKONWk40bRGPlgJFCmndPmQDFaEHRm3ZWiHaLA4CmrcVkMF+GAxSOrcVkcSbLrlf3F69f5OTO+qf0J22kf/tGfi5ebswYRnCxXJGh/TN/qeDiPH6ThLXIyTVu+vSeuaS9L2tU2aRXhTO9SW+S+A/5rcSRe3y7RIZ//LD0yXPN62w/fRAAAAAElFTkSuQmCC"},KiP9:function(e,i){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACUAAAAlCAMAAADyQNAxAAAAV1BMVEUAAAD7VUn7VUn7VUn7VUn7VUn7VUn7VUn7VUn7VUn7VUn7VUn7VUn7VUn////7VUn/8fD+6Ob+3dr+2NX9sav/9/b8hXz8cGb9lo/8f3b8fnX9l5D8a2Fnpkt8AAAADnRSTlMA+JoKJdHJiVfq6esyI25lS0IAAADjSURBVDjLxZTHEsIwDESRcYoDaJ1e//87OQSbNKNwYHhnjXZH0uryK66pijOiLFbpNVSjFcFDSh/2SQgYqtIy27IaAEr2/R4R0OXsyTsg2ra7Z5gKXlFMyO5rSwa95Q12gNFLTxEaPqBBtPCWoK35gLpF8nZOKPiQAuQ1FToOMEI5V4ScA+Sgl7MUPQfpkTrBioNUTjJGyUFKxHPVDZaDWNzmKgJ/AHS+SlY8716exBdTlTfkJEd52xctXo58hecv2qejqXedGhi9TVq7TVrrk+bRQmqFDyB/k/BnMkTGfaY/8gSvbCzR/eJsMgAAAABJRU5ErkJggg=="},N94Z:function(e,i){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAXCAMAAADX9CSSAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RjI3QzE4RkFGN0IyMTFFNTgzREJEOURFQzBDOTE1QkIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RjI3QzE4RkJGN0IyMTFFNTgzREJEOURFQzBDOTE1QkIiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpGMjdDMThGOEY3QjIxMUU1ODNEQkQ5REVDMEM5MTVCQiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpGMjdDMThGOUY3QjIxMUU1ODNEQkQ5REVDMEM5MTVCQiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqCBGzkAAAAGUExURf///////1V89WwAAAACdFJOU/8A5bcwSgAAAD1JREFUeNpiYAQBBgYGRkYUFgMucdIBFnMIiaMDQuJgEkEQI86ATRyP+QxImrCLM5AoTgNzSAo3kgBAgAEAFdEA7RYTmt8AAAAASUVORK5CYII="},R4cb:function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=t("3cXf"),r=t.n(n),o=t("wy9b"),a=t.n(o),d=t("vbKY"),c=t("wKTW"),s=t("zDZx"),m=t("TVG1"),p={data:function(){return{global:d.a.data,techId:"",itemId:"",clubId:"",oldOrderId:"",oldDownPayment:"",oldOrderCustomerName:"",downPayment:0,initDownPayment:0,isPayAppointment:!1,appointType:"",tipStr:"温馨提示：订单生成后过期未到将作废。",isCanAppoint:!0,tech:{},serviceItem:{},contactName:"",days:["今天","明天","后天"],weeks:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],allTimes:[],fDates:[],timesData:[],selectedTimeTab:0,serviceDuration:0,serviceItemList:[],currAppointTime:{},currAppointTimeStr:"--:--",currPickerTime:{},currPickerDateStr:"",isShowTimePicker:!1,telephone:"",itemDurationList:[],showItemDurationList:!0,isShowServicePicker:!1,currPickedItem:{},inSubmit:!1,paramData:null,isCrossInner:!1,selectTimeId:"",qrcodeId:"",qrcodeType:""}},filters:{itemPriceFormatter:t("/d1y").a},created:function(){var e=this,i=e.global,t=i.currPage.query,n=t.code||i.authCode;document.title="确认订单",e.techId=t.techId,e.itemId=t.itemId,e.clubId=t.clubId||i.clubId,e.oldOrderId=t.orderId,e.oldDownPayment=t.downPayment,e.oldOrderCustomerName=t.customerName,e.paramData=m.a.localStorage("con-order-param")||null,e.paramData&&(e.paramData=JSON.parse(e.paramData)),e.paramData&&n&&i.userAgent.isWX?d.a.getOpenId({authCode:n}).then(function(){e.initPage()}):e.initPage()},methods:{initPage:function(){var e,i=this,t=i.global,n=m.a.sessionStorage;if(i.qrcodeId=n("qrcodeId")||"",i.qrcodeType=n("qrcodeType"),!i.techId&&!i.itemId||!i.clubId)return m.a.tipShow(t.visitError),i.$router.back();var r=["45分钟","1小时","1.5小时","2小时"],o=[45,60,90,120],a=[];for(e=0;e<4;e++)a.push({timeStr:r[e],time:o[e],isCancel:!0,isDisabled:3==e,isActive:1==e});i.itemDurationList=a,i.$http.get("../api/v2/club/order/appoint/view",{params:{clubId:i.clubId,techId:i.techId||"",itemId:i.itemId||""}}).then(function(n){if(200!=(n=n.body).statusCode)return m.a.tipShow(n.msg||t.loadError),i.$router.back();n=n.respData,i.isCrossInner="true"===n.hasInnerProvider,i.initDownPayment=i.downPayment=n.downPayment||0,i.isPayAppointment=i.isCrossInner||/^(paid|paid_full)$/.test(n.appointType),i.appointType=n.appointType,n.tech?(n.tech.chatId=n.emchatId||"",i.tech=n.tech):i.tech={id:"",avatarUrl:"",name:"技师待定",description:"到店选择技师"},n.appointDescription&&(i.tipStr=n.appointDescription),n.item?("paid_full"==i.appointType&&(i.downPayment=n.item.price),i.serviceItem=n.item,i.showItemDurationList=!1):(i.serviceItem={id:"",name:"到店选择"},i.showItemDurationList=!0),i.oldOrderId&&(i.downPayment=i.oldDownPayment,i.contactName=i.oldOrderCustomerName,i.showItemDurationList=!1);var r,o,d,c=!1,s=[],p=[],l=[];if(i.isCrossInner)if(n.time.length<=0)i.isCanAppoint=!1;else{i.isCanAppoint=!0;var v={},h=new Date;for(e=0;e<3;e++)v[m.a.dateFormat(i.getDateObj(h,0==e?0:1).currDate,"yyyy-MM-dd")]=i.days[e];for(i.days=v,e=0;e<n.time.length;e++)(d=n.time[e]).time&&d.time.length>0&&(c=!0),s[d.id]=d,d.time.tmpFlag="Y"!=d.time.status,d.time.status="Y",l.push(d.time);for(i.allTimes=l,o=new Date(n.today),o=m.a.dateFormat(o,"yyyy-MM-dd")==s[0].day?o:new Date(s[0].day.replace(/-/g,"/")),e=1;e<=n.time.length;e++)(r=i.getDateObj(o,1==e?0:1)).dateStr=i.days[n.time[e-1].day]+r.month+"月"+r.day+"日",r.dayIndex=e+2-n.time.length,p.push(r);i.fDates=p,i.timesData=s}else{for(e=0;e<n.time.length;e++)(d=n.time[e]).time&&d.time.length>0&&(c=!0),d.time.sort(function(e,i){return e.time-i.time}),s[d.id]=d,Array.prototype.push.apply(l,d.time);var f,u,g=45;if(i.itemId){var b=n.item,y=b.durationUnit,k=b.duration;g=/次/g.test(y)?60*Number(k):/天/g.test(y)?24*Number(k)*60:/时/g.test(y)?60*Number(k):Number(k),i.serviceDuration=g}f=Math.ceil(g/30);var I=+new Date,A=new Date;for(A.setHours(8,0,0,0),A=A.getTime(),e=0;e<l.length;e++)0==(d=l[e]).day&&A+d.time<I?d.tmpFlag=!1:"N"==d.status?d.tmpFlag=!1:e+1<l.length?(u=l.slice(e+1,e+f).every(function(e){return"N"!=e.status}),d.tmpFlag=u):d.tmpFlag=!0,s[~~(e/48)].time[e%48].tmpFlag=d.tmpFlag;for(o=new Date(n.today),e=1;e<4;e++)(r=i.getDateObj(o,1==e?0:1)).dateStr=i.days[e-1]+r.month+"月"+r.day+"日",r.dayIndex=e+2-n.time.length,p.push(r);i.fDates=p,i.timesData=s,i.allTimes=l}c||(i.isCanAppoint=!1);var w=m.a.localStorage("customerName");if(w&&!i.oldOrderId&&(i.contactName=w),i.queryServiceItemData(),i.paramData){m.a.removeLocalStorage("con-order-param");var S=i.paramData,D={45:1,60:2,90:3,120:4}[S.serviceDuration];if(D)for(a=i.itemDurationList,e=0;e<a.length;e++)a[e].isCancel=!1,a[e].isActive=e==D-1,i.refreshItemDurationList(a[e],e);i.currAppointTimeStr=S.arriveTime,i.contactName=S.username,i.doPay(S.dateDay,S.dateTime,S.downPayment,S.serviceDuration)}t.loading=!1},function(){return m.a.tipShow(t.loadError),i.$router.back()}),i.$http.get("../api/v2/club/technician/{techId}/section/bottom",{params:{techId:i.techId||""}}).then(function(e){200==(e=e.body).statusCode&&(e=e.respData,i.telephone=e.telephone?e.telephone.split(","):[],i.appointType=e.appointType)})},doConfirmOrder:function(){var e,i,t=this,n=t.itemDurationList,r=t.global,o=t.currAppointTime;if(!r.userTel)return c.a.$emit("pop-bind-phone");if(t.contactName&&m.a.localStorage("customerName",t.contactName),!t.inSubmit){if(!t.serviceItem.id&&"paid_full"==t.appointType)return m.a.tipShow("请选择预约项目！");if("phone"!=t.appointType){if(!t.isCanAppoint)return m.a.tipShow("当前无可预约时间！");if(!t.currAppointTime.time)return m.a.tipShow("请选择到店时间！");if(!t.contactName)return m.a.tipShow("请输入联系人姓名！");t.inSubmit=!0}if(!t.serviceItem.id){for(i=0;i<n.length;i++)if(n[i].isActive){e=n[i];break}t.serviceDuration=e.isDisabled?0:e.time}if(t.oldOrderId)t.$http.get("../api/v2/club/order/update_time",{params:{clubId:t.clubId,dateDay:o.date.dayIndex,dateTime:o.time.timeStr,orderId:t.oldOrderId,timeId:t.selectTimeId}}).then(function(e){e=e.body,t.inSubmit=!1,200==e.statusCode?(m.a.tipShow("预约成功！"),t.sendMessage(t.oldOrderId)):m.a.tipShow(e.msg||"预约请求失败！")},function(){m.a.tipShow("预约请求失败！"),t.inSubmit=!1});else{if(!t.serviceItem.id&&0==t.serviceDuration)return t.inSubmit=!1,m.a.tipShow("无项目时长，请更改到店时间！");if(t.isPayAppointment&&t.downPayment>0){if(!r.userAgent.isWX)return t.inSubmit=!1,d.a.checkAccess("confirmOrder")?m.a.tipShow("请您打开微信登录'小摩豆'公众号！"):m.a.tipShow("会所未开通付费预约权限！");if(!r.isLogin)return t.inSubmit=!1,m.a.tipShow("请您先登录！"),d.a.login(t.$router);t.doPay(o.date.dayIndex,o.time.timeStr,t.downPayment,t.serviceDuration)}else t.$http.post("../api/v2/club/order/appoint",{username:t.contactName,dateDay:o.date.dayIndex,dateTime:o.time.timeStr,clubId:t.clubId,techId:t.techId||"",itemId:t.itemId||"",orderType:t.appointType,downPayment:0,serviceDuration:t.serviceDuration,timeId:t.selectTimeId}).then(function(e){e=e.body,t.inSubmit=!1,200==e.statusCode?(m.a.tipShow("预约成功！"),t.$http.post("../api/v1/scan/code/stat",{clubId:t.clubId,qrcodeId:t.qrcodeId||"",qrcodeType:t.qrcodeType,statType:"appoint"}).then(function(e){e=e.body}),t.sendMessage(e.respData)):m.a.tipShow(e.msg||"预约请求失败！")},function(){m.a.tipShow("预约请求失败！"),t.inSubmit=!1})}}},doPay:function(e,i,t,n){var o=this,a={businessChannel:"link",clubId:o.clubId||"",dateDay:e||0,dateTime:i,itemId:o.itemId||"",orderType:o.appointType,serviceDuration:n,techId:o.techId||"",tradeChannel:"wx",username:o.contactName,timeId:o.selectTimeId};o.$http.post("../api/v2/wx/pay/paid_order",a).then(function(e){if(200==(e=e.body).statusCode){var i=JSON.parse(e.respData);d.a.wxJsBridgeReady(function(){WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:i.appId,timeStamp:i.timeStamp+"",nonceStr:i.nonceStr,package:i.package,signType:i.signType,paySign:i.paySign},function(e){o.inSubmit=!1,e.err_msg.indexOf("ok")>=0?(m.a.tipShow("支付成功！"),o.sendMessage(i.bizId),o.$http.post("../api/v1/scan/code/stat",{clubId:o.clubId,qrcodeId:o.qrcodeId||"",qrcodeType:o.qrcodeType,statType:"appoint"})):(m.a.tipShow("未能成功支付！"),o.isCrossInner?o.$http.get("../api/v2/wx/pay/delete_order",{params:{orderId:i.bizId}}):o.$router.push({name:"order"}))})})}else 935801==e.statusCode?(a.arriveTime=o.currAppointTimeStr,m.a.localStorage("con-order-param",r()(a)),d.a.getOauthCode("9358","confirm-order","base")):(m.a.tipShow(e.msg||"付费预约失败！"),o.inSubmit=!1)},function(){m.a.tipShow("付费预约失败！"),o.inSubmit=!1})},doShowServiceItemPicker:function(){this.serviceItemList.length>0&&(this.isShowServicePicker=!0)},doCloseServiceItemPicker:function(){this.isShowServicePicker=!1},initCurrPickedItem:function(){var e,i=this.serviceItemList;if(this.itemId)for(e=0;e<i.length;e++)i[e].id==this.itemId&&(this.currPickedItem=i[e])},doPickerServiceItem:function(e){"paid_full"==this.appointType&&e==this.currPickedItem||(e==this.currPickedItem?this.serviceItem=this.currPickedItem={id:"",name:"到店选择"}:this.currPickedItem=e)},doConfirmOfPickerItem:function(){var e=this.serviceItem,i=this.currPickedItem;this.itemId=e.id=i.id,e.name=i.name,e.price=i.price1||"待定",e.duration=i.duration1,e.durationUnit=i.durationUnit,"paid_full"==this.appointType&&(this.downPayment=i.price1||this.initDownPayment),this.showItemDurationList=!this.itemId,this.isShowServicePicker=!1},queryServiceItemData:function(){var e=this;e.techId?e.$http.get("../api/v1/profile/tech/getServiceItemByTech",{params:{techId:e.techId}}).then(function(i){200==(i=i.body).statusCode?(e.serviceItemList=i.respData||[],e.initCurrPickedItem()):m.a.tipShow(i.msg||"查询技师服务项目失败！")}):e.$http.get("../api/v2/club/{clubId}/categoryService",{params:{clubId:e.clubId}}).then(function(i){if((i=i.body).length){for(var t=[],n=0;n<i.length;n++)t=t.concat(i[n].serviceItems);e.serviceItemList=t,e.initCurrPickedItem()}})},doClickTechHeader:function(){var e=this.tech;e.id&&this.$router.push({name:"chat",query:{techId:e.id,clubId:this.clubId}})},getDateObj:function(e,i){return i&&e.setDate(e.getDate()+i),{currDate:e,date:e.getTime(),year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate(),week:e.getDay()}},doShowTimePicker:function(){this.isCanAppoint&&(this.isShowTimePicker=!0)},doCloseTimePicker:function(){this.isShowTimePicker=!1},doSwitchTimeTab:function(e){this.selectedTimeTab!=e&&(this.selectedTimeTab=e,this.currPickerTime={time:"",timeStr:""})},doPickTime:function(e,i){if("N"!=e.status&&("Y"!=e.status||e.tmpFlag)){this.currPickerTime=e;var t=this.fDates[i];this.currPickerDateStr=t.month+"月"+t.day+"日 "+this.weeks[t.week]+" "}},doConfirmOfTime:function(){var e=this,i=e.currPickerTime,t=e.selectedTimeTab;if(i.time){e.selectTimeId=i.timeId||"";var n=e.fDates[t];if(e.currAppointTimeStr=n.month+"月"+n.day+"日 "+e.weeks[n.week]+" "+i.timeStr,e.currAppointTime={date:n,time:i},!e.serviceItem.id){var r,o,a=e.itemDurationList;for(r=0;r<a.length;r++)(o=a[r]).isCancel=!1,o.isDisabled=!1;var d,c,s,m=48*t+e.timesData[t].time.indexOf(i);for(a.every(function(i,t){if(d=Math.ceil(i.time/30),c=e.allTimes.slice(m+1,m+d),!c.every(function(e){return"N"!==e.status})){for(s=t;s<a.length;s++)a[s].isDisabled=!0,1==s?a[0].isActive=!0:a[1].isActive=!0;return!1}return!0}),r=0;r<a.length;r++)o=a[r],e.refreshItemDurationList(o,r)}e.isShowTimePicker=!1}},doSelectItemDuration:function(e){if(!e.isCancel&&!e.isDisabled)for(var i=this.itemDurationList,t=0;t<i.length;t++)i[t].isActive=i[t]==e,this.refreshItemDurationList(i[t],t)},refreshItemDurationList:function(e,i){var t=this.itemDurationList;i=i||t.indexOf(e),a.a.set(t,i,e)},sendMessage:function(e){if(this.techId&&this.tech.chatId&&!this.isCrossInner){var i=this.tech;s.a.doSendAppointTechMessage({to:i.chatId,data:{appointTime:this.currAppointTimeStr,serviceItemName:this.serviceItem.name,orderId:e}}),this.isPayAppointment&&this.downPayment>0?this.$router.push({name:"order"}):this.$router.push({name:"orderDetail",query:{id:e,tag:"submit"}})}else this.$router.push({name:"orderDetail",query:{id:e,tag:"submit"}})}}},l={render:function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"page",class:{pBottom:e.isCanAppoint},style:{"min-height":e.global.winHeight+"px"},attrs:{id:"confirm-order-page"}},[t("div",{staticClass:"tech-info"},[t("div",{style:{"background-image":"url("+(e.tech.avatarUrl||e.global.defaultHeader)+"),url("+e.global.defaultHeader+")"},on:{click:function(i){e.doClickTechHeader()}}},[e.tech.id?t("div",{class:e.tech.status},[e._v(e._s("free"==e.tech.status?"闲":"忙"))]):e._e()]),e._v(" "),t("div",[t("div",[e._v(e._s(e.tech.name)),t("span",{directives:[{name:"show",rawName:"v-show",value:e.tech.serialNo,expression:"tech.serialNo"}]},[e._v("["),t("span",[e._v(e._s(e.tech.serialNo))]),e._v("]")])]),e._v(" "),t("div",[e._v(e._s(e.tech.description||"这个技师很懒，没有填写个人简介..."))])])]),e._v(" "),t("div",{staticClass:"item service-item-info"},[t("div",{class:{active:e.serviceItemList.length>0},on:{click:function(i){e.doShowServiceItemPicker()}}},[e._v("预约项目："),t("span",[e._v(e._s(e.serviceItem.name))])]),e._v(" "),t("div",[e._v("项目价格："),e.serviceItem.id?t("span",[e._v(e._s(e._f("itemPriceFormatter")(e.serviceItem.price,e.serviceItem.duration,e.serviceItem.durationUnit)))]):t("span",[e._v("待定")])])]),e._v(" "),t("div",{staticClass:"arrive-info"},[e._m(0),e._v(" "),t("div",{on:{click:function(i){e.doShowTimePicker()}}},[t("span",[e._v("到店时间：")]),t("span",{class:{active:e.isCanAppoint}},[e._v(e._s(e.isCanAppoint?e.currAppointTimeStr:"无可预约时间"))])]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.showItemDurationList,expression:"showItemDurationList"}]},[e._v("项目时长：")]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.showItemDurationList,expression:"showItemDurationList"}]},e._l(e.itemDurationList,function(i,n){return t("span",{key:n,class:{cancel:i.isCancel,disabled:i.isDisabled,active:i.isActive},on:{click:function(t){e.doSelectItemDuration(i)}}},[e._v(e._s(i.timeStr))])}))]),e._v(" "),t("div",{staticClass:"contact-info item"},[t("div",[e._v("联系人："),t("input",{directives:[{name:"model",rawName:"v-model",value:e.contactName,expression:"contactName"}],attrs:{maxlength:"5"},domProps:{value:e.contactName},on:{input:function(i){i.target.composing||(e.contactName=i.target.value)}}})]),e._v(" "),t("div",[e._v("手机号码："),t("span",[e._v(e._s(e.global.userTel))])])]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.isPayAppointment&&e.downPayment>0,expression:"isPayAppointment && downPayment>0"}],staticClass:"appoint-info item"},[t("div",[e._v("预约现金："),t("span",{class:{del:e.oldOrderId}},[e._v("￥"+e._s(e.downPayment)+"元")])]),e._v(" "),"paid_full"==e.appointType?t("div",[e._v("支付金额可在结账时抵扣"+e._s(e.serviceItem.name)+"消费，过期不退。")]):t("div",[e._v("此定金可在结账时抵扣"+e._s(e.serviceItem.name)+"消费")])]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.isPayAppointment&&e.downPayment>0,expression:"isPayAppointment && downPayment>0"}],staticClass:"tip-info",domProps:{innerHTML:e._s(e.tipStr)}}),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.isCanAppoint,expression:"isCanAppoint"}],staticClass:"submit-button footer",class:{active:e.currAppointTime.time,processing:e.inSubmit,disabled:e.inSubmit},on:{click:function(i){e.doConfirmOrder()}}},[e._v(e._s(e.inSubmit?"预约中...":"确认预约"))]),e._v(" "),t("div",{staticClass:"pop-modal time-picker-modal",class:{active:e.isShowTimePicker}},[t("div",{staticClass:"center-wrap"},[t("div",[e._v("选择到店时间"),t("span",{on:{click:function(i){e.doCloseTimePicker()}}},[e._v("×")])]),e._v(" "),t("div",{staticClass:"day-list"},e._l(e.fDates,function(i,n){return t("div",{key:n,class:{active:n==e.selectedTimeTab},on:{click:function(i){e.doSwitchTimeTab(n)}}},[e._v(e._s(i.dateStr))])})),e._v(" "),e._l(e.timesData,function(i,n){return t("div",{key:n,staticClass:"time-list",class:{active:n==e.selectedTimeTab}},e._l(i.time,function(i,r){return t("div",{key:r,class:{disabled:"N"===i.status||"Y"==i.status&&!i.tmpFlag,active:i==e.currPickerTime},on:{click:function(t){e.doPickTime(i,n)}}},[t("span",{style:{display:"Y"!=i.status||i.tmpFlag?"":"block"}},[e._v(e._s(i.timeStr))]),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:!("Y"==i.status&&!i.tmpFlag),expression:"!(time.status=='Y' && !time.tmpFlag)"}]},[e._v("--:--")])])}))}),e._v(" "),t("div",{staticClass:"selected-time"},[e._v("到店时间："),e.currPickerTime.time?t("span",[e._v(e._s(e.currPickerDateStr)+e._s(e.currPickerTime.timeStr))]):t("span",[e._v("--:--")])]),e._v(" "),t("div",{staticClass:"confirm-button",class:{disabled:!e.currPickerTime.time},on:{click:function(i){e.doConfirmOfTime()}}},[e._v("确认预约")])],2)]),e._v(" "),t("div",{staticClass:"pop-modal service-picker-modal",class:{active:e.isShowServicePicker}},[t("div",{staticClass:"center-wrap"},[t("div",[e._v("选择服务项目"),t("span",{on:{click:function(i){e.doCloseServiceItemPicker()}}},[e._v("×")])]),e._v(" "),t("div",{staticClass:"service-list"},e._l(e.serviceItemList,function(i,n){return t("div",{key:n,staticClass:"service-item",class:{active:e.currPickedItem==i},on:{click:function(t){e.doPickerServiceItem(i)}}},[t("div"),e._v(" "),t("div",{style:{"background-image":"url("+(i.imageUrl||e.global.defaultServiceItemImgUrl)+")"}}),e._v(" "),t("div",[t("div",[e._v(e._s(i.name))]),e._v(" "),t("div",[t("div",[e._v(e._s(e._f("itemPriceFormatter")(i.price1,i.duration1,i.durationUnit)))]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:i.price2,expression:"item.price2"}]},[t("span",[e._v("加钟")]),e._v(" "+e._s(e._f("itemPriceFormatter")(i.price2,i.duration2,i.durationUnitPlus)))])])])])})),e._v(" "),t("div",{staticClass:"selected-service"},[e._v("预约项目："),t("span",[e._v(e._s(e.currPickedItem.id?e.currPickedItem.name:"未选择项目"))])]),e._v(" "),t("div",{staticClass:"confirm-button",on:{click:function(i){e.doConfirmOfPickerItem()}}},[e._v("确认预约")])])])])},staticRenderFns:[function(){var e=this.$createElement,i=this._self._c||e;return i("div",[this._v("到店日期"),i("div")])}]};var v=t("Z0/y")(p,l,!1,function(e){t("uVDD")},null,null);i.default=v.exports},hOo7:function(e,i,t){var n=t("JLGU");(e.exports=t("XLS9")(!1)).push([e.i,"\n.clearfix {\n  display: inline-block;\n}\n.clearfix:after {\n    display: block;\n    content: \".\";\n    height: 0;\n    line-height: 0;\n    clear: both;\n    visibility: hidden;\n}\n@media (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5) {\n.border-1px::after {\n    -webkit-transform: scaleY(0.7);\n    transform: scaleY(0.7);\n}\n}\n@media (-webkit-min-device-pixel-ratio: 2), (min-device-pixel-ratio: 2) {\n.border-1px::after {\n    -webkit-transform: scaleY(0.5);\n    transform: scaleY(0.5);\n}\n}\ndiv#confirm-order-page.pBottom {\n  padding-bottom: 3.5rem;\n}\ndiv#confirm-order-page .tech-info {\n  background-color: #fff;\n  height: 4.333rem;\n  border-bottom: 1px solid #e0e0e0;\n}\ndiv#confirm-order-page .tech-info > div {\n    float: left;\n    height: 2.778rem;\n    margin-top: 1.056rem;\n}\ndiv#confirm-order-page .tech-info > div:nth-of-type(1) {\n      margin-left: 0.667rem;\n      margin-right: 0.667rem;\n      width: 2.778rem;\n      border-radius: 50%;\n      position: relative;\n      background-size: 2.778rem 2.778rem;\n      background-repeat: no-repeat;\n}\ndiv#confirm-order-page .tech-info > div:nth-of-type(1) > div {\n        position: absolute;\n        height: 1.111rem;\n        width: 1.111rem;\n        border-radius: 50%;\n        font-size: 0.667rem;\n        color: #fff;\n        text-align: center;\n        line-height: 1.111rem;\n        top: -0.555rem;\n        right: -0.3rem;\n        background-color: #66cc66;\n}\ndiv#confirm-order-page .tech-info > div:nth-of-type(1) > div.busy {\n          background: #ff6666;\n}\ndiv#confirm-order-page .tech-info > div:nth-of-type(2) > div:nth-of-type(1) {\n      color: #4d4d4d;\n}\ndiv#confirm-order-page .tech-info > div:nth-of-type(2) > div:nth-of-type(1) > span {\n        font-size: 0.778rem;\n}\ndiv#confirm-order-page .tech-info > div:nth-of-type(2) > div:nth-of-type(1) > span > span {\n          color: #ff9d09;\n}\ndiv#confirm-order-page .tech-info > div:nth-of-type(2) > div:nth-of-type(2) {\n      color: #666;\n      font-size: 0.778rem;\n      line-height: 1.2rem;\n      width: 15rem;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n}\ndiv#confirm-order-page .service-item-info > div:nth-of-type(1).active {\n  position: relative;\n}\ndiv#confirm-order-page .service-item-info > div:nth-of-type(1).active:after {\n    content: ' ';\n    width: 0.43rem;\n    height: 0.43rem;\n    border-left: 0.1rem solid #999;\n    border-bottom: 0.1rem solid #999;\n    -webkit-transform: rotate(-135deg) translate(0.07181rem, -0.07181rem);\n    transform: rotate(-135deg) translate(0.07181rem, -0.07181rem);\n    display: inline-block;\n    position: absolute;\n    right: .667rem;\n    top: .9rem;\n}\ndiv#confirm-order-page .item {\n  margin-top: 0.444rem;\n  border-top: 1px solid #d9d9d9;\n  padding-left: 1.278rem;\n  border-bottom: 1px solid #e0e0e0;\n  background-color: #fff;\n}\ndiv#confirm-order-page .item > div {\n    height: 2.222rem;\n    line-height: 2.222rem;\n    color: #666;\n    font-size: 0.778rem;\n}\ndiv#confirm-order-page .item > div > span {\n      color: #333;\n}\ndiv#confirm-order-page .item > div > span.del {\n        text-decoration: line-through;\n}\ndiv#confirm-order-page .item > div > input {\n      width: 13.889rem;\n      border: 0;\n      padding: 0.3rem 0.4rem;\n      color: #333;\n      font-size: 0.778rem;\n}\ndiv#confirm-order-page .item > div:nth-of-type(1) {\n      border-bottom: 1px solid #ebebeb;\n}\ndiv#confirm-order-page .appoint-info > div > span {\n  display: inline-block;\n  width: 3.8056rem;\n  height: 1.3056rem;\n  line-height: 1.3056rem;\n  text-align: center;\n  color: #fb5549;\n  border: 1px solid #fb5549;\n  border-radius: 3px;\n}\ndiv#confirm-order-page .appoint-info > div:nth-of-type(2) {\n  margin: 0.38889rem 0 0.27778rem;\n  color: #f66;\n  line-height: 1.4;\n}\ndiv#confirm-order-page .arrive-info {\n  margin-top: 0.444rem;\n  border-top: 1px solid #d9d9d9;\n  border-bottom: 1px solid #e0e0e0;\n  background-color: #fff;\n  font-size: 0.778rem;\n  color: #4d4d4d;\n}\ndiv#confirm-order-page .arrive-info > div:nth-of-type(1) {\n    height: 1.667rem;\n    line-height: 1.667rem;\n    text-indent: 1.944rem;\n    position: relative;\n    border-bottom: 1px solid #d9d9d9;\n}\ndiv#confirm-order-page .arrive-info > div:nth-of-type(1) > div {\n      width: 1rem;\n      height: 1rem;\n      position: absolute;\n      top: 50%;\n      margin-top: -0.5rem;\n      left: 0.65rem;\n      background-size: 1rem 1rem;\n      background-image: url("+n(t("+Z4i"))+");\n      background-repeat: no-repeat;\n}\ndiv#confirm-order-page .arrive-info > div:nth-of-type(2) {\n    margin-left: 1.278rem;\n    height: 2.222rem;\n    line-height: 2.222rem;\n    border-bottom: 1px solid #ebebeb;\n}\ndiv#confirm-order-page .arrive-info > div:nth-of-type(2) > span:nth-of-type(2) {\n      display: inline-block;\n      width: 14rem;\n      padding-left: .5rem;\n      position: relative;\n      color: #fb5549;\n}\ndiv#confirm-order-page .arrive-info > div:nth-of-type(2) > span:nth-of-type(2).active:after {\n        content: ' ';\n        display: inline-block;\n        position: absolute;\n        right: .3rem;\n        top: .9rem;\n        width: 0.43rem;\n        height: 0.43rem;\n        border-left: 0.1rem solid #999;\n        border-bottom: 0.1rem solid #999;\n        -webkit-transform: rotate(-135deg) translate(0.07181rem, -0.07181rem);\n        transform: rotate(-135deg) translate(0.07181rem, -0.07181rem);\n}\ndiv#confirm-order-page .arrive-info > div:nth-of-type(3) {\n    margin-left: 1.278rem;\n    height: 2.222rem;\n    line-height: 2.222rem;\n    border-bottom: 1px solid #ebebeb;\n}\ndiv#confirm-order-page .arrive-info > div:nth-of-type(4) {\n    margin-left: 1.278rem;\n    height: 2.222rem;\n    line-height: 2.222rem;\n    padding: .4721rem;\n}\ndiv#confirm-order-page .arrive-info > div:nth-of-type(4) > span {\n      display: inline-block;\n      width: 3.8rem;\n      height: 1.2778rem;\n      line-height: 1.2778rem;\n      border: 1px solid #fb5549;\n      border-radius: 3px;\n      text-align: center;\n      color: #fb5549;\n      position: relative;\n      top: -.4rem;\n      font-size: .77778rem;\n}\ndiv#confirm-order-page .arrive-info > div:nth-of-type(4) > span:not(:first-child) {\n        margin-left: .58333rem;\n}\ndiv#confirm-order-page .arrive-info > div:nth-of-type(4) > span.active {\n        background-color: #fb5549;\n        color: #fff;\n}\ndiv#confirm-order-page .arrive-info > div:nth-of-type(4) > span.cancel, div#confirm-order-page .arrive-info > div:nth-of-type(4) > span.disabled {\n        background-color: #fff;\n        border-color: #999;\n        color: #999;\n}\ndiv#confirm-order-page .time-picker-modal {\n  font-size: 0.889rem;\n}\ndiv#confirm-order-page .time-picker-modal > div {\n    padding-bottom: 0.667rem;\n    background-color: #fff;\n    border-radius: 3px;\n    width: 18.666rem;\n}\ndiv#confirm-order-page .time-picker-modal > div > div:nth-of-type(1) {\n      text-align: center;\n      background-color: #fb5549;\n      height: 1.6667rem;\n      line-height: 1.667rem;\n      color: #fff;\n      font-size: 0.667rem;\n      border-top-left-radius: 3px;\n      border-top-right-radius: 3px;\n      position: relative;\n}\ndiv#confirm-order-page .time-picker-modal > div > div:nth-of-type(1):before {\n        content: \"\";\n        display: inline-block;\n        width: .63rem;\n        height: .63rem;\n        background-size: 0.63rem;\n        background-image: url("+n(t("N94Z"))+');\n        background-repeat: no-repeat;\n        margin-right: .2778rem;\n        position: relative;\n        top: .07rem;\n}\ndiv#confirm-order-page .time-picker-modal > div > div:nth-of-type(1) > span {\n        position: absolute;\n        right: .445rem;\n        font-size: 1.5rem;\n}\ndiv#confirm-order-page .time-picker-modal > div .day-list {\n      overflow: hidden;\n      font-size: .667rem;\n      display: table;\n      width: 100%;\n}\ndiv#confirm-order-page .time-picker-modal > div .day-list > div {\n        display: table-cell;\n        height: 2.4rem;\n        text-align: center;\n        -webkit-box-sizing: border-box;\n                box-sizing: border-box;\n        border-bottom: 4px solid #e0e0e0;\n        color: #666;\n        vertical-align: middle;\n}\ndiv#confirm-order-page .time-picker-modal > div .day-list > div.active {\n          border-bottom-color: #fb5549;\n          color: #fb5549;\n}\ndiv#confirm-order-page .time-picker-modal > div .time-list {\n      overflow: hidden;\n      padding: .4167rem;\n      min-height: 5rem;\n      display: none;\n}\ndiv#confirm-order-page .time-picker-modal > div .time-list.active {\n        display: block;\n}\ndiv#confirm-order-page .time-picker-modal > div .time-list > div {\n        float: left;\n        width: 15%;\n        margin: .2167rem 0;\n        padding: 0 .1389rem;\n        font-size: 0.676rem;\n        -webkit-box-sizing: content-box;\n                box-sizing: content-box;\n}\ndiv#confirm-order-page .time-picker-modal > div .time-list > div > span {\n          display: block;\n          border-radius: 3px;\n          border: 1px solid #fb5549;\n          color: #fb5549;\n          height: 1.1111rem;\n          line-height: 1.1111rem;\n          text-align: center;\n}\ndiv#confirm-order-page .time-picker-modal > div .time-list > div > span:last-child {\n          display: none;\n          color: #999;\n          border-color: #999;\n}\ndiv#confirm-order-page .time-picker-modal > div .time-list > div.active > span:first-child {\n          display: block;\n          color: #fff;\n          background-color: #fb5549;\n}\ndiv#confirm-order-page .time-picker-modal > div .time-list > div.active > span:last-child {\n          display: none;\n}\ndiv#confirm-order-page .time-picker-modal > div .time-list > div.disabled > span:first-child {\n          display: none;\n          text-decoration: line-through;\n          color: #999;\n          border-color: #999;\n}\ndiv#confirm-order-page .time-picker-modal > div .time-list > div.disabled > span:last-child {\n          display: block;\n}\ndiv#confirm-order-page .time-picker-modal > div .selected-time {\n      color: #666;\n      font-size: .6667rem;\n      padding-left: .5556rem;\n}\ndiv#confirm-order-page .time-picker-modal > div .selected-time > span {\n        color: #fb5549;\n}\ndiv#confirm-order-page .time-picker-modal > div .confirm-button {\n      margin: .4444rem .5556rem 0 .5556rem;\n      border-radius: 3px;\n      background-color: #fb5549;\n      color: #fff;\n      height: 2.4722rem;\n      line-height: 2.4722rem;\n      text-align: center;\n      font-size: 1.0556rem;\n}\ndiv#confirm-order-page .time-picker-modal > div .confirm-button.disabled {\n        background-color: #999;\n}\ndiv#confirm-order-page .service-picker-modal {\n  font-size: 0.889rem;\n}\ndiv#confirm-order-page .service-picker-modal > div {\n    background-color: #fff;\n    padding-bottom: .6667rem;\n    border-radius: 3px;\n    width: 18.666rem;\n}\ndiv#confirm-order-page .service-picker-modal > div > div:nth-of-type(1) {\n      text-align: center;\n      background-color: #fb5549;\n      height: 1.6667rem;\n      line-height: 1.667rem;\n      color: #fff;\n      font-size: 0.667rem;\n      border-top-left-radius: 3px;\n      border-top-right-radius: 3px;\n      position: relative;\n}\ndiv#confirm-order-page .service-picker-modal > div > div:nth-of-type(1):before {\n        content: "";\n        display: inline-block;\n        width: .63rem;\n        height: .63rem;\n        background-size: 0.63rem;\n        background-image: url('+n(t("N94Z"))+");\n        background-repeat: no-repeat;\n        margin-right: .2778rem;\n        position: relative;\n        top: .07rem;\n}\ndiv#confirm-order-page .service-picker-modal > div > div:nth-of-type(1) > span {\n        position: absolute;\n        right: .445rem;\n        font-size: 1.5rem;\n}\ndiv#confirm-order-page .service-picker-modal > div .service-list {\n      height: 12rem;\n      overflow-y: auto;\n      overflow-x: hidden;\n      padding-left: .611rem;\n}\ndiv#confirm-order-page .service-picker-modal > div .service-list > div.service-item {\n        display: -webkit-box;\n        display: -moz-box;\n        -webkit-box-align: center;\n        -moz-box-align: center;\n        line-height: 1.7;\n        padding: .444rem 0;\n        border-bottom: 1px solid #f0f0f0;\n}\ndiv#confirm-order-page .service-picker-modal > div .service-list > div.service-item > div:nth-of-type(1) {\n          width: 1.028rem;\n          height: 1.028rem;\n          margin-right: .611rem;\n          background-size: 1.028rem 1.028rem;\n          background-image: url("+n(t("KiP9"))+");\n          background-repeat: no-repeat;\n}\ndiv#confirm-order-page .service-picker-modal > div .service-list > div.service-item > div:nth-of-type(2) {\n          width: 2.667rem;\n          height: 2.667rem;\n          margin-right: .444rem;\n          background-size: 2.667rem 2.667rem;\n          background-repeat: no-repeat;\n}\ndiv#confirm-order-page .service-picker-modal > div .service-list > div.service-item > div:nth-of-type(3) {\n          -webkit-box-flex: 1;\n          box-flex: 1;\n}\ndiv#confirm-order-page .service-picker-modal > div .service-list > div.service-item > div:nth-of-type(3) > div:nth-of-type(1) {\n            overflow: hidden;\n            text-overflow: ellipsis;\n            white-space: nowrap;\n            color: #666;\n            font-size: .778rem;\n}\ndiv#confirm-order-page .service-picker-modal > div .service-list > div.service-item > div:nth-of-type(3) > div:nth-of-type(2) {\n            display: -webkit-box;\n            display: -moz-box;\n            -webkit-box-align: center;\n            -moz-box-align: center;\n}\ndiv#confirm-order-page .service-picker-modal > div .service-list > div.service-item > div:nth-of-type(3) > div:nth-of-type(2) > div {\n              width: 45%;\n              color: #999;\n              font-size: .667rem;\n}\ndiv#confirm-order-page .service-picker-modal > div .service-list > div.service-item > div:nth-of-type(3) > div:nth-of-type(2) > div:nth-of-type(2) > span {\n                background-color: #ff9d09;\n                color: #fff;\n                border-radius: 0.08333rem;\n                padding: 0 0.2rem;\n}\ndiv#confirm-order-page .service-picker-modal > div .service-list > div.service-item.active > div:nth-of-type(1) {\n          background-image: url("+n(t("/UDp"))+");\n}\ndiv#confirm-order-page .service-picker-modal > div .selected-service {\n      color: #666;\n      font-size: .6667rem;\n      padding-left: .5556rem;\n}\ndiv#confirm-order-page .service-picker-modal > div .selected-service > span {\n        color: #fb5549;\n}\ndiv#confirm-order-page .service-picker-modal > div .confirm-button {\n      margin: .4444rem .5556rem 0 .5556rem;\n      border-radius: 3px;\n      background-color: #fb5549;\n      color: #fff;\n      height: 2.4722rem;\n      line-height: 2.4722rem;\n      text-align: center;\n      font-size: 1.0556rem;\n}\ndiv#confirm-order-page .service-picker-modal > div .confirm-button.disabled {\n        background-color: #999;\n}\ndiv#confirm-order-page .tip-info {\n  margin-top: .222rem;\n  padding-left: 1.278rem;\n  font-size: .667rem;\n  color: #999;\n}\n",""])},uVDD:function(e,i,t){var n=t("hOo7");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);t("FIqI")("0c54f52a",n,!0,{})}});