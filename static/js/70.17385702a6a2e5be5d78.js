webpackJsonp([70],{"+WE5":function(e,n,t){var o=t("JLGU");(e.exports=t("XLS9")(!1)).push([e.i,'\n@charset "UTF-8";\n.clearfix {\n  display: inline-block;\n}\n.clearfix:after {\n    display: block;\n    content: ".";\n    height: 0;\n    line-height: 0;\n    clear: both;\n    visibility: hidden;\n}\n@media (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5) {\n.border-1px::after {\n    -webkit-transform: scaleY(0.7);\n    transform: scaleY(0.7);\n}\n}\n@media (-webkit-min-device-pixel-ratio: 2), (min-device-pixel-ratio: 2) {\n.border-1px::after {\n    -webkit-transform: scaleY(0.5);\n    transform: scaleY(0.5);\n}\n}\ndiv#fast-pay-page {\n  height: 100%;\n  background-color: #eee;\n}\ndiv#fast-pay-page .top-wrap {\n    height: 11.194rem;\n    padding: 1.667rem 0 0;\n    -webkit-box-sizing: content-box;\n            box-sizing: content-box;\n    background: -webkit-gradient(linear, left top, left bottom, from(#f2eddb), to(#e8ddc3));\n    background: linear-gradient(to bottom, #f2eddb, #e8ddc3);\n}\ndiv#fast-pay-page .top-wrap:before {\n      content: "";\n      display: block;\n      width: 8.389rem;\n      height: 1.667rem;\n      margin: 0 auto;\n      background-size: 8.389rem 1.667rem;\n      background-image: url('+o(t("ZwlP"))+');\n      background-repeat: no-repeat;\n}\ndiv#fast-pay-page .top-wrap .header {\n      height: 3.889rem;\n      width: 3.889rem;\n      border-radius: 50%;\n      margin: 0.972rem auto 0 auto;\n      border: 0.167rem solid #f3d698;\n      background-origin: padding-box;\n      background-size: 3.889rem 3.889rem;\n      background-repeat: no-repeat;\n}\ndiv#fast-pay-page .top-wrap .name {\n      margin-top: 0.667rem;\n      text-align: center;\n      font-size: 0.889rem;\n      color: #c29d6a;\n}\ndiv#fast-pay-page .top-wrap .name > span {\n        font-size: 0.667rem;\n        border: 1px solid #c29d6a;\n        border-radius: 1rem;\n        padding: 0 0.4rem;\n        margin-left: 0.3rem;\n}\ndiv#fast-pay-page .top-wrap.act {\n      margin-top: -3rem;\n}\ndiv#fast-pay-page .center-wrap {\n    position: relative;\n    height: 6.52778rem;\n    padding: 1.3056rem 0.667rem 0;\n    margin-top: 0.6389rem;\n    -webkit-box-sizing: border-box;\n            box-sizing: border-box;\n    background: #fff;\n    color: #4d4d4d;\n    margin-left: 0.83333rem;\n    margin-right: 0.83333rem;\n    border-radius: 0.41667rem;\n    margin-top: -1.38889rem;\n    margin-bottom: 0.69444rem;\n    -webkit-box-shadow: 0 0.08333rem 0.47222rem -0.13889rem rgba(35, 52, 75, 0.1);\n            box-shadow: 0 0.08333rem 0.47222rem -0.13889rem rgba(35, 52, 75, 0.1);\n}\ndiv#fast-pay-page .center-wrap > div {\n      font-size: 0.889rem;\n      text-shadow: 0.02778rem 0px 0px;\n}\ndiv#fast-pay-page .center-wrap > div > span {\n        display: inline-block;\n        background-color: #ff9d1e;\n        width: 1.11111rem;\n        height: 1.11111rem;\n        line-height: 1.15rem;\n        text-align: center;\n        border-radius: 100%;\n        color: #fff;\n}\ndiv#fast-pay-page .center-wrap:before {\n      content: "\\FFE5";\n      position: absolute;\n      font-size: 1.333rem;\n      left: 3.6rem;\n      top: 3.5rem;\n}\ndiv#fast-pay-page .center-wrap > input {\n      display: block;\n      position: relative;\n      font-size: 1rem;\n      margin-top: 0.455rem;\n      margin-left: 4.3rem;\n      width: 8.85rem;\n      color: #4d4d4d;\n      border: none;\n      letter-spacing: 0.04556rem;\n      padding: 0.35rem 0.2rem;\n      border-bottom: 0.02778rem solid #eee;\n}\ndiv#fast-pay-page .center-wrap input::-webkit-input-placeholder {\n      color: #ccc;\n}\ndiv#fast-pay-page .item {\n    background: #fff;\n    color: #4d4d4d;\n    padding-left: 1.66667rem;\n    padding-right: 1.05556rem;\n    font-size: 0.88889rem;\n}\ndiv#fast-pay-page .item > div {\n      height: 2.36111rem;\n      line-height: 2.36111rem;\n      border-bottom: 0.02778rem solid #e0e0e0;\n      color: #4d4d4d;\n      position: relative;\n}\ndiv#fast-pay-page .item > div > span {\n        font-size: 0.80556rem;\n        float: right;\n        margin-right: 0.13889rem;\n}\ndiv#fast-pay-page div.item-content {\n    border-bottom: 0.02778rem solid #e0e0e0;\n    border-top: 0.02778rem solid #e0e0e0;\n}\ndiv#fast-pay-page div.item-content > div:last-child > div {\n      border-bottom: 0;\n}\ndiv#fast-pay-page .center-discount > div {\n    height: 2.36111rem;\n    line-height: 2.36111rem;\n    color: #4d4d4d;\n    position: relative;\n}\ndiv#fast-pay-page .center-discount > div > span {\n      font-size: 0.80556rem;\n      float: right;\n      margin-right: 0.69444rem;\n}\ndiv#fast-pay-page .center-discount1 > div:last-child:after {\n    content: "";\n    position: absolute;\n    width: 0.4rem;\n    height: 0.4rem;\n    right: 0.2rem;\n    top: 1rem;\n    margin-top: -0.025rem;\n    border-left: 0.1rem solid #999999;\n    border-bottom: 0.1rem solid #999999;\n    -webkit-transform: rotate(-135deg);\n            transform: rotate(-135deg);\n}\ndiv#fast-pay-page .center-discount1 > div:last-child > div {\n    float: right;\n    margin-right: 0.69444rem;\n}\ndiv#fast-pay-page .center-discount1 > div > span {\n    background-color: #ffad43;\n    border-radius: 0.55556rem;\n    color: #fff;\n    height: 1.11111rem;\n    text-align: center;\n    line-height: 0.91667rem;\n    padding: 0.13889rem 0.27778rem;\n    font-size: 0.75rem;\n    margin-top: 0.61111rem;\n    margin-right: 0.83333rem;\n}\ndiv#fast-pay-page .center-discount1 > div > span.active {\n      background-color: #ccc;\n}\ndiv#fast-pay-page .center-member > div:after {\n    content: "";\n    position: absolute;\n    width: 0.4rem;\n    height: 0.4rem;\n    right: 0.2rem;\n    top: 1rem;\n    margin-top: -0.025rem;\n    border-left: 0.1rem solid #999999;\n    border-bottom: 0.1rem solid #999999;\n    -webkit-transform: rotate(-135deg);\n            transform: rotate(-135deg);\n}\ndiv#fast-pay-page .center-member > div > span {\n    margin-right: 0.83333rem;\n    position: relative;\n    font-size: 0.80556rem;\n}\ndiv#fast-pay-page .center-member > div > span:nth-of-type(1):before {\n      content: "";\n      position: absolute;\n      width: 1.05556rem;\n      height: 0.91667rem;\n      top: 50%;\n      left: -1.38889rem;\n      margin-top: -0.41667rem;\n      background-size: 1.05556rem 0.91667rem;\n      background-image: url('+o(t("p29T"))+');\n      background-repeat: no-repeat;\n}\ndiv#fast-pay-page .center-member > div > span:nth-of-type(2):before {\n      content: "";\n      position: absolute;\n      width: 0.97222rem;\n      height: 0.94444rem;\n      top: 50%;\n      left: -1.33333rem;\n      margin-top: -0.44444rem;\n      background-size: 0.97222rem 0.94444rem;\n      background-image: url('+o(t("M3kK"))+');\n      background-repeat: no-repeat;\n}\ndiv#fast-pay-page .center-member > div > span:nth-of-type(3):before {\n      content: "";\n      position: absolute;\n      width: 1.58333rem;\n      height: 1.11111rem;\n      top: 50%;\n      left: -1.86111rem;\n      margin-top: -0.52778rem;\n      background-size: 1.58333rem 1.11111rem;\n      background-image: url('+o(t("ZzNS"))+');\n      background-repeat: no-repeat;\n}\ndiv#fast-pay-page .center-pay {\n    color: #4d4d4d;\n    padding-left: 1.66667rem;\n    padding-right: 1.05556rem;\n    height: 3.05556rem;\n    line-height: 3.05556rem;\n    font-size: 0.88889rem;\n    margin-bottom: 3.333rem;\n}\ndiv#fast-pay-page .center-pay > span {\n      font-size: 1.52778rem;\n      float: right;\n      margin-right: 0.13889rem;\n      color: #ff6666;\n      font-weight: 700;\n}\ndiv#fast-pay-page .bottom-wrap {\n    position: fixed;\n    bottom: 0;\n    height: 3.333rem;\n    left: 0;\n    right: 0;\n    background-color: #fff;\n    z-index: 10;\n    border-top: 0.02778rem solid #e0e0e0;\n}\ndiv#fast-pay-page .bottom-wrap > a {\n      display: block;\n      height: 2.444rem;\n      line-height: 2.444rem;\n      margin: .444rem .667rem 0;\n      background-color: #f66;\n      color: #fff;\n      font-size: 1.056rem;\n      text-align: center;\n      letter-spacing: 2px;\n      border-radius: 5px;\n}\ndiv#fast-pay-page .bottom-wrap > a.processing {\n        opacity: 0.4;\n        /*background: #ccc url("../assets/icons/common/loading.gif") no-repeat 15% 48%;*/\n}\ndiv#fast-pay-page .bottom-wrap > a.selected {\n        opacity: 0.4;\n}\ndiv#fast-pay-page .payment-method {\n    display: -webkit-box;\n    display: -moz-box;\n    -webkit-box-align: end;\n    -moz-box-align: end;\n}\n@supports (display: -moz-box) {\ndiv#fast-pay-page .payment-method {\n        display: -webkit-box;\n        display: -ms-flexbox;\n        display: flex;\n        -webkit-box-align: end;\n            -ms-flex-align: end;\n                align-items: flex-end;\n}\n}\ndiv#fast-pay-page .payment-method > div {\n      position: fixed;\n      bottom: 0;\n      background-color: #fff;\n}\ndiv#fast-pay-page .payment-method > div > div:nth-of-type(1) {\n        border-top: 0.02778rem solid #cccccc;\n        border-bottom: 0.02778rem solid #cccccc;\n}\ndiv#fast-pay-page .payment-method > div > div:nth-of-type(1) > .item-title {\n          font-size: 1rem;\n          color: #212121;\n          font-size: 0.94444rem;\n          padding: 0.27778rem 0.69444rem;\n          border-bottom: 0.02778rem solid #ccc;\n}\ndiv#fast-pay-page .payment-method > div > div:nth-of-type(1) > .item-method {\n          margin-left: 0.69444rem;\n}\ndiv#fast-pay-page .payment-method > div > div:nth-of-type(1) > .item-method > div {\n            color: #212121;\n            padding: 0.69444rem 0.55556rem 0.69444rem 2.77778rem;\n            position: relative;\n}\ndiv#fast-pay-page .payment-method > div > div:nth-of-type(1) > .item-method > div:nth-of-type(1) {\n              border-bottom: 0.02778rem solid #eeeeee;\n}\ndiv#fast-pay-page .payment-method > div > div:nth-of-type(1) > .item-method > div:nth-of-type(1):before {\n                content: "";\n                position: absolute;\n                width: 1.44444rem;\n                height: 1.27778rem;\n                top: 50%;\n                left: 0.8rem;\n                margin-top: -0.63889rem;\n                background-size: 1.44444rem 1.27778rem;\n                background-image: url('+o(t("p29T"))+');\n                background-repeat: no-repeat;\n}\ndiv#fast-pay-page .payment-method > div > div:nth-of-type(1) > .item-method > div:nth-of-type(2) {\n              border-bottom: 0.02778rem solid #eeeeee;\n}\ndiv#fast-pay-page .payment-method > div > div:nth-of-type(1) > .item-method > div:nth-of-type(2):before {\n                content: "";\n                position: absolute;\n                width: 1.25rem;\n                height: 1.22222rem;\n                top: 50%;\n                left: 0.8rem;\n                margin-top: -0.61111rem;\n                background-size: 1.25rem 1.22222rem;\n                background-image: url('+o(t("M3kK"))+');\n                background-repeat: no-repeat;\n}\ndiv#fast-pay-page .payment-method > div > div:nth-of-type(1) > .item-method > div:nth-of-type(3):before {\n              content: "";\n              position: absolute;\n              width: 1.58333rem;\n              height: 1.11111rem;\n              top: 50%;\n              left: 0.6rem;\n              margin-top: -0.52778rem;\n              background-size: 1.58333rem 1.11111rem;\n              background-image: url('+o(t("ZzNS"))+");\n              background-repeat: no-repeat;\n}\ndiv#fast-pay-page .payment-method > div > div:nth-of-type(1) > .item-method > div:nth-of-type(3) > span {\n              font-size: 0.86111rem;\n}\ndiv#fast-pay-page .payment-method > div > div:nth-of-type(1) > .item-method > div:nth-of-type(3) > span > span {\n                color: #ff6666;\n}\ndiv#fast-pay-page .payment-method > div > div:nth-of-type(1) > .item-method > div > div {\n              width: 1.028rem;\n              height: 1.028rem;\n              background-size: 1.028rem 1.028rem;\n              background-image: url("+o(t("Vpnv"))+");\n              background-repeat: no-repeat;\n              top: 50%;\n              margin-top: -0.514rem;\n              position: absolute;\n              right: 1.25rem;\n}\ndiv#fast-pay-page .payment-method > div > div:nth-of-type(1) > .item-method > div > div.selected {\n                background-size: 1.028rem 1.028rem;\n                background-image: url("+o(t("hk5Q"))+");\n                background-repeat: no-repeat;\n}\ndiv#fast-pay-page .payment-method > div > div:nth-of-type(2) {\n        height: 3.333rem;\n        left: 0;\n        right: 0;\n        background-color: #e0e0e0;\n        z-index: 10;\n        border-top: 0.02778rem solid #e0e0e0;\n}\ndiv#fast-pay-page .payment-method > div > div:nth-of-type(2) > a {\n          display: block;\n          width: 18.666rem;\n          height: 2.444rem;\n          line-height: 2.444rem;\n          margin: .444rem .667rem 0;\n          background-color: #f66;\n          color: #fff;\n          font-size: 1.056rem;\n          text-align: center;\n          letter-spacing: 2px;\n          border-radius: 5px;\n}\n",""])},HFh0:function(e,n,t){var o=t("+WE5");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);t("FIqI")("38603a36",o,!0,{})},ZwlP:function(e,n){e.exports="data:image/png;base64,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"},tnfE:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("3cXf"),i=t.n(o),a=t("vbKY"),r=t("TVG1"),s={data:function(){return{global:a.a.data,money:"",clubId:"",techId:"",techName:"",techNo:"",techHeader:"",paramData:null,payAuthCode:"",openId:"",mTop:0,topPage:!1,inProcessing:!1,selectCouponFlag:!1,currCodeType:"",discountMoney:"",memberDiscoumtMoney:"",consumeMoney:0,itemCoupon:null,order:null,isShowPay:!1,selectedIndex:0,currMoney:0,fastPaySwitch:!1,fastPayDiscount:!1,memberCouponSwitch:!1,fastPayCheck:!0,initHeight:0,memberInfo:{},availableMoney:0,discoumtMoney:0,availableActCount:0,orderId:""}},created:function(){var e=this,n=e.global,t=n.currPage.query,o=n.userAgent;return e.initHeight=n.winHeight,void 0==t.techId?(r.a.tipShow(n.visitError),e.$router.back()):a.a.checkAccess("fastPay")?(e.techId=t.techId,e.paramData=r.a.localStorage("fast-pay-param"),e.payAuthCode=t.code,void(o.isWX&&e.paramData&&e.payAuthCode?a.a.getOpenId({authCode:e.payAuthCode}).then(function(n){e.openId=n.openid,e.init()}):e.init())):e.$router.replace({name:"fastPayError",query:{info:encodeURIComponent("在线买单功能已关闭！")}})},computed:{getPayMent:function(){var e=0;if(e=this.itemCoupon&&this.fastPayDiscount?this.order?this.toDecimal2(this.money-this.order.downPayment-this.discountMoney):this.toDecimal2(this.money-this.discountMoney):this.order?this.toDecimal2(this.money-this.order.downPayment):this.money,this.currMoney=e,3==this.selectedIndex&&this.availableMoney&&this.memberInfo.discount<10){var n=this.toDecimal2(e*(this.memberInfo.discount/10));this.memberDiscoumtMoney=this.toDecimal2(e-n),e=this.toDecimal2(e-this.memberDiscoumtMoney)}return(e<=.001||!e)&&(e=0),(this.currMoney<=.001||!this.currMoney)&&(this.currMoney=0),this.memberDiscoumtMoney<=.001&&(this.memberDiscoumtMoney=0),e}},methods:{init:function(){var e=this,n=e.global;n.userAgent.isWX?e.selectedIndex=1:n.userAgent.isAliPay&&(e.selectedIndex=2),e.$http.get("../api/v2/club/fastpay/tech/get",{params:{techId:e.techId}}).then(function(t){if(200==(t=t.body).statusCode)(t=t.respData).nativeSystem&&e.$router.replace({name:"fastPayCashier",query:{techId:e.techId}}),e.clubId=t.clubId,e.techName=t.techName,e.techNo=t.techNo,e.techHeader=t.avatarUrl||n.defaultHeader,e.mTop=n.winHeight/(16*n.winScale)-24.4444,n.fullPage=!0,n.loading=!1,e.paramData&&(e.money=e.paramData,e.doConfirm());else{var o=t.msg||"未能获取到技师信息！";r.a.tipShow(o),e.$router.replace({name:"fastPayError",query:{info:encodeURIComponent(o)}})}});var t=r.a.sessionStorage("item_coupon"),o=r.a.sessionStorage("item_money");t&&(e.itemCoupon=JSON.parse(t),e.selectCouponFlag=!0,r.a.removeSessionStorage("item_coupon")),o&&(e.money=o,r.a.removeSessionStorage("item_money"));var i=r.a.sessionStorage("selected_index");i&&(e.selectedIndex=i,r.a.removeSessionStorage("selected_index")),e.$http.post("../api/v2/clubvisit/scan/paycode",{clubId:n.clubId,userId:n.userId,techId:e.techId}),e.getPayCouponsList(e.money),e.getPayMemberAccount(),e.onCalcMoney()},onCalcMoney:function(){if(this.itemCoupon)if("cash"==this.itemCoupon.couponType||"money"==this.itemCoupon.couponType){if(this.discountMoney=this.itemCoupon.actValue,this.money<this.itemCoupon.consumeMoney)return this.selectCouponFlag=!1,this.itemCoupon=null,r.a.removeSessionStorage("item_itemId"),r.a.tipShow("所选优惠券未达可用消费金额，请重新选择！")}else"discount"==this.itemCoupon.couponType?this.discountMoney=this.toDecimal2(this.money-this.money*(this.itemCoupon.actValue/1e3)):"service_item"==this.itemCoupon.couponType?this.discountMoney=this.itemCoupon.consumeMoney:"paid"==this.itemCoupon.couponType?this.discountMoney=this.itemCoupon.consumeMoney:"coupon"==this.itemCoupon.couponType&&(this.discountMoney=this.itemCoupon.consumeMoney-this.itemCoupon.actValue)},doClickPayCouponsList:function(){""!=this.techId&&this.availableActCount>0&&(r.a.sessionStorage("item_money",this.money),r.a.sessionStorage("item_coupon",i()(this.itemCoupon)),this.$router.push({name:"fastPayCouponsList",query:{techId:this.techId,money:this.money}}))},doCancel:function(){this.$router.push({name:"comment",query:{techId:this.techId,type:"tech",from:"fastPay"}})},doConfirm:function(){var e=this,n=e.global.userAgent,t=e.money,o="",i="",a="",s="";if(e.itemCoupon&&(o=e.itemCoupon.couponNo+","),e.order&&(i=e.order.orderNo),3==e.selectedIndex){if(e.memberInfo.amount/100<e.getPayMent)return r.a.tipShow("会员卡余额不足，请选择其他支付方式");if(e.currMoney>.001)a="../api/v2/user/fastpay/member/save",s="member";else if(a="../api/v2/wx/pay/fast_pay/save",!n.isWX&&!n.isAliPay)return r.a.tipShow("请在微信或者支付宝中打开！")}else if(a="../api/v2/wx/pay/fast_pay/save",!n.isWX&&!n.isAliPay)return r.a.tipShow("请在微信或者支付宝中打开！");return e.inProcessing?r.a.tipShow("支付中，请稍候..."):t?parseFloat(t)<.001?r.a.tipShow("买单金额不能为0！"):parseFloat(t)<5000.001?(e.inProcessing=!0,void e.$http.post(a,{amount:parseInt(1e3*e.currMoney)/10,consumeAmount:parseInt(1e3*t)/10,clubId:e.clubId,techId:e.techId,bizId:"",verifyCodes:o+i}).then(function(t){if((t=t.body).respData)if("member"==s)e.orderId=t.respData.bizId;else if(0==t.respData.payAmount)e.orderId=t.respData.bizId,e.afterPay(!0);else{var o=JSON.parse(t.respData);e.orderId=o.bizId}3==e.selectedIndex?200==t.statusCode?e.afterPay(!0):(e.inProcessing=!1,r.a.tipShow(t.msg||"支付失败！")):n.isWX?e.doInvokeWxPay(t):n.isAliPay?e.doInvokeAliPay(t):(e.inProcessing=!1,r.a.tipShow(t.msg||"支付失败！"))},function(){e.inProcessing=!1,r.a.tipShow("支付请求失败！")})):r.a.tipShow("单笔支付请不要超过5000元！"):r.a.tipShow("请输入消费金额！")},doInvokeWxPay:function(e){var n=this;if(200==e.statusCode){0==e.respData.payAmount&&n.afterPay(!0);var t=JSON.parse(e.respData);a.a.wxJsBridgeReady(function(){WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:t.appId,timeStamp:t.timeStamp+"",nonceStr:t.nonceStr,package:t.package,signType:t.signType,paySign:t.paySign},function(e){n.inProcessing=!1,e.err_msg&&e.err_msg.indexOf("ok")>=0?n.afterPay(!1):r.a.tipShow("未能成功支付！")})})}else 935801==e.statusCode?(r.a.localStorage("fast-pay-param",n.money),a.a.getOauthCode("9358","fast-pay","base")):(n.inProcessing=!1,r.a.tipShow(e.msg||"支付失败！"))},doInvokeAliPay:function(e){var n=this,t=n.global;if(200==e.statusCode){0==e.respData.payAmount&&n.afterPay(!0);var o=JSON.parse(e.respData);a.a.alipayJsBridgeReady(function(){AlipayJSBridge.call("tradePay",{tradeNO:o.tradeNO},function(e){n.inProcessing=!1,t.debugMode&&alert("支付宝支付结果："+i()(e)),"9000"==e.resultCode?n.afterPay(!1):"8000"==e.resultCode?r.a.tipShow("正在处理中！"):"4000"==e.resultCode?r.a.tipShow("支付失败！"):"6001"==e.resultCode||"99"==e.resultCode?r.a.tipShow("您取消了支付！"):"6002"==e.resultCode&&r.a.tipShow("网络连接出错！")})})}else n.inProcessing=!1,r.a.tipShow(e.msg||"支付失败！")},afterPay:function(e){this.$http.post("../api/v1/scan/code/stat",{clubId:this.clubId,qrcodeType:"tech_qrcode",statType:"fast_paid",techId:this.techId}),e?(this.inProcessing=!1,r.a.tipShow("提交成功，请等待会所确认！")):r.a.tipShow("支付成功！"),this.getPrize()},getPrize:function(){var e=this;e.$http.get("../api/v2/user/fastpay/package/received",{params:{orderId:e.orderId}}).then(function(n){200==(n=n.body).statusCode&&(n.respData?e.$router.push({name:"fastPaySuccess",query:{orderId:e.orderId,techId:e.techId}}):e.$router.push({name:"home"}))},function(){r.a.tipShow("请求失败！")})},onFocusMoneyInput:function(){this.topPage=!0,this.mTop+=3},onBlurMoneyInput:function(){this.topPage=!1,this.mTop-=3},onInputMoney:function(){var e=this.money;if(1==e.length)/\D/.test(e)&&(e="");else{var n=0;e=(e=e.replace(/[^\d.]/g,"")).replace(/\./g,function(){return 0==n?(n=arguments[1],"."):""}),n>0&&(e=e.substring(0,n+3))}e&&(e=e.substr(0,7)),this.money=e,this.onCalcMoney(),this.getPayCouponsList(this.money)},getPayCouponsList:function(e){var n=this;n.$http.get("../api/v2/user/fastpay/discount/info",{params:{consumeAmount:parseInt(1e3*e)/10,clubId:n.global.clubId}}).then(function(e){200==(e=e.body).statusCode&&(e=e.respData,n.order=e.order,n.fastPayCheck&&(n.fastPayDiscount=e.fastPayDiscount),n.availableActCount=e.availableActCount)})},getMemberPaySwitch:function(){var e=this;e.$http.get("../api/v2/user/fastpay/member/coupon/switch",{params:{clubId:e.global.clubId}}).then(function(n){200==(n=n.body).statusCode&&(e.fastPayDiscount=n.respData,e.fastPayCheck=n.respData)})},getPayMemberAccount:function(){var e=this;e.$http.get("../api/v2/financial/club/account",{params:{clubId:e.global.clubId}}).then(function(n){200==(n=n.body).statusCode&&(n=n.respData.info,e.memberInfo=n,n&&(e.availableMoney=(n.amount/100).toFixed(2),n.discount/100>=10?e.memberInfo.isVip=!1:e.memberInfo.isVip=!0,e.memberInfo.discount=(n.discount/100).toFixed(2).replace(/0*$/g,"").replace(/\.$/g,""),e.getMemberPaySwitch()))})},doClickPaymentMethod:function(){this.isShowPay=!0},doSelectPay:function(e){this.selectedIndex=e},doClickPayMethod:function(){if(3==this.selectedIndex){if(this.memberInfo.amount/100<this.getPayMent)return r.a.tipShow("会员卡余额不足，请选择其他支付方式");this.getMemberPaySwitch(),this.fastPayDiscount||(this.itemCoupon=null,r.a.removeSessionStorage("item_itemId"))}else this.fastPayCheck=!0,this.getPayCouponsList(this.money);this.isShowPay=!1},toDecimal2:function(e){if(e){var n=e.toFixed(3).toString();return n=n.substr(0,n.length-1)}return e}},beforeDestroy:function(){r.a.sessionStorage("selected_index",this.selectedIndex)}},d={render:function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"page",style:{height:e.initHeight+"px"},attrs:{id:"fast-pay-page"}},[t("div",{staticClass:"top-wrap",class:{act:e.topPage}},[t("div",{staticClass:"header",style:{"background-image":"url("+e.techHeader+")"}}),e._v(" "),t("div",{staticClass:"name"},[e._v(e._s(e.techName)),e.techNo?t("span",[e._v(e._s(e.techNo))]):e._e()])]),e._v(" "),t("div",{staticClass:"center-wrap"},[e._m(0),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.money,expression:"money"}],attrs:{type:"number",maxlength:"5",placeholder:"请输入消费总金额"},domProps:{value:e.money},on:{input:[function(n){n.target.composing||(e.money=n.target.value)},function(n){e.onInputMoney()}],focus:function(n){e.onFocusMoneyInput()},blur:function(n){e.onBlurMoneyInput()}}})]),e._v(" "),t("div",{staticClass:"item-content"},[e.order?t("div",{staticClass:"center-discount item"},[t("div",[e._v("预约抵扣金额"),t("span",[e._v("-￥"+e._s(e.order.downPayment))])])]):e._e(),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.fastPayDiscount&&!e.global.userAgent.isAliPay,expression:"fastPayDiscount && !global.userAgent.isAliPay"}],staticClass:"center-discount1 item",class:{active:!e.order}},[t("div",{on:{click:function(n){e.doClickPayCouponsList()}}},[e._v("优惠券\n                "),t("span",{directives:[{name:"show",rawName:"v-show",value:!e.itemCoupon,expression:"!itemCoupon"}],class:{active:0==e.availableActCount}},[e._v(e._s(e.availableActCount)+" 张可用")]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.itemCoupon,expression:"itemCoupon"}]},[e._v("优惠金额 ￥ "+e._s(e.discountMoney))])])]),e._v(" "),e.memberInfo?t("div",{staticClass:"center-member item",on:{click:function(n){e.doClickPaymentMethod()}}},[t("div",[e._v("付款方式\n                "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.global.userAgent.isWX&&1==e.selectedIndex,expression:"global.userAgent.isWX && selectedIndex==1"}]},[e._v("微信支付")]),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.global.userAgent.isAliPay&&2==e.selectedIndex,expression:"global.userAgent.isAliPay && selectedIndex==2"}]},[e._v("支付宝支付")]),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:3==e.selectedIndex,expression:"selectedIndex==3"}]},[e._v("会员卡支付")])])]):e._e(),e._v(" "),e.memberInfo&&e.memberInfo.isVip&&3==e.selectedIndex?t("div",{staticClass:"center-discount item"},[t("div",[e._v("会员优惠金额"),t("span",[e._v("-￥"+e._s(e.memberDiscoumtMoney)+"（"+e._s(e.memberInfo.discount)+"折）")])])]):e._e()]),e._v(" "),t("div",{staticClass:"center-pay"},[e._v("应付金额\n        "),t("span",[e._v("￥"+e._s(e.getPayMent))])]),e._v(" "),t("div",{staticClass:"bottom-wrap",style:{"margin-top":e.mTop+"rem"}},[t("a",{class:[{processing:e.inProcessing},{selected:""==e.money},{disabled:!0}],on:{click:function(n){e.doConfirm()}}},[e._v(e._s(e.inProcessing?"支付中...":"支付"))])]),e._v(" "),e.memberInfo?t("div",{staticClass:"pop-modal payment-method",class:{active:e.isShowPay}},[t("div",[t("div",[t("div",{staticClass:"item-title"},[e._v("请选择支付方式")]),e._v(" "),t("div",{staticClass:"item-method"},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.global.userAgent.isWX,expression:"global.userAgent.isWX"}],on:{click:function(n){e.doSelectPay(1)}}},[e._v("微信支付 "),t("div",{class:{selected:1==e.selectedIndex}})]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.global.userAgent.isAliPay,expression:"global.userAgent.isAliPay"}],on:{click:function(n){e.doSelectPay(2)}}},[e._v("支付宝支付 "),t("div",{class:{selected:2==e.selectedIndex}})]),e._v(" "),t("div",{on:{click:function(n){e.doSelectPay(3)}}},[e._v("会员卡 "),t("span",[e._v("(余额："),t("span",[e._v(e._s(e.availableMoney))]),e._v("元)")]),e._v(" "),t("div",{class:{selected:3==e.selectedIndex}})])])]),e._v(" "),t("div",{on:{click:function(n){e.doClickPayMethod()}}},[t("a",[e._v("确定")])])])]):e._e()])},staticRenderFns:[function(){var e=this.$createElement,n=this._self._c||e;return n("div",[n("span",[this._v("￥")]),this._v(" 消费金额：")])}]};var m=t("Z0/y")(s,d,!1,function(e){t("HFh0")},null,null);n.default=m.exports}});