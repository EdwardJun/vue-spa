webpackJsonp([83],{MTUB:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("vbKY"),n=i("TVG1"),o={filters:{CodeFormatter:i("7Nka").a},data:function(){return{global:a.a.data,clubId:"",dataList:[],currPage:0,pageSize:10,listEle:null,clubDataSet:{},showDataLoadTip:!1,showFinishLoadTip:!1,isDataAddEnd:!1,isAddData:!1,noData:!0,statusObj:{0:"未使用",1:"已使用",2:"过期",3:"未中奖"}}},created:function(){var e=this.global,t=e.currPage.query;this.clubId=t.clubId||e.clubId||"",this.queryData(1),document.title="抽奖记录"},methods:{doClickRecordDetail:function(e){var t=e.prizeType;/(1|2|3)/.test(t)?e.userActId?this.$router.push({name:"couponDetail",query:{userActId:e.userActId,couponType:3==t?"service_item":"ordinary"}}):this.$router.push({name:"luckyDetail",query:{recordId:e.recordId,actId:e.activityId,cardId:e.prizeContent,prizeType:t}}):n.a.tipShow("您中了："+e.prizeName)},doHandlerListScroll:function(){var e=this.$refs.listEle;!this.isDataAddEnd&&e.scrollTop+1.4*e.clientHeight>e.scrollHeight&&this.queryData()},queryData:function(e){var t=this,i=t.global;t.isAddData||(t.isAddData=!0,e=e||t.currPage+1,t.showDataLoadTip=!0,t.showFinishLoadTip=!1,t.isDataAddEnd=!1,t.$http.get("../api/v2/user/luckyWheel/userPrizeRecordList",{params:{clubId:t.clubId,page:e,pageSize:t.pageSize}}).then(function(a){if(200==(a=a.body).statusCode){var o,r,l;a=a.respData.recordList||[];for(var s=0;s<a.length;s++)o=a[s],void 0==(r=t.clubDataSet[o.clubId])?(l={clubId:o.clubId,clubName:o.clubName,clubLogo:o.clubLogo||i.defaultClubLogo,list:[]},t.clubDataSet[o.clubId]=t.dataList.length,t.dataList.push(l)):l=t.dataList[r],l.list.push(o);a.length<t.pageSize&&(t.isDataAddEnd=!0,t.showFinishLoadTip=!0),t.currPage=e,t.isAddData=!1,t.showDataLoadTip=!1,a.length>0&&(t.noData=!1),1==e&&(i.loading=!1)}else n.a.tipShow(a.msg||i.loadError)},function(){n.a.tipShow(i.loadError)}))}}},r={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"page",style:{height:e.global.winHeight+"px"},attrs:{id:"lucky-page"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:!e.noData,expression:"!noData"}],ref:"listEle",staticClass:"all-list",staticStyle:{height:"100%"},on:{scroll:function(t){e.doHandlerListScroll()}}},[e._l(e.dataList,function(t){return i("div",[i("router-link",{staticClass:"item-title",attrs:{tag:"div",to:{path:"/"+t.clubId+"/home"}}},[i("div",{style:{"background-image":"url("+t.clubLogo+")"}}),e._v(e._s(t.clubName))]),e._v(" "),i("ul",{staticClass:"item-list"},e._l(t.list,function(t){return i("li",{on:{click:function(i){e.doClickRecordDetail(t)}}},[i("div",[e._v(e._s(t.prizeName)),i("span",{directives:[{name:"show",rawName:"v-show",value:0!=t.prizeType,expression:"record.prizeType!=0"}],class:{active:1!=t.status}},[e._v(e._s(e.statusObj[t.status]||"-"))])]),e._v(" "),i("div",[i("span",{directives:[{name:"show",rawName:"v-show",value:t.verifyCode,expression:"record.verifyCode"}]},[e._v("兑换码：")]),e._v(e._s(e._f("CodeFormatter")(t.verifyCode))+" "),i("span",[e._v(e._s(t.createTime.substr(5,11)))])])])}))],1)}),e._v(" "),i("div",{staticClass:"data-load-tip",class:{none:!e.showDataLoadTip}},[i("div",[e._v("加载数据")])]),e._v(" "),i("div",{staticClass:"finish-load-tip",class:{none:!e.showFinishLoadTip}},[i("div",[e._v("已经加载全部数据")])])],2),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.noData,expression:"noData"}],staticClass:"nullData"},[i("div",{directives:[{name:"show",rawName:"v-show",value:!e.global.loading,expression:"!global.loading"}]}),e._v(" "),i("div",[e._v(e._s(e.global.loading?"数据加载中...":"暂无内容..."))])])])},staticRenderFns:[]};var l=i("Z0/y")(o,r,!1,function(e){i("z3kj")},null,null);t.default=l.exports},z3kj:function(e,t,i){var a=i("ziZq");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i("FIqI")("893b3d7a",a,!0,{})},ziZq:function(e,t,i){(e.exports=i("XLS9")(!1)).push([e.i,'\n.clearfix {\n  display: inline-block;\n}\n.clearfix:after {\n    display: block;\n    content: ".";\n    height: 0;\n    line-height: 0;\n    clear: both;\n    visibility: hidden;\n}\n@media (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5) {\n.border-1px::after {\n    -webkit-transform: scaleY(0.7);\n    transform: scaleY(0.7);\n}\n}\n@media (-webkit-min-device-pixel-ratio: 2), (min-device-pixel-ratio: 2) {\n.border-1px::after {\n    -webkit-transform: scaleY(0.5);\n    transform: scaleY(0.5);\n}\n}\ndiv#lucky-page .all-list {\n  overflow-y: auto;\n}\ndiv#lucky-page .all-list > div {\n    width: 20rem;\n}\ndiv#lucky-page div.item-title {\n  position: relative;\n  height: 1.861rem;\n  line-height: 1.861rem;\n  padding-left: 2.556rem;\n  font-size: 0.889rem;\n  color: #616161;\n  background-color: #f5f5f5;\n}\ndiv#lucky-page div.item-title > div {\n    position: absolute;\n    width: 1.389rem;\n    height: 1.389rem;\n    left: 0.667rem;\n    top: 50%;\n    margin-top: -0.6945rem;\n    border-radius: 50%;\n    border: 1px solid #ccc;\n    background-size: 1.389rem 1.389rem;\n    background-repeat: no-repeat;\n}\ndiv#lucky-page div.item-title:after {\n    content: "";\n    position: absolute;\n    width: 0.45rem;\n    height: 0.45rem;\n    right: 0.5rem;\n    top: 50%;\n    margin-top: -0.225rem;\n    border-left: 0.1rem solid #9c9c9c;\n    border-bottom: 0.1rem solid #9c9c9c;\n    -webkit-transform: rotate(-135deg);\n    transform: rotate(-135deg);\n}\ndiv#lucky-page ul.item-list li {\n  position: relative;\n  padding: 0.75rem 0.65rem;\n  background: #fff;\n  border-bottom: 1px solid #f5f5f5;\n}\ndiv#lucky-page ul.item-list li > div:nth-of-type(1) {\n    font-size: 0.778rem;\n    color: #4d4d4d;\n    line-height: 1.4;\n    margin-bottom: 0.55rem;\n}\ndiv#lucky-page ul.item-list li > div:nth-of-type(1) > span {\n      float: right;\n}\ndiv#lucky-page ul.item-list li > div:nth-of-type(1) > span.active {\n        color: #f66;\n}\ndiv#lucky-page ul.item-list li > div:nth-of-type(2) {\n    line-height: 1.4;\n    color: #b0b0b0;\n    font-size: 0.778rem;\n}\ndiv#lucky-page ul.item-list li > div:nth-of-type(2) > span:nth-of-type(2) {\n      float: right;\n}\n',""])}});