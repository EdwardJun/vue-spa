webpackJsonp([66],{VjoP:function(i,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var e=a("wy9b"),n=a.n(e),l=a("vbKY"),d=a("TVG1"),s={data:function(){return{global:l.a.data}},props:{limitData:{type:Object,required:!0}},methods:{doViewDetail:function(){var i=this.limitData;this.$router.push({name:"couponDetail",query:{userActId:i.userActId,couponType:i.couponType}})}},computed:{startTime:function(){return this.limitData.useStartDate.split(" ")[0].replace(/-/g,"-")},endTime:function(){return""==this.limitData.useEndDate?"长期有效":this.limitData.useEndDate.split(" ")[0].replace(/-/g,"-")}}},r={render:function(){var i=this,t=i.$createElement,a=i._self._c||t;return i.limitData?a("div",{staticClass:"item",class:{expire:i.limitData.isExpire},on:{click:function(t){i.doViewDetail()}}},[a("div",{staticClass:"item-img",style:{"background-image":"url("+(i.limitData.actLogoUrl||i.global.defaultServiceItemImgUrl)+")"}}),i._v(" "),a("div",[a("div",[a("span",[i._v("项目名称 : ")]),i._v(" "),a("span",[i._v(i._s(i.limitData.actSubTitle))])]),i._v(" "),a("div",[a("span",[i._v("项目价格 : ")]),i._v(" "),a("span",[i._v(i._s(i.limitData.consumeMoneyFen/100)+"元")])]),i._v(" "),a("div",[a("span",[i._v("项目时长 : ")]),i._v(" "),a("span",[i._v(i._s(i.limitData.duration))])]),i._v(" "),a("div",[a("span",[i._v("有效期 : ")]),i._v(" "),a("span",[i._v(i._s(i.startTime)+" 至 "+i._s(i.endTime))])])])]):i._e()},staticRenderFns:[]},o={components:{"limit-item":a("Z0/y")(s,r,!1,null,null,null).exports},data:function(){return{global:l.a.data,tabArr:["未使用","已使用","不可用"],currTab:0,isQueryAll:!0,pageSize:10,dataArr:[]}},mounted:function(){var i=this,t=i.global,a=t.currPage.query,e=d.a.sessionStorage,n=d.a.removeSessionStorage,l=[];i.isQueryAll="club"!=t.pageMode||"true"==a.all,i.currTab=a.tab||0;for(var s=0;s<3;s++)l.push({dataList:[],dataIndex:{},currPage:0,showDataLoadTip:!1,showFinishLoadTip:!1,isDataAddEnd:!1,isAddData:!1,hasLoadData:!1});i.dataArr=l;var r=e("limit_data"),o=e("limit_tab");if(o==i.currTab&&r){var c=i.dataArr[o];c.dataList=JSON.parse(r),c.currPage=e("limit_page")-0,c.dataIndex=JSON.parse(e("limit_set")),c.isDataAddEnd="true"==e("limit_end"),c.showFinishLoadTip="true"==e("limit_finish"),c.hasLoadData=!0;var m=e("limit_top");i.$nextTick(function(){var a=i.$refs["listEle"+o][0];setTimeout(function(){a.scrollTop=m,t.loading=!1},100)})}else i.queryRecord(),t.loading=!1;r&&(n("limit_data"),n("limit_tab"),n("limit_page"),n("limit_set"),n("limit_end"),n("limit_finish"),n("limit_top")),document.title="限时抢购"},methods:{queryRecord:function(i,t){var a=this,e=a.global;i=(void 0!=i?i:a.currTab)-0;var l=a.dataArr[i];l.isAddData||(l.isAddData=!0,t=t||l.currPage+1,l.showDataLoadTip=!0,l.showFinishLoadTip=!1,l.isDataAddEnd=!1,a.$http.get("../api/v2/club/user_get_coupons",{params:{page:t,pageSize:a.pageSize,businessType:"paid_service_item",clubId:a.isQueryAll?"":e.clubId,couponStatus:i+1}}).then(function(s){(s=s.body)?(s="200"!=s.statusCode?[]:s.respData,l.hasLoadData||(l.hasLoadData=!0),a.doHandlerData(s,l),s.length<a.pageSize&&(l.isDataAddEnd=!0,1==t&&0==s.length||(l.showFinishLoadTip=!0)),l.currPage=t,l.isAddData=!1,l.showDataLoadTip=!1,n.a.set(a.dataArr,i,l)):d.a.tipShow(e.loadError)},function(){d.a.tipShow(e.loadError)}))},doHandlerData:function(i,t){for(var a=void 0,e=void 0,n=void 0,l=void 0,d=void 0,s=0;s<i.length;s++)e=(a=i[s]).useType,n=a.useTypeName,void 0==(l=t.dataIndex[a.clubId])&&(l=t.dataList.length,t.dataIndex[a.clubId]=l,t.dataList.push({clubName:a.clubName,clubId:a.clubId,listObj:{},isClosed:!1})),(d=t.dataList[l].listObj)[e]||(d[e]={couponTypeName:n,list:[]}),d[e].list.push(a)},doHandlerListScroll:function(){this.dataArr[this.currTab].isDataAddEnd||this.queryRecord()},doSwitchTab:function(i){this.currTab!=i&&(this.dataArr[i].hasLoadData||this.queryRecord(i,1),this.currTab=i,this.$router.replace({name:"limit",query:{tab:i,all:this.isQueryAll}}))}}},c={render:function(){var i=this,t=i.$createElement,a=i._self._c||t;return a("div",{staticClass:"page",attrs:{id:"limit-page"}},[a("div",{staticClass:"tab-list"},i._l(i.tabArr,function(t,e){return a("div",{key:e,class:{active:i.currTab==e},on:{click:function(t){i.doSwitchTab(e)}}},[i._v(i._s(t))])})),i._v(" "),i._l(i.dataArr,function(t,e){return a("div",{directives:[{name:"show",rawName:"v-show",value:i.currTab==e,expression:"currTab==dataIndex"}],key:e,ref:"listEle"+e,refInFor:!0,staticClass:"limit list",style:{height:i.global.winHeight-2.3*i.global.winScale*16+"px"},on:{scroll:function(t){i.doHandlerListScroll()}}},[i._l(t.dataList,function(t,e){return a("div",{key:e,staticClass:"list-item"},[a("router-link",{staticClass:"item-title",attrs:{tag:"div",to:{path:"/"+t.clubId+"/home"}}},[i._v(i._s(t.clubName)),a("span")]),i._v(" "),a("div",{staticClass:"item-limit"},[i._l(t.listObj,function(t,e){return i._l(t.list,function(i,t){return a("limit-item",{key:t,attrs:{"limit-data":i}})})})],2)],1)}),i._v(" "),a("div",{staticClass:"data-load-tip",class:{none:!t.showDataLoadTip}},[a("div",[i._v("加载数据")])]),i._v(" "),a("div",{staticClass:"finish-load-tip",class:{none:!t.showFinishLoadTip}},[a("div",[i._v("已经加载全部数据")])]),i._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.showDataLoadTip&&!t.showFinishLoadTip&&!t.isAddData&&t.dataList.length>0,expression:"!dataObj.showDataLoadTip && !dataObj.showFinishLoadTip && !dataObj.isAddData && dataObj.dataList.length>0"}],staticClass:"load-more",on:{click:function(t){i.queryRecord()}}},[i._v("加载更多")]),i._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.dataList.length&&!t.isAddData,expression:"dataObj.dataList.length==0 && !dataObj.isAddData"}],staticClass:"nullData",class:t.dataList.length},[a("div",{directives:[{name:"show",rawName:"v-show",value:!i.global.loading,expression:"!global.loading"}]}),i._v(" "),a("div",[i._v(i._s(i.global.loading?"数据加载中...":"暂无内容..."))])])],2)})],2)},staticRenderFns:[]};var m=a("Z0/y")(o,c,!1,function(i){a("awNe")},null,null);t.default=m.exports},YJjZ:function(i,t,a){var e=a("JLGU");(i.exports=a("XLS9")(!1)).push([i.i,'\n.clearfix {\n  display: inline-block;\n}\n.clearfix:after {\n    display: block;\n    content: ".";\n    height: 0;\n    line-height: 0;\n    clear: both;\n    visibility: hidden;\n}\n@media (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5) {\n.border-1px::after {\n    -webkit-transform: scaleY(0.7);\n    transform: scaleY(0.7);\n}\n}\n@media (-webkit-min-device-pixel-ratio: 2), (min-device-pixel-ratio: 2) {\n.border-1px::after {\n    -webkit-transform: scaleY(0.5);\n    transform: scaleY(0.5);\n}\n}\ndiv#limit-page {\n  height: 100%;\n}\ndiv#limit-page .tab-list {\n    background: #fafafa;\n    padding: 0.30556rem 0;\n    height: 1.77778rem;\n    -webkit-box-sizing: content-box;\n            box-sizing: content-box;\n}\ndiv#limit-page .tab-list > div {\n      float: left;\n      -webkit-box-sizing: border-box;\n              box-sizing: border-box;\n      width: 33.3%;\n      text-align: center;\n      height: 100%;\n      line-height: 1.77778rem;\n      color: #616161;\n      font-size: 0.77778rem;\n      border-right: 1px solid #e0e0e0;\n}\ndiv#limit-page .tab-list > div:last-child {\n        border-right-width: 0;\n}\ndiv#limit-page .tab-list > div.active {\n        color: #f66;\n}\ndiv#limit-page div.limit {\n    overflow-y: auto;\n}\ndiv#limit-page div.limit > div.list-item {\n      padding: 0 0.63889rem;\n      background-color: #fff;\n      margin-top: 0.11111rem;\n      font-size: 0.77778rem;\n}\ndiv#limit-page div.limit > div.list-item div.item-title {\n        position: relative;\n        height: 1.66667rem;\n        color: #4c4c4c;\n}\ndiv#limit-page div.limit > div.list-item div.item-title > span {\n          position: absolute;\n          width: 0.61111rem;\n          height: 0.58333rem;\n          right: 0;\n          top: 0.47222rem;\n          background-size: 0.61111rem 0.58333rem;\n          background-repeat: no-repeat;\n          background-image: url('+e(a("xHHt"))+");\n}\ndiv#limit-page div.limit > div.list-item > div.item-limit > div.item {\n        height: 4.6rem;\n        margin-top: 0.27778rem;\n        border-bottom: 1px solid #f0f0f0;\n        padding-top: 0.27778rem;\n}\ndiv#limit-page div.limit > div.list-item > div.item-limit > div.item > div {\n          float: left;\n}\ndiv#limit-page div.limit > div.list-item > div.item-limit > div.item > div:nth-of-type(1) {\n            width: 3.80556rem;\n            height: 3.83333rem;\n            background-size: 3.80556rem 3.83333rem;\n            background-repeat: no-repeat;\n            border-radius: 0.27778rem;\n}\ndiv#limit-page div.limit > div.list-item > div.item-limit > div.item > div:nth-of-type(2) {\n            color: #212121;\n            line-height: 1.27778rem;\n            margin-top: -0.22222rem;\n            margin-left: 0.38889rem;\n}\ndiv#limit-page div.limit > div.list-item > div.item-limit > div.item > div:nth-of-type(2) > div {\n              line-height: 1.4;\n              overflow: hidden;\n              text-overflow: ellipsis;\n              white-space: nowrap;\n              max-width: 14rem;\n}\ndiv#limit-page div.limit > div.list-item > div.item-limit > div.item > div:nth-of-type(2) > div span {\n              font-size: 0.66667rem;\n}\ndiv#limit-page div.limit > div.list-item > div.item-limit > div.item > div:nth-of-type(2) > div span:nth-of-type(1) {\n                color: #4c4c4c;\n                display: inline-block;\n}\n",""])},awNe:function(i,t,a){var e=a("YJjZ");"string"==typeof e&&(e=[[i.i,e,""]]),e.locals&&(i.exports=e.locals);a("FIqI")("09232eba",e,!0,{})},xHHt:function(i,t){i.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAUCAYAAABiS3YzAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NThBMzY1RDI0OTkyMTFFN0FEQzZGOUQyRjA2Q0E3OEEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NThBMzY1RDM0OTkyMTFFN0FEQzZGOUQyRjA2Q0E3OEEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo1ODZGMzVCODQ5OTIxMUU3QURDNkY5RDJGMDZDQTc4QSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo1ODZGMzVCOTQ5OTIxMUU3QURDNkY5RDJGMDZDQTc4QSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pt/vZKsAAAD5SURBVHjarJMxCsJAEEU3InoCz2BrJa4aW7GJraVewsrOykuonbURRLCwiGY7QY9hK2gZ/8IUKbJhhnXg83c28DIzmagsy1SR0jStQwvX8zJVlDvu0NIYc1TCKIPWyEcA7/8FbUI3OkcAx1xoYGfgCoDsS6+QpquD1jryghK4CrtAfbqKAR57QQkcwBKox6mYBZWOgg2VjEIEzcF3sAmlCcAD7kqVxSl3DiV76qpyBttS+oZavjOdwjaUfqAuWn/4fH1b4ZrSL9QB8Omzp3mgbTksqlDyR7Falvz77JZZUADnsBW3ZS70BWtwW+buaRs6Q0MJ0MZPgAEAcKfA9elcWwQAAAAASUVORK5CYII="}});