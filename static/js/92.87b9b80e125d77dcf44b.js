webpackJsonp([92],{RoPw:function(e,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var t=n("vbKY"),o=n("TVG1"),a=n("wKTW"),d=n("7Nka"),r=(n("4IlM"),{components:{Share:n("Eg0l").a},filters:{codeFormatter:d.a},data:function(){return{global:t.a.data,userActId:"",userAct:{},couponQrCodeUrl:"",couponNo:"",isPaidServiceItem:!1,couponType:"",isMoneyCoupon:!1,isRepeatCoupn:!1,phoneNumsOfGet:[],phoneNumsOfUse:[],couponName:"",useServiceItem:"",shareStatus:"",useDefaultShareConfig:!1,shareUrl:""}},created:function(){var e=this,i=e.global,n=i.currPage.query;if(e.userActId=n.userActId,e.couponType=n.couponType,e.couponNo=n.couponNo,e.isPaidServiceItem="paid_service_item"==n.couponType||"service_item"==n.couponType,!e.userActId)return o.a.tipShow(i.visitError),e.$router.back();document.title="优惠券详情",e.$http.get(e.isPaidServiceItem?"../api/v2/club/user/service_item_coupon/view":"../api/v2/club/userredpacket/{suaId}",{params:{userType:"user",id:e.userActId,suaId:e.userActId,couponNo:e.couponNo}}).then(function(n){if(200==(n=n.body).statusCode){var t;if(n=n.respData,e.isPaidServiceItem){if((t=n.userAct).clubName=n.clubName,"credits"==t.paidType?t.actValueStr=t.actValue+" 积分":"give"==t.paidType?t.actValueStr="奖品赠送":t.actValueStr=t.actValue+" 元",t.useEndDate){var a=+new Date(t.useEndDate.split(" ")[0].replace(/-/g,"/")+" 23:59:59")-+new Date,d=Math.floor,r="";d(a/864e5)>0?(a=d(a/864e5),r="天"):d(a/36e5)>0?(a=d(a/36e5),r="小时"):(a=d(a/6e4),r="分钟"),t.expiredTime=a+r}if("paid_service_item"==e.couponType){t.useDateStr=t.useStartDate.split(" ")[0]+" - "+t.useEndDate.split(" ")[0];var s="";t.useDay?(7==t.useDay.match(/(\d)/g).length&&(t.useDay="170"),s=(t.useDay||"").replace(/(\d)/g,function(){return["周日","周一","周二","周三","周四","周五","周六"," 至 "][arguments[1]]})+" "+(t.startTime?t.startTime.replace(/:00$/g,"")+":00 - "+t.endTime.replace(/:00$/g,"")+":00":"")):t.usePeriod&&(s=t.usePeriod),t.usePeriodStr=s}else t.actContentStr=t.actContent.replace(/<!--.*?-->/g,"");e.isPaidServiceItem&&("paid_service_item"!=t.useType&&(t.discountPrice="网店价："+t.actValue+"元/"+t.duration+t.durationUnit),t.priceStr=t.price+"元/"+t.duration+t.durationUnit,t.pricePlus&&(t.pricePlusStr=t.pricePlus+"元/"+t.durationPlus+t.durationUnitPlus)),e.userAct=t}else{if(t=n.userAct,e.isMoneyCoupon="money"==t.useType,e.isRepeatCoupn="redpack"==t.couponType,e.couponName=e.isMoneyCoupon?t.actValue+"元"+t.useTypeName:t.actTitle,("1"!=t.couponStatus&&"2"!=t.couponStatus||!n.shareUrl)&&(e.shareStatus="unwork"),e.useDefaultShareConfig=!(i.userAgent.isWX&&""==e.shareStatus),n.items=n.items||[],n.items.length>0){for(var p=n.items,v=[],c=0;c<p.length;c++)v.push(p[c].name);e.useServiceItem=v.join("，")}e.isRepeatCoupn&&!e.useDefaultShareConfig&&e.doHandlerShareConfig(n),e.userAct=t,e.phoneNumsOfGet=n.phoneNums_get||[],e.phoneNumsOfUse=n.phoneNums_use||[],e.shareUrl=n.shareUrl}e.couponQrCodeUrl=t.couponQrCodeUrl||t.qrCodeUrl||e.getQrCodeImageUrl(),i.loading=!1}else o.a.tipShow(n.msg||i.loadError),e.$router.back()})},methods:{getQrCodeImageUrl:function(){var e=this.userAct;return jrQrcode.getQrBase64(e.couponNo,{padding:0})},doClickShareBtn:function(){""==this.shareStatus?a.a.$emit("change-share-pop",!0):o.a.tipShow("活动已过期！不可分享！")},doHandlerShareConfig:function(e){var i=this;t.a.shareConfig({title:e.clubName+"-"+(i.isMoneyCoupon?e.userAct.actValue+"元"+e.userAct.useTypeName:e.userAct.actTitle),desc:i.isRepeatCoupn?"此券可在"+e.clubName+"使用，分享给朋友获得更多优惠。":"送你一张优惠券，带上它，让你的身体爽一把。",link:e.shareUrl,imgUrl:e.imageUrl,success:function(){i.$http.get("../api/v2/club/redpacket/share",{params:{userActId:i.userActId}}).then(function(e){200==(e=e.body).statusCode&&a.a.$emit("change-share-pop",!1)})},cancel:function(){},fail:function(){o.a.tipShow("分享失败！请稍后再试！")}})}}}),s={render:function(){var e=this,i=e.$createElement,n=e._self._c||i;return n("div",{staticClass:"page",attrs:{id:"coupon-detail-page"}},[n("div",{staticClass:"club-name"},[e._v(e._s(e.userAct.clubName))]),e._v(" "),n("div",{staticClass:"coupon-info"},[n("div",[e._v(e._s(e.isPaidServiceItem?e.userAct.couponTypeName:e.userAct.useTypeName))]),e._v(" "),n("div",[e._v(e._s(e.isMoneyCoupon?e.userAct.actValue+"元":e.userAct.actTitle))]),e._v(" "),e.isPaidServiceItem?[n("div",[e._v(e._s("give"==e.userAct.paidType?"卡券来源":"购买金额")+"："),n("span",[e._v(e._s(e.userAct.actValueStr))])]),e._v(" "),n("div",[e._v("有效期："),n("span",[e._v(e._s(e.userAct.couponPeriod))])]),e._v(" "),n("div",[e._v("购买时间："),n("span",[e._v(e._s(e.userAct.getDate))])]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.userAct.useEndDate&&"settled"!=e.userAct.status,expression:"userAct.useEndDate && userAct.status!='settled'"}]},[e._v("剩余 "),n("span",[e._v(e._s(e.userAct.expiredTime))])]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:"settled"==e.userAct.status,expression:"userAct.status=='settled'"}]},[e._v("已使用")]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.userAct.techId,expression:"userAct.techId"}]},[e._v("所选技师："),n("span",[e._v(e._s(e.userAct.techName))])])]:[n("div",{directives:[{name:"show",rawName:"v-show",value:!e.isMoneyCoupon||0!=e.userAct.consumeMoney,expression:"!isMoneyCoupon || userAct.consumeMoney != 0"}],staticClass:"spec-desc"},[e._v(e._s(e.userAct.consumeMoneyDescription))]),e._v(" "),n("div",[e._v("券有效期："),n("span",[e._v(e._s(e.userAct.couponPeriod))])]),e._v(" "),n("div",[e._v("领取时间："),n("span",[e._v(e._s(e.userAct.getDate))])]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.isRepeatCoupn,expression:"isRepeatCoupn"}]},[e._v("可用次数："),n("span",[e._v(e._s(e.userAct.canUseSum)+"次")])])]],2),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.isRepeatCoupn&&!e.isPaidServiceItem,expression:"isRepeatCoupn && !isPaidServiceItem"}],staticClass:"item share"},[e._v("分享给朋友"),n("br"),e._v("朋友使用后可再获得一次使用机会\n        "),n("div",{class:e.shareStatus,on:{click:function(i){e.doClickShareBtn()}}},[e._v("立即分享")])]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:"settled"!=e.userAct.status,expression:"userAct.status!='settled'"}],staticClass:"item qrcode"},[n("div",[e._v("电子票号（使用时请出示二维码，或者优惠码）")]),e._v(" "),e.couponQrCodeUrl?n("img",{attrs:{alt:"二维码",src:e.couponQrCodeUrl}}):e._e(),e._v(" "),n("span",[e._v(e._s(e._f("codeFormatter")(e.userAct.couponNo)))])]),e._v(" "),e.phoneNumsOfGet.length>0||e.phoneNumsOfUse.length>0?n("div",{directives:[{name:"show",rawName:"v-show",value:e.isRepeatCoupn&&!e.isPaidServiceItem,expression:"isRepeatCoupn && !isPaidServiceItem"}],staticClass:"item get-records"},[n("div",[e._v("好友领取")]),e._v(" "),n("ul",[e._l(e.phoneNumsOfGet,function(i){return n("li",[e._v(e._s(i.phone)+"\n                "),n("div",[e._v("已经领取"+e._s(e.couponName)),n("span",[e._v(e._s(i.date))])])])}),e._v(" "),e._l(e.phoneNumsOfUse,function(i){return n("li",[e._v(e._s(i.phone)+"\n                "),n("div",[e._v("已经使用"+e._s(e.couponName)),n("span",[e._v(e._s(i.date))])])])})],2)]):e._e(),e._v(" "),e.isMoneyCoupon||e.userAct.actDescription||e.isPaidServiceItem?e._e():n("div",{staticClass:"item desc"},[n("div",[e._v("优惠说明：")]),e._v(" "),n("div",[e._v(e._s(e.userAct.actDescription||"无"))])]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!e.isPaidServiceItem,expression:"!isPaidServiceItem"}],staticClass:"item desc content"},[n("div",[e._v("使用说明：")]),e._v(" "),n("div",[e._v("券有效期："+e._s(e.userAct.couponPeriod))]),e._v(" "),n("div",[e._v("使用时段："+e._s(e.userAct.useTimePeriod))]),e._v(" "),n("div",[n("div",{directives:[{name:"show",rawName:"v-show",value:e.useServiceItem,expression:"useServiceItem"}]},[e._v("使用项目：仅限"+e._s(e.useServiceItem))]),e._v(" "),n("div",{domProps:{innerHTML:e._s(e.userAct.actContent)}})])]),e._v(" "),e.isPaidServiceItem&&"paid_service_item"==e.couponType?n("div",{staticClass:"explain-item act-explain"},[n("div",[e._v("活动说明")]),e._v(" "),n("div",[n("div"),e._v(" "),n("div",[n("div",[e._v("使用时间："),n("span",[e._v(e._s(e.userAct.useDateStr))])]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.userAct.usePeriodStr,expression:"userAct.usePeriodStr"}]},[e._v("可用时段："),n("span",[e._v(e._s(e.userAct.usePeriodStr))])]),e._v(" "),n("div",{domProps:{innerHTML:e._s(e.userAct.actContent)}})])])]):e._e(),e._v(" "),e.isPaidServiceItem&&"paid_service_item"!=e.couponType?n("div",{staticClass:"explain-item project-coupon-explain"},[n("div",[e._v("使用说明")]),e._v(" "),n("div",[n("div",{staticStyle:{display:"none"}}),e._v(" "),n("div",[n("ol",[n("li",[e._v("本项目券逾期不消费不退还款项，请尽快消费！")]),e._v(" "),n("li",[e._v("本项目券只对 "),n("span",[e._v(e._s(e.userAct.actTitle))]),e._v(" 项目有效；")]),e._v(" "),n("li",[e._v("消费不受会所项目价格变动，只以当时支付价格为准；")])]),e._v(" "),n("div",{domProps:{innerHTML:e._s(e.userAct.actContentStr)}})])])]):e._e(),e._v(" "),e.isPaidServiceItem?n("div",{staticClass:"explain-item project-explain"},[n("div",[e._v("项目说明")]),e._v(" "),n("div",[n("div",[n("div",[n("div",{style:{"background-image":"url("+(e.userAct.imageUrl||e.global.defaultServiceItemImgUrl)+")"}}),e._v(" "),n("div",[n("div",[e._v(e._s(e.userAct.actTitle))]),e._v(" "),n("div",[e._v(e._s(e.userAct.discountPrice||" "))]),e._v(" "),n("div",[e._v("原价："),n("span",[e._v(e._s(e.userAct.priceStr))]),e.userAct.pricePlusStr?n("span",[e._v("加钟："+e._s(e.userAct.pricePlusStr))]):e._e()])])])]),e._v(" "),n("div",[n("div",[e._v("项目说明")]),e._v(" "),n("div",{domProps:{innerHTML:e._s(e.userAct.description||"无")}})])])]):e._e(),e._v(" "),e.isRepeatCoupn&&e.shareUrl?n("Share",{attrs:{"share-url":e.shareUrl}}):e._e()],1)},staticRenderFns:[]};var p=n("Z0/y")(r,s,!1,function(e){n("naf3")},null,null);i.default=p.exports},naf3:function(e,i,n){var t=n("sowg");"string"==typeof t&&(t=[[e.i,t,""]]),t.locals&&(e.exports=t.locals);n("FIqI")("005ba785",t,!0,{})},sowg:function(e,i,n){(e.exports=n("XLS9")(!1)).push([e.i,'\n.clearfix {\n  display: inline-block;\n}\n.clearfix:after {\n    display: block;\n    content: ".";\n    height: 0;\n    line-height: 0;\n    clear: both;\n    visibility: hidden;\n}\n@media (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5) {\n.border-1px::after {\n    -webkit-transform: scaleY(0.7);\n    transform: scaleY(0.7);\n}\n}\n@media (-webkit-min-device-pixel-ratio: 2), (min-device-pixel-ratio: 2) {\n.border-1px::after {\n    -webkit-transform: scaleY(0.5);\n    transform: scaleY(0.5);\n}\n}\ndiv#coupon-detail-page div.club-name {\n  height: 2.167rem;\n  line-height: 2.167rem;\n  text-align: center;\n  background-color: #fff0d9;\n  color: #4d4d4d;\n  font-size: .889rem;\n  border-bottom: 1px solid #f1e2ca;\n}\ndiv#coupon-detail-page div.coupon-info {\n  position: relative;\n  background-color: #fff;\n  padding: 0.611rem 0.778rem 0.4rem;\n  border-bottom: 1px solid #e1e1e1;\n  margin-bottom: 0.667rem;\n}\ndiv#coupon-detail-page div.coupon-info > div {\n    color: #4d4d4d;\n    font-size: 0.667rem;\n    line-height: 1.22rem;\n}\ndiv#coupon-detail-page div.coupon-info > div > span {\n      color: #999;\n}\ndiv#coupon-detail-page div.coupon-info > div:nth-of-type(1) {\n      position: absolute;\n      top: 0.9rem;\n      right: 0.833rem;\n      color: #f24f52;\n      font-size: 0.889rem;\n      line-height: 1.5rem;\n}\ndiv#coupon-detail-page div.coupon-info > div:nth-of-type(2) {\n      font-size: 1.167rem;\n      line-height: 1.5rem;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      max-width: 13.8rem;\n}\ndiv#coupon-detail-page div.coupon-info > div.spec-desc {\n      font-size: 0.778rem;\n      line-height: 1.8rem;\n}\ndiv#coupon-detail-page div.item {\n  margin-bottom: 0.667rem;\n  border-top: 1px solid #d9d9d9;\n  border-bottom: 1px solid #e5e5e5;\n  background-color: #fff;\n}\ndiv#coupon-detail-page div.share {\n  color: #ff9c0a;\n  font-size: 0.667rem;\n  text-align: center;\n  line-height: 1.25rem;\n  padding: 0.333rem 0;\n}\ndiv#coupon-detail-page div.share > div {\n    background-color: #f24f52;\n    color: #fff;\n    height: 1.333rem;\n    width: 5rem;\n    text-align: center;\n    border-radius: 4px;\n    line-height: 1.333rem;\n    margin: 0.222rem auto;\n}\ndiv#coupon-detail-page div.share > div.unwork {\n      background-color: #ccc;\n}\ndiv#coupon-detail-page div.qrcode {\n  padding: 0.444rem 0 0.222rem;\n  color: #4d4d4d;\n  font-size: 0.667rem;\n  text-align: center;\n  overflow: hidden;\n}\ndiv#coupon-detail-page div.qrcode > div {\n    margin-left: 0.917rem;\n    text-align: left;\n}\ndiv#coupon-detail-page div.qrcode > img {\n    display: block;\n    margin: 0.533rem auto 0.22rem;\n    width: 6.167rem;\n    height: 6.167rem;\n    line-height: 5rem;\n}\ndiv#coupon-detail-page div.qrcode > span {\n    display: block;\n    text-align: center;\n    letter-spacing: 1px;\n}\ndiv#coupon-detail-page div.get-records {\n  padding-left: 0.861rem;\n}\ndiv#coupon-detail-page div.get-records > div {\n    height: 1.833rem;\n    line-height: 1.833rem;\n    color: #ff9c0a;\n    font-size: 0.889rem;\n    border-bottom: 1px solid #d9d9d9;\n}\ndiv#coupon-detail-page div.get-records > ul {\n    color: #4d4d4d;\n    margin: 0.278rem 0 0.278rem 0;\n    padding: 0;\n    list-style-type: none;\n    font-size: 0.778rem;\n}\ndiv#coupon-detail-page div.get-records > ul > li {\n      line-height: 1.25rem;\n      padding: 0.155rem 0 0.155rem 0.5rem;\n      margin-bottom: 0.222rem;\n      border-bottom: 1px solid #d9d9d9;\n}\ndiv#coupon-detail-page div.get-records > ul > li > div > span {\n        float: right;\n        color: #999;\n        font-size: 0.667rem;\n        margin-right: 0.5rem;\n}\ndiv#coupon-detail-page div.get-records > ul > li:last-child {\n        border-bottom: 0;\n        margin-bottom: 0;\n}\ndiv#coupon-detail-page div.desc {\n  padding: 0.3rem 0 0.3rem;\n  color: #4d4d4d;\n  font-size: 0.778rem;\n}\ndiv#coupon-detail-page div.desc > div {\n    margin-left: 1.333rem;\n    margin-right: 0.5rem;\n}\ndiv#coupon-detail-page div.desc > div:first-child {\n      margin-left: 0.833rem;\n      font-size: 0.889rem;\n      color: #ff9c0a;\n}\ndiv#coupon-detail-page div.desc.content {\n    margin-bottom: 0;\n}\ndiv#coupon-detail-page div.desc.content > div:nth-of-type(4) ul {\n      margin-left: 1rem;\n      list-style-type: disc;\n}\ndiv#coupon-detail-page div.desc.content > div:nth-of-type(4) ul li {\n        list-style-type: disc;\n}\ndiv#coupon-detail-page div.explain-item {\n  margin-top: .556rem;\n  border-bottom: 1px solid #d9d9d9;\n  border-top: 1px solid #d9d9d9;\n  padding-left: .833rem;\n  background-color: #fff;\n}\ndiv#coupon-detail-page div.explain-item > div:nth-of-type(1) {\n    font-size: .889rem;\n    border-bottom: 1px solid #E0E0E0;\n    line-height: 1.833rem;\n    color: #FF9C0A;\n}\ndiv#coupon-detail-page div.explain-item > div:nth-of-type(2) > div:nth-of-type(1) {\n    border-bottom: 1px solid #E0E0E0;\n}\ndiv#coupon-detail-page div.explain-item > div:nth-of-type(2) > div:nth-of-type(1) > div {\n      padding: .667rem 0;\n}\ndiv#coupon-detail-page div.explain-item > div:nth-of-type(2) > div:nth-of-type(1) > div:nth-of-type(1) {\n        font-size: .82rem;\n        color: #FF9D09;\n        display: -webkit-box;\n        display: -moz-box;\n        -webkit-box-align: center;\n        -moz-box-align: center;\n}\ndiv#coupon-detail-page div.explain-item > div:nth-of-type(2) > div:nth-of-type(1) > div:nth-of-type(1) > div:nth-of-type(1) {\n          width: 3rem;\n          height: 3rem;\n          margin-right: .556rem;\n          border-radius: .278rem;\n          background-size: 3rem 3rem;\n          background-repeat: no-repeat;\n          border: 1px solid #eee;\n}\ndiv#coupon-detail-page div.explain-item > div:nth-of-type(2) > div:nth-of-type(1) > div:nth-of-type(1) > div:nth-of-type(2) {\n          -webkit-box-flex: 1;\n          box-flex: 1;\n}\ndiv#coupon-detail-page div.explain-item > div:nth-of-type(2) > div:nth-of-type(1) > div:nth-of-type(1) > div:nth-of-type(2) > div:nth-of-type(1) {\n            font-size: .944rem;\n            color: #4a4a4a;\n            line-height: 1.3;\n            overflow: hidden;\n            text-overflow: ellipsis;\n            white-space: nowrap;\n}\ndiv#coupon-detail-page div.explain-item > div:nth-of-type(2) > div:nth-of-type(1) > div:nth-of-type(1) > div:nth-of-type(2) > div:nth-of-type(2), div#coupon-detail-page div.explain-item > div:nth-of-type(2) > div:nth-of-type(1) > div:nth-of-type(1) > div:nth-of-type(2) > div:nth-of-type(3) {\n            font-size: .778rem;\n            color: #616161;\n            margin-top: .2rem;\n}\ndiv#coupon-detail-page div.explain-item > div:nth-of-type(2) > div:nth-of-type(1) > div:nth-of-type(1) > div:nth-of-type(2) > div:nth-of-type(3) {\n            margin-top: .2rem;\n}\ndiv#coupon-detail-page div.explain-item > div:nth-of-type(2) > div:nth-of-type(1) > div:nth-of-type(1) > div:nth-of-type(2) > div:nth-of-type(3) > span:nth-of-type(1) {\n              margin-right: 1rem;\n}\ndiv#coupon-detail-page div.explain-item > div:nth-of-type(2) > div:nth-of-type(1) > div:nth-of-type(2) {\n        font-size: .833rem;\n        padding: 0 0 .667rem;\n}\ndiv#coupon-detail-page div.explain-item > div:nth-of-type(2) > div:nth-of-type(2) {\n    padding: .667rem .667rem .667rem 0;\n}\ndiv#coupon-detail-page div.explain-item > div:nth-of-type(2) > div:nth-of-type(2) > ol {\n      list-style-type: decimal;\n      margin: 0;\n      padding-left: .85rem;\n      font-size: .822rem;\n      color: #4a4a4a;\n}\ndiv#coupon-detail-page div.explain-item > div:nth-of-type(2) > div:nth-of-type(2) > ol li {\n        line-height: 1.5;\n        list-style-type: decimal;\n}\ndiv#coupon-detail-page div.explain-item > div:nth-of-type(2) > div:nth-of-type(2) > div:not(:last-child) {\n      font-size: .889rem;\n      color: #212121;\n}\ndiv#coupon-detail-page div.explain-item > div:nth-of-type(2) > div:nth-of-type(2) > div:not(:last-child) > span {\n        color: #616161;\n}\ndiv#coupon-detail-page div.explain-item > div:nth-of-type(2) > div:nth-of-type(2) > div:last-child {\n      margin-top: .3rem;\n      font-size: .822rem;\n      color: #4a4a4a;\n}\ndiv#coupon-detail-page div.explain-item > div:nth-of-type(2) > div:nth-of-type(2) > div:last-child > ul {\n        margin: .556rem 0 0;\n        padding-left: .85rem;\n}\ndiv#coupon-detail-page div.explain-item > div:nth-of-type(2) > div:nth-of-type(2) > div:last-child > ul > li {\n          margin-top: .556rem;\n}\ndiv#coupon-detail-page div.explain-item > div:nth-of-type(2) > div:nth-of-type(2) > div:last-child > ul > li:first-child {\n            margin-top: 0;\n}\ndiv#coupon-detail-page div.explain-item > div:nth-of-type(2) > div:nth-of-type(2) > div:last-child > ul ul {\n          margin: 0;\n          padding-left: 0;\n          list-style-type: none;\n}\n',""])}});