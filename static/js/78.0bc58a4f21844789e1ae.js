webpackJsonp([78],{c2lw:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("3cXf"),a=i.n(n),o=i("vbKY"),s=i("TVG1"),r=i("f9Ou"),d=i("UIhY"),l=i("Fc8N"),p={directives:{"tel-input":r.a,"password-input":d.a,"test-code-input":l.a},data:function(){return{global:o.a.data,tel:"",password:"",testCode:"",userLoginParam:null,testCodeBtnStatus:"",testCodeBtnText:"获取验证码",getTestCodeRepeatCount:6,inRequest:!1,isBindWeixin:!1}},computed:{isTestCodeVaild:function(){return/^\d{4}$/.test(this.testCode)},isTelValid:function(){return/^1[3456789]\d{9}$/.test(this.tel)},isPasswordValid:function(){return this.password.length>=6}},created:function(){var e=s.a.localStorage("user-register-param"),t=window["spa-login-info"],i=this.global,n=i.currPage.query;e&&(this.userLoginParam=JSON.parse(e)),n.code&&(i.authCode=n.code),!i.userAgent.isWX||i.authCode&&"9358_login"==n.state?(t&&(this.tel=t.username,t.password&&t.code&&(this.testCode=t.code,this.password=t.password,this.isTestCodeVaild=/^\d{4}$/.test(this.testCode),this.isPasswordValid=this.password.length>=6),delete window["spa-login-info"]),i.loading=!1):o.a.getOauthCode("9358","9358_login","base")},mounted:function(){var e=this.userLoginParam;e&&e.username&&(this.tel=e.username,this.isTelValid=/^1[3456789]\d{9}$/.test(this.tel),this.isBindWeixin=e.isBindWeixin,e.password&&(this.password=e.password,this.isPasswordValid=this.password.length>=6),e.code&&(this.testCode=e.code,this.isTestCodeVaild=/^\d{4}$/.test(this.testCode)),s.a.removeLocalStorage("user-register-param"),this.doClickConfirmBtn())},methods:{doClickConfirmBtn:function(){var e=this,t=e.global;e.isTelValid&&e.isTestCodeVaild&&e.isPasswordValid&&(e.inRequest=!0,e.$http.post("../api/v1/user/checkLoginName",{loginName:e.tel}).then(function(i){if((i=i.body)+""=="1")s.a.tipShow("该用户已经注册了！"),e.inRequest=!1;else{var n={mobile:e.tel,code:e.testCode,password:e.password,clubId:t.clubId,chanel:t.sessionType,openId:t.openId||"",wxNickName:"",wxHeadimgurl:"",clubCode:t.clubInviteCode,techInviteCode:t.techInviteCode||"",auth2code:t.authCode,isBindWeixin:e.isBindWeixin?"Y":"N"};e.$http.post("../api/v1/user/register",n).then(function(i){200==(i=i.body).status?(t.token=i.token,t.userId=i.userId,t.userHeader=i.avatarUrl||t.defaultHeader,t.userTel=i.phoneNum,t.userName=i.name,t.loginName=i.loginName,t.isLogin=!0,s.a.localStorage("token",t.token),s.a.localStorage("userID",t.userId),s.a.localStorage("userHeader",t.userHeader),s.a.localStorage("userTel",t.userTel),s.a.localStorage("userName",t.userName),s.a.tipShow("注册成功！"),o.a.initChat(),o.a.redirectToLastPage(e.$router)):"935801"==i.statusCode&&(s.a.localStorage("user-register-param",a()(n)),o.a.getOauthCode("9358","9358_login","base")),e.inRequest=!1},function(t){s.a.tipShow(t.data||"注册出错！"),e.inRequest=!1})}}))},getTestCode:function(){var e=this;"disabled"!=e.testCodeBtnStatus&&"pause"!=e.testCodeBtnStatus&&(e.isTelValid?e.$http.post("../api/v1/user/checkLoginName",{loginName:e.tel}).then(function(t){if((t=t.body)+""!="1"){e.testCodeBtnStatus="pause",e.testCodeBtnText="重新发送(60s)";var i=60,n=setInterval(function(){0==--i?(clearInterval(n),e.getTestCodeRepeatCount--,e.testCodeBtnStatus="",e.testCodeBtnText="获取验证码",0==e.getTestCodeRepeatCount&&(e.testCodeBtnStatus="disabled")):e.testCodeBtnText="重新发送("+i+"s)"},1e3);e.$http.get("../api/v1/verifyCode",{params:{mobile:e.tel,which:"userRegister"}})}else s.a.tipShow("该用户已经注册了！")}):s.a.tipShow("请输入正确的手机号码！"))}}},u={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"page login-page",attrs:{id:"register-page"}},[i("div",{staticClass:"input tel spec"},[i("i"),i("span",[e._v("+86")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.tel,expression:"tel"},{name:"tel-input",rawName:"v-tel-input"}],attrs:{type:"tel",placeholder:"请输入您的11位手机号",maxlength:"11"},domProps:{value:e.tel},on:{input:function(t){t.target.composing||(e.tel=t.target.value)}}})]),e._v(" "),i("div",{staticClass:"input auth spec"},[i("i"),i("input",{directives:[{name:"model",rawName:"v-model",value:e.testCode,expression:"testCode"},{name:"test-code-input",rawName:"v-test-code-input"}],attrs:{type:"tel",placeholder:"请输入手机短信验证码",maxlength:"4"},domProps:{value:e.testCode},on:{input:function(t){t.target.composing||(e.testCode=t.target.value)}}}),i("a",{class:e.testCodeBtnStatus,on:{click:function(t){e.getTestCode()}}},[e._v(e._s(e.testCodeBtnText))])]),e._v(" "),i("div",{staticClass:"input pw"},[i("i"),i("input",{directives:[{name:"password-input",rawName:"v-password-input"},{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",placeholder:"请输入6-20位密码，仅限字母和数字",maxlength:"20"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!e.isTelValid,expression:"!isTelValid"}],staticClass:"error"},[e._v("* 请输入正确的11位手机号")]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isTelValid&&!e.isTestCodeVaild,expression:"isTelValid && !isTestCodeVaild"}],staticClass:"error"},[e._v("* 请输入短信验证码")]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isTelValid&&e.isTestCodeVaild&&!e.isPasswordValid,expression:"isTelValid && isTestCodeVaild && !isPasswordValid"}],staticClass:"error"},[e._v("* 请输入6~20位密码")]),e._v(" "),i("div",{staticClass:"next-btn",class:{active:e.isTelValid&&e.isTestCodeVaild&&e.isPasswordValid},on:{click:function(t){e.doClickConfirmBtn()}}},[e._v("注册")]),e._v(" "),i("div",{staticClass:"tip-title"},[e._v("注：")]),e._v(" "),i("div",{staticClass:"tip"},[e._v("您的手机号未注册，请输入相关信息完成注册")])])},staticRenderFns:[]};var g=i("Z0/y")(p,u,!1,function(e){i("x8Tv")},null,null);t.default=g.exports},hzun:function(e,t,i){var n=i("JLGU");(e.exports=i("XLS9")(!1)).push([e.i,'\n.clearfix {\n  display: inline-block;\n}\n.clearfix:after {\n    display: block;\n    content: ".";\n    height: 0;\n    line-height: 0;\n    clear: both;\n    visibility: hidden;\n}\n@media (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5) {\n.border-1px::after {\n    -webkit-transform: scaleY(0.7);\n    transform: scaleY(0.7);\n}\n}\n@media (-webkit-min-device-pixel-ratio: 2), (min-device-pixel-ratio: 2) {\n.border-1px::after {\n    -webkit-transform: scaleY(0.5);\n    transform: scaleY(0.5);\n}\n}\ndiv.login-page {\n  overflow: hidden;\n}\ndiv.login-page div.input {\n    height: 2.611rem;\n    position: relative;\n    width: 100%;\n    margin-top: .611rem;\n    padding: 0 .722rem;\n    background-color: #fff;\n    border-bottom: 1px solid #d9d9d9;\n}\ndiv.login-page div.input > i {\n      display: block;\n      width: 0.75rem;\n      height: 0.972rem;\n      position: absolute;\n      left: 0.722rem;\n      top: 50%;\n      margin-right: 0.5rem;\n      margin-top: -0.486rem;\n      background-size: 0.75rem 0.972rem;\n      background-repeat: no-repeat;\n}\ndiv.login-page div.input > span {\n      position: absolute;\n      left: 2.122rem;\n      color: #4d4d4d;\n      font-size: 0.888rem;\n      display: inline-block;\n      height: 1.4rem;\n      top: 50%;\n      margin-top: -0.7rem;\n}\ndiv.login-page div.input > input {\n      width: 100%;\n      height: 1.4rem;\n      line-height: 1.4rem;\n      margin-top: 0.605rem;\n      padding-left: 3.422rem;\n      color: #4d4d4d;\n      font-size: 0.888rem;\n      -webkit-box-sizing: border-box;\n              box-sizing: border-box;\n}\ndiv.login-page div.input.tel > i {\n      background-image: url('+n(i("XT6C"))+");\n}\ndiv.login-page div.input.pw, div.login-page div.input.auth {\n      margin-top: 0;\n}\ndiv.login-page div.input.pw > input, div.login-page div.input.auth > input {\n        padding-left: 1.5rem;\n}\ndiv.login-page div.input.pw > i {\n      background-image: url("+n(i("Sr54"))+");\n}\ndiv.login-page div.input.auth > i {\n      background-image: url("+n(i("3S/7"))+');\n}\ndiv.login-page div.input.auth > a {\n      position: absolute;\n      display: block;\n      right: 0.722rem;\n      width: 6.166rem;\n      height: 2.138rem;\n      top: 50%;\n      margin-top: -1.069rem;\n      background-color: #fb5549;\n      text-align: center;\n      line-height: 2.138rem;\n      font-size: .888rem;\n      border-radius: .166rem;\n      color: #fff;\n}\ndiv.login-page div.input.auth > a.disabled, div.login-page div.input.auth > a.pause {\n        background-color: #ccc;\n}\ndiv.login-page div.input.auth > a.repeat {\n        background-color: #fb5448;\n}\ndiv.login-page div.input.spec {\n      border-bottom-width: 0;\n}\ndiv.login-page div.input.spec::after {\n        content: "";\n        display: block;\n        position: absolute;\n        left: 0.722rem;\n        right: 0.722rem;\n        bottom: 0;\n        height: 1px;\n        background-color: #f0f0f0;\n}\ndiv.login-page div.next-btn {\n    background-color: #bebebe;\n    margin: 2.25rem .722rem 0;\n    color: #fff;\n    font-size: .888rem;\n    height: 2.472rem;\n    line-height: 2.472rem;\n    text-align: center;\n    border-radius: .166rem;\n    letter-spacing: 1px;\n}\ndiv.login-page div.next-btn.active {\n      background-color: #fb5549;\n}\ndiv.login-page div.tip-title {\n    font-size: .889rem;\n    color: #666;\n    margin: 1.583rem .722rem 0;\n}\ndiv.login-page div.tip {\n    margin: 0 1.811rem;\n    color: #ff9d09;\n    font-size: .778rem;\n}\ndiv.login-page div.error {\n    margin: .5rem .722rem 0;\n    font-size: .778rem;\n    color: #fb5549;\n}\ndiv.login-page div.recover-password {\n    font-size: .777rem;\n    margin: .3rem .722rem;\n    color: #fb5549;\n    text-align: right;\n}\n',""])},x8Tv:function(e,t,i){var n=i("hzun");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);i("FIqI")("3e0b4048",n,!0,{})}});