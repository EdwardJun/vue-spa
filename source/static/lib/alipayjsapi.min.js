!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.ES6Promise=t()}(this,function(){"use strict";function e(e){return"function"==typeof e||"object"==typeof e&&null!==e}function t(e){return"function"==typeof e}function n(e){j=e}function r(e){H=e}function o(){return void 0!==z?function(){z(i)}:a()}function a(){var e=setTimeout;return function(){return e(i,1)}}function i(){for(var e=0;e<U;e+=2)(0,Y[e])(Y[e+1]),Y[e]=void 0,Y[e+1]=void 0;U=0}function u(e,t){var n=arguments,r=this,o=new this.constructor(s);void 0===o[Z]&&k(o);var a=r._state;return a?function(){var e=n[a-1];H(function(){return B(a,o,e,r._result)})}():_(r,o,e,t),o}function c(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var n=new t(s);return g(n,e),n}function s(){}function l(){return new TypeError("You cannot resolve a promise with itself")}function f(){return new TypeError("A promises callback cannot return that same promise.")}function d(e){try{return e.then}catch(e){return te.error=e,te}}function h(e,t,n,r){try{e.call(t,n,r)}catch(e){return e}}function p(e,t,n){H(function(e){var r=!1,o=h(n,t,function(n){r||(r=!0,t!==n?g(e,n):y(e,n))},function(t){r||(r=!0,w(e,t))},"Settle: "+(e._label||" unknown promise"));!r&&o&&(r=!0,w(e,o))},e)}function m(e,t){t._state===X?y(e,t._result):t._state===ee?w(e,t._result):_(t,void 0,function(t){return g(e,t)},function(t){return w(e,t)})}function v(e,n,r){n.constructor===e.constructor&&r===u&&n.constructor.resolve===c?m(e,n):r===te?(w(e,te.error),te.error=null):void 0===r?y(e,n):t(r)?p(e,n,r):y(e,n)}function g(t,n){t===n?w(t,l()):e(n)?v(t,n,d(n)):y(t,n)}function b(e){e._onerror&&e._onerror(e._result),P(e)}function y(e,t){e._state===G&&(e._result=t,e._state=X,0!==e._subscribers.length&&H(P,e))}function w(e,t){e._state===G&&(e._state=ee,e._result=t,H(b,e))}function _(e,t,n,r){var o=e._subscribers,a=o.length;e._onerror=null,o[a]=t,o[a+X]=n,o[a+ee]=r,0===a&&e._state&&H(P,e)}function P(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=void 0,o=void 0,a=e._result,i=0;i<t.length;i+=3)r=t[i],o=t[i+n],r?B(n,r,o,a):o(a);e._subscribers.length=0}}function A(){this.error=null}function S(e,t){try{return e(t)}catch(e){return ne.error=e,ne}}function B(e,n,r,o){var a=t(r),i=void 0,u=void 0,c=void 0,s=void 0;if(a){if(i=S(r,o),i===ne?(s=!0,u=i.error,i.error=null):c=!0,n===i)return void w(n,f())}else i=o,c=!0;n._state!==G||(a&&c?g(n,i):s?w(n,u):e===X?y(n,i):e===ee&&w(n,i))}function C(e,t){try{t(function(t){g(e,t)},function(t){w(e,t)})}catch(t){w(e,t)}}function D(){return re++}function k(e){e[Z]=re++,e._state=void 0,e._result=void 0,e._subscribers=[]}function T(e,t){this._instanceConstructor=e,this.promise=new e(s),this.promise[Z]||k(this.promise),V(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?y(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&y(this.promise,this._result))):w(this.promise,E())}function E(){return new Error("Array Methods must be provided an Array")}function I(e){return new T(this,e).promise}function R(e){var t=this;return new t(V(e)?function(n,r){for(var o=e.length,a=0;a<o;a++)t.resolve(e[a]).then(n,r)}:function(e,t){return t(new TypeError("You must pass an array to race."))})}function x(e){var t=new this(s);return w(t,e),t}function L(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function M(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function N(e){this[Z]=D(),this._result=this._state=void 0,this._subscribers=[],s!==e&&("function"!=typeof e&&L(),this instanceof N?C(this,e):M())}function O(){var e=void 0;if("undefined"!=typeof global)e=global;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=N}var F=void 0,V=F=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},U=0,z=void 0,j=void 0,H=function(e,t){Y[U]=e,Y[U+1]=t,2===(U+=2)&&(j?j(i):K())},q="undefined"!=typeof window?window:void 0,J=q||{},$=J.MutationObserver||J.WebKitMutationObserver,W="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),Q="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,Y=new Array(1e3),K=void 0;K=W?function(){return function(){return process.nextTick(i)}}():$?function(){var e=0,t=new $(i),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}():Q?function(){var e=new MessageChannel;return e.port1.onmessage=i,function(){return e.port2.postMessage(0)}}():void 0===q&&"function"==typeof require?function(){try{var e=require("vertx");return z=e.runOnLoop||e.runOnContext,o()}catch(e){return a()}}():a();var Z=Math.random().toString(36).substring(16),G=void 0,X=1,ee=2,te=new A,ne=new A,re=0;return T.prototype._enumerate=function(){for(var e=this.length,t=this._input,n=0;this._state===G&&n<e;n++)this._eachEntry(t[n],n)},T.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===c){var o=d(e);if(o===u&&e._state!==G)this._settledAt(e._state,t,e._result);else if("function"!=typeof o)this._remaining--,this._result[t]=e;else if(n===N){var a=new n(s);v(a,e,o),this._willSettleAt(a,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(r(e),t)},T.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===G&&(this._remaining--,e===ee?w(r,n):this._result[t]=n),0===this._remaining&&y(r,this._result)},T.prototype._willSettleAt=function(e,t){var n=this;_(e,void 0,function(e){return n._settledAt(X,t,e)},function(e){return n._settledAt(ee,t,e)})},N.all=I,N.race=R,N.resolve=c,N.reject=x,N._setScheduler=n,N._setAsap=r,N._asap=H,N.prototype={constructor:N,then:u,catch:function(e){return this.then(null,e)}},N.polyfill=O,N.Promise=N,N.polyfill(),N}),function(e){"use strict";function t(){return(G=G||e[X])&&G.call}function n(e){return/\w+Sync$/.test(e)}function r(e,t){setTimeout(function(){e(t)},1)}function o(e){return/^[a-z0-9|]+$/i.test(e)}function a(e,t){var n=!1;return t=t||"data",I(e,"_")?(e[t]=e._,delete e._):(R(e,function(e){e!==t&&(n=!0)}),n&&(n=e,(e={})[t]=n)),e}function i(e,t,n){var r,o=!1;return F(e)||(re.EVENTS||(re.EVENTS={}),re.EVENTS[e]||(re.EVENTS[e]={callbacks:[]}),re.EVENTS[e].callbacks||(re.EVENTS[e].callbacks=[]),re.EVENTS[e].callbacks.forEach(function(e,n){e.cb===t&&(o=e,r=n)}),n&&J(r)&&re.EVENTS[e].callbacks.splice(r,1)),o}function u(e,t,n,r){i(e,t)||re.EVENTS[e].callbacks.push({cb:t,_cb:n,_cbSFC:r})}function c(e,t){var n=i(e,t,!0);j(t)?n&&ae.off(e,n._cb):(re.EVENTS[e].callbacks.forEach(function(t){ae.off(e,t._cb)}),re.EVENTS[e].callbacks=[])}function s(e){return f("on",e)}function l(e){return f("off",e)}function f(e,t){var n=oe[t],r=!1,o="off"===e?/^off([A-Z])(\w+)/:/^on([A-Z])(\w+)/;return n&&o.test(t)&&(t=t.match(o),!(r=n.m)&&t[1]&&t[2]&&(r=L(t[1])+t[2])),r}function d(e,t){return((oe[e]||{}).e||{})[t]}function h(e){var t=oe[e];return t&&t.m?t.m:e}function p(e,t,n){var r=oe[e],o=r&&r.b?r.b(Z({},t),n):t,a=d(e,"optionModifier");if(j(a)){var i=a(o);q(i)&&(o=i)}return o}function m(e,t){var n={};return t=t||{},j(t.success)&&(n.success=t.success,delete t.success),j(t.fail)&&(n.fail=t.fail,delete t.fail),j(t.complete)&&(n.complete=t.complete,delete t.complete),n}function v(e){var t=oe[e];return!(!t||!t.d)&&t.d}function g(e,t,n,r,o){var a=oe[e],i=a&&a.a?a.a(Q(t)?t:Z({},t),n,r,o):Z({},t),u=d(e,"resultModifier");if(j(u)){var c=u(i);q(c)&&(i=c)}return i}function b(e,t){return I(t,"error")&&(t.error=parseInt(t.error,10)),!1!==d(e,"handleResultSuccess")&&y(t),0===t.error&&(delete t.error,delete t.errorMessage),t.error>0&&t.error<10&&console.error(e,t),t}function y(e,t,n){return n=!F(n)&&n,I(e,"error")||e.success!==n||(e.error=J(t)?t:2),delete e.success,e}function w(e){var t={};return F(e.data)||(t=q(t=e.data)?t:{data:t}),t}function _(e){var t=(e||"").match(/(\w+)(%\w)$/i),n={k:e};return t&&(n.k=t[1],n.t=t[2]),n}function P(e,t){return"%s"===e&&(t=C(t)),"%c"===e&&(t=D(t)),"%b"===e&&(t=k(t)),"%d"===e&&(t=parseInt(t,10)),"%f"===e&&(t=parseFloat(t)),t}function A(e,t,n){var r;return n=n||{},R(t,function(o,a){!F(a=(r=_(t[o])).k)&&(I(e,o)||I(n,o))&&F(e[a])&&(e[a]=P(r.t,F(n[o])?e[o]:n[o]),a!==o&&delete e[o])}),e}function S(){var e,t,n,r,o,a;ae.debug&&(e=arguments.length<=0?void 0:arguments[0],t=arguments.length<=1?void 0:arguments[1],n=arguments.length<=2?void 0:arguments[2],r=arguments.length<=3?void 0:arguments[3],o=arguments.length<=4?void 0:arguments[4],a=[arguments.length>3?"RETURN>":"INVOKE>",e,I(t,"_")?t._:t,n],arguments.length>3&&a.push(r),arguments.length>4&&a.push(o),console.info(a))}function B(e){return e.test(ee)}function C(e){return q(e)||$(e)?JSON.stringify(e):e+""}function D(e){var t=""+e;return 0===t.indexOf("#")&&(t=t.substr(1)),3===t.length&&(t=t.replace(/(.)/g,"$1$1")),t=parseInt(t,16),U(t)&&console.error(e+" is invalid hex color."),t}function k(e){return H(e)&&(e=e.replace(/^data:(\/|\w|\-|\.)+;base64,/i,"")),e}function T(e){var t=[];return R(e,function(e,n){t.push(e+"="+encodeURIComponent(F(n)?"":n))}),t=t.join("&")}function E(e,t){var n=t;return q(t)&&(n=T(t)),/\?/.test(e)?/&$/.test(e)||/\?$/.test(e)||(n="&"+n):n="?"+n,e+n}function I(e,t){return!(!q(e)&&!$(e))&&e.hasOwnProperty(t)}function R(e,t){var n,r;if(W(e)){for(n=0;n<e.length;n++)if(!1===t(n,e[n]))return e}else for(r in e)if(!1===t(r,e[r]))return e;return e}function x(e){try{e=JSON.parse(e)}catch(t){console.warn(t,e)}return e}function L(e){return H(e)&&(e=e.toLowerCase()),e}function M(e){return H(e)&&(e=e.toUpperCase()),e}function N(){return B(/android/i)}function O(){return B(/iPad|iPod|iPhone|iOS/i)}function F(e){return"undefined"===Y(e)}function V(e){return"null"===Y(e)}function U(e){return"NaN"===parseInt(e,10).toString()}function z(e){return"boolean"===Y(e)}function j(e){return"function"===Y(e)}function H(e){return"string"===Y(e)}function q(e){return"object"===Y(e)}function J(e){return"number"===Y(e)}function $(e){return"array"===Y(e)}function W(e){return!!e&&!j(e)&&($(e)||J(e.length))}function Q(e){return"event"===Y(e)}function Y(e){return Object.prototype.toString.call(e).replace(/\[object (\w+)\]/,"$1").toLowerCase()}function K(e){for(var t in e)return!1;return!0}function Z(e){var t,n;if(!q(e))return e;for(var r=arguments.length,o=Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];for(var i=0,u=o.length;i<u;i++){t=o[i];for(n in t)hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}var G,X="AlipayJSBridge",ee=navigator.userAgent,te=function(){var t=!1,n=e.Promise;if(n){var r=null,o=null;try{o=(r=n.resolve()).then}catch(e){}r instanceof n&&j(o)&&!n.cast&&(t=!0)}return t||console.warn("当前浏览器不支持 Promise，你仍然可以通过回调方式使用 AlipayJSAPI。"),t}(),ne=[],re={getBAPSI:{isListening:!1,lastState:2,on:function(){re.getBAPSI.isListening||(G.call("startMonitorBackgroundAudio"),re.getBAPSI.isListening=!0,ae.on("getBackgroundAudioPlayedStateInfo",re.getBAPSI.listener))},off:function(){ae.off("getBackgroundAudioPlayedStateInfo",re.getBAPSI.listener),G.call("stopMonitorBackgroundAudio"),re.getBAPSI.isListening=!1},listener:function(e){var t,n=(e.data||{}).status;switch(n){case 0:t="backgroundAudioPause";break;case 1:t="backgroundAudioPlay";break;case 2:t="backgroundAudioStop";break;default:t=void 0}t&&n!==re.getBAPSI.lastState&&(ae.trigger(t),re.getBAPSI.lastState=n)}}},oe={openBluetoothAdapter:{},closeBluetoothAdapter:{},getBluetoothAdapterState:{},startBluetoothDevicesDiscovery:{b:function(e){return H(e._)&&(e._=[e._]),A(e,{_:"services"}),e}},stopBluetoothDevicesDiscovery:{},getBluetoothDevices:{b:function(e){return H(e._)&&(e._=[e._]),A(e,{_:"services"}),e},a:function(e){return $(e.devices)&&R(e.devices,function(e,t){A(t,{manufacturerData:"advertisData"})}),e}},getConnectedBluetoothDevices:{a:function(e){return $(e.devices)&&R(e.devices,function(e,t){A(t,{manufacturerData:"advertisData"})}),e}},connectBLEDevice:{b:function(e){return A(e,{_:"deviceId"}),e}},disconnectBLEDevice:{},writeBLECharacteristicValue:{},readBLECharacteristicValue:{},notifyBLECharacteristicValueChange:{},getBLEDeviceServices:{b:function(e){return A(e,{_:"deviceId"}),e}},getBLEDeviceCharacteristics:{},onBLECharacteristicValueChange:{m:"BLECharacteristicValueChange"},offBLECharacteristicValueChange:{m:"BLECharacteristicValueChange"},onBluetoothAdapterStateChange:{},offBluetoothAdapterStateChange:{},onBLEConnectionStateChanged:{m:"BLEConnectionStateChanged"},offBLEConnectionStateChanged:{m:"BLEConnectionStateChanged"},onBluetoothDeviceFound:{a:function(e){return A(e,{manufacturerData:"advertisData"})}},offBluetoothDeviceFound:{},pushBizWindow:{},compressImage:{b:function(e){return e.level=F(e.level)?4:e.level,A(e,{_:"apFilePaths",level:"compressLevel%d"})},d:function(e,t){N()?G.call("compressImage",e,t):r(t,{apFilePaths:e.apFilePaths||[]})}},getLaunchParams:{d:function(e,t){ae.launchParams=window.ALIPAYH5STARTUPPARAMS||G.startupParams||{},j(t)&&t(ae.launchParams)}},openAPDeviceLib:{a:function(e){return q(e.result)&&(e.status=e.result.status,delete e.result),e}},closeAPDeviceLib:{a:function(e){return q(e.result)&&(e.status=e.result.status,delete e.result),e}},configAPDeviceLib:{a:function(e){return q(e.result)&&(e.status=e.result.status,delete e.result),e}},getAPDeviceInfos:{a:function(e){return q(e.result)&&(e.status=e.result.status,delete e.result),e}},sendDataToAPDevice:{a:function(e){return q(e.result)&&(e.status=e.result.status,delete e.result),e}},startScanAPDevice:{a:function(e){return q(e.result)&&(e.status=e.result.status,delete e.result),e}},stopScanAPDevice:{a:function(e){return q(e.result)&&(e.status=e.result.status,delete e.result),e}},connectAPDevice:{a:function(e){return q(e.result)&&(e.status=e.result.status,delete e.result),e}},disconnectAPDevice:{a:function(e){return q(e.result)&&(e.status=e.result.status,delete e.result),e}},onAPDeviceStateChange:{m:"onAPDeviceStateChange",a:function(e){var t={};return A(t,{deviceId:"deviceId",state:"state",connType:"connType"},q(e.data)?e.data:e),t},e:{handleEventData:!1}},offAPDeviceStateChange:{m:"onAPDeviceStateChange"},onReceiveDataFromAPDevice:{m:"onReceiveDataFromAPDevice",a:function(e){var t={};return A(t,{deviceId:"deviceId",data:"data",characteristicUUID:"characteristicUUID"},q(e.data)?e.data:e),t},e:{handleEventData:!1}},offReceiveDataFromAPDevice:{m:"onReceiveDataFromAPDevice"},onScanAPDeviceResult:{m:"onScanAPDeviceResult",a:function(e){var t={};return A(t,{deviceName:"deviceName",localName:"localName",RSSI:"RSSI",txPower:"txPower",serviceUUIDs:"serviceUUIDs",macAddr:"macAddr",uuid:"uuid",deviceId:"deviceId",manufacturerData:"manufacturerData"},q(e.data)?e.data:e),t},e:{handleEventData:!1}},offScanAPDeviceResult:{m:"onScanAPDeviceResult"},onAPDeviceBluetoothStateChange:{m:"onAPDeviceBluetoothStateChange",a:function(e){var t={};return A(t,{state:"state"},q(e.data)?e.data:e),t},e:{handleEventData:!1}},offAPDeviceBluetoothStateChange:{m:"onAPDeviceBluetoothStateChange"},onAPDeviceError:{m:"onAPDeviceError",a:function(e){var t={};return A(t,{deviceId:"deviceId",status:"status",errorReason:"errorReason"},q(e.data)?e.data:e),t},e:{handleEventData:!1}},offAPDeviceError:{m:"onAPDeviceError"},onSendDataToAPDevice:{m:"onSendDataToAPDevice",a:function(e){var t={};return A(t,{deviceId:"deviceId",characteristicUUID:"characteristicUUID"},q(e.data)?e.data:e),t},e:{handleEventData:!1}},offSendDataToAPDevice:{m:"onSendDataToAPDevice"},onTabClick:{},onShare:{m:"onShare"},connectSocket:{b:function(e){return A(e,{headers:"header"})}},sendSocketMessage:{b:function(e){return A(e,{_:"data"})}},closeSocket:{},onSocketOpen:{},offSocketOpen:{},onSocketMessage:{},offSocketMessage:{},onSocketError:{},offSocketError:{},onSocketClose:{},offSocketClose:{},alert:{b:function(e){return e=A(e,{_:"content",content:"message%s",buttonText:"button%s"}),F(e.title)||(e.title=P("%s",e.title)),e}},confirm:{b:function(e){return e=A(e,{_:"content%s",content:"message%s",confirmButtonText:"okButton%s",cancelButtonText:"cancelButton%s"}),F(e.title)||(e.title=P("%s",e.title)),e},a:function(e){return A(e,{ok:"confirm"})}},showToast:{m:"toast",b:function(e){return A(e,{_:"content%s"}),H(e.content)||(e.content=P("%s",e.content)),e}},hideToast:{},showLoading:{b:function(e){return A(e,{_:"content",content:"text%s"})}},hideLoading:{},showNavigationBarLoading:{m:"showTitleLoading"},hideNavigationBarLoading:{m:"hideTitleLoading"},setNavigationBar:{b:function(e){var t="setTitle",n="setTitleColor",r="setBarBottomLineColor",o={};return o[t]={},o[n]={},o[r]={},o[t]=A(o[t],{_:"title",title:"title%s",image:"image%b"},e),o[n]=A(o[n],{backgroundColor:"color%c",reset:"reset"},e),o[r]=A(o[r],{borderBottomColor:"color%c"},e),o},d:function(e,t){var n="setTitle",o="setTitleColor",a="setBarBottomLineColor",i={};K(e[n])||G.call(n,e[n]),K(e[a])||(G.call(a,e[a]),U(e[a].color)&&(i.error=2,i.errorMessage="颜色值不合法")),K(e[o])?r(t,i):G.call(o,e[o],function(e){i=Z(e,i),t(i)})}},showTabBar:{b:function(e){if(e.action="create",e.activeIndex=e.activeIndex||0,A(e,{color:"textColor%c",activeColor:"selectedColor%c",activeIndex:"selectedIndex%d"}),$(e.items)){var t=e.items;e.items=[],t.forEach(function(t,n){t=A(Z({},t),{title:"name%s",tag:"tag%s",icon:"icon%b",activeIcon:"activeIcon%b",badge:"redDot%s"},{tag:n,title:t.title,icon:t.icon,activeIcon:t.activeIcon,badge:F(t.badge)?"-1":t.badge}),e.items.push(t)})}return e},d:function(e,t,n){F(re.showTabBar)?re.showTabBar={opt:n}:console.error("showTabBar 只能调用一次"),ae.on("tabClick",function(e){var n={};A(n,{tag:"index%d"},{tag:q(e.data)&&e.data.tag?e.data.tag:"0"}),t(n)}),G.call("tabBar",e,function(e){b("showTabBar",e)})}},setTabBarBadge:{m:"tabBar",b:function(e){return e.action="redDot",A(e,{index:"tag%s",badge:"redDot%s"},{index:e.index}),e}},showActionSheet:{m:"actionSheet",b:function(e){if(A(e,{items:"btns",cancelButtonText:"cancelBtn%s"}),$(e.btns)){var t=e.btns;e.btns=[],t.forEach(function(t){return e.btns.push(t+"")})}return F(e.cancelBtn)&&(e.cancelBtn="取消"),e},a:function(e,t){return $(t.btns)&&e.index===t.btns.length&&(e.index=-1),e}},redirectTo:{b:function(e){return A(e,{_:"url"}),q(e.data)&&(e.url=E(e.url,e.data)),e},d:function(e){e.url&&window.location.replace(e.url)}},pushWindow:{b:function(e){return A(e,{_:"url",params:"param"}),e.url.indexOf("?")>-1&&console.warn("如需在 url 上携带数据，请使用 data 参数"),e.url.indexOf("__webview_options__")>-1&&console.warn("如需指定启动参数，请使用 params 参数"),q(e.data)&&(e.url=E(e.url,e.data),delete e.data),e}},popWindow:{b:function(e){return e=a(e),q(e.data)||(e.data={___forResume___:e.data}),e}},popTo:{b:function(e){return A(e,{_:function(){var t=void 0;return J(e._)&&(t="index"),H(e._)&&(t="urlPattern"),t}()}),q(e.data)||(e.data={___forResume___:e.data}),e}},allowPullDownRefresh:{d:function(e){var t="onPullDownRefresh";A(e,{_:"allow"}),e.allow=!!F(e.allow)||!!e.allow,q(re[t])?re[t].allow=e.allow:(re[t]={allow:e.allow},ae.onPullDownRefresh()),re[t].allow?G.call("restorePullToRefresh"):re[t].event&&re[t].event.preventDefault()}},choosePhoneContact:{m:"contact"},chooseAlipayContact:{m:"chooseContact",b:function(e){return A(e,{_:"count"}),F(e.count)&&(e.count=1),1===e.count?e.type="single":(e.type="multi",e.count<=0||e.count>10?e.multiMax=10:e.multiMax=e.count),delete e.count,e},a:function(e){return $(e.contacts)&&e.contacts.forEach(function(e){A(e,{headImageUrl:"avatar",name:"realName"}),delete e.from}),e}},share:{b:function(e){var t={},n={};return t.onlySelectChannel=["ALPContact","ALPTimeLine","ALPCommunity","Weibo","DingTalkSession","SMS","Weixin","WeixinTimeLine","QQ","QQZone"],I(e,"bizType")&&(t.bizType=e.bizType),n=Z({},e),delete n.bizType,delete n.onlySelectChannel,A(n,{image:"imageUrl"}),re.share={startShare:t,shareToChannel:n},e},d:function(e,t){!1===e.showToolBar&&G.call("setToolbarMenu",{menus:[],override:!0}),G.call("startShare",re.share.startShare,function(e){var n=re.share.shareToChannel;e.channelName?G.call("shareToChannel",{name:e.channelName,param:n},t):t(e)})}},datePicker:{b:function(e){switch(A(e,{_:"formate",formate:"mode",currentDate:"beginDate",startDate:"minDate",endDate:"maxDate"}),e.mode){case"HH:mm:ss":e.mode=0;break;case"yyyy-MM-dd":e.mode=1;break;case"yyyy-MM-dd HH:mm:ss":e.mode=2;break;default:e.mode=1}return e},a:function(e){return H(e.date)&&(e.date=e.date.replace(/\//g,"-").trim()),e}},chooseCity:{m:"getCities",b:function(e){function t(e){var t;return $(e)&&(t=[],e.forEach(function(e){t.push(A({},{city:"name",adCode:"adcode%s",spell:"pinyin"},e))}),e=t),e}var n,r;return A(e,{showHotCities:"needHotCity",cities:"customCities",hotCities:"customHotCities"}),!0===e.showLocatedCity?(e.currentCity="",e.adcode=""):(delete e.currentCity,delete e.adcode),delete e.showLocatedCity,n=e.customCities,F(e.customCities)||(e.customCities=t(n)),r=e.customHotCities,F(e.customHotCities)||(e.customHotCities=t(r)),e},a:function(e){return A(e,{adcode:"adCode"}),e}},onBack:{a:function(e){var t={};return q(re.onBack)?re.onBack.event=e:re.onBack={event:e,allowButton:!0},!1===re.onBack.allowButton&&e.preventDefault(),t.backAvailable=re.onBack.allowButton,t},e:{handleEventData:!1}},offBack:{},onResume:{a:function(e){var t={};return F(e.data)||(t.data=e.data),I(t,"___forResume___")&&(t.data=t.___forResume___),t},e:{handleEventData:!1}},offResume:{},onPause:{},offPause:{},onPageResume:{a:function(e){var t={};return F(e.data)||(t.data=e.data),I(t,"___forResume___")&&(t.data=t.___forResume___),t},e:{handleEventData:!1}},offPageResume:{},onPagePause:{},offPagePause:{},onTitleClick:{},offTitleClick:{},onPullDownRefresh:{m:"firePullToRefresh",a:function(e){var t={},n="onPullDownRefresh";return q(re[n])?re[n].event=e:re[n]={event:e,allow:!0},!1===re[n].allow&&re[n].event.preventDefault(),t.refreshAvailable=re[n].allow,t},e:{handleEventData:!1}},offPullDownRefresh:{m:"firePullToRefresh"},onNetworkChange:{d:function(e,t,n,r){var o=function(){return ae.getNetworkType(t)};u("h5NetworkChange",r,o),ae.on("h5NetworkChange",o)}},offNetworkChange:{d:function(e,t,n,r){c("h5NetworkChange",r)}},onAccelerometerChange:{b:function(){G.call("watchShake",{monitorAccelerometer:!0})},a:function(e){var t={};return A(t,{x:"x",y:"y",z:"z"},q(e.data)?e.data:e),t},e:{handleEventData:!1}},offAccelerometerChange:{b:function(){G.call("watchShake",{monitorAccelerometer:!1})}},onCompassChange:{b:function(){G.call("watchShake",{monitorCompass:!0})},a:function(e){var t={};return A(t,{direction:"direction"},q(e.data)?e.data:e),t},e:{handleEventData:!1}},offCompassChange:{b:function(){G.call("watchShake",{monitorCompass:!1})}},onBackgroundAudioPlay:{b:function(e){return re.getBAPSI.on(),e}},offBackgroundAudioPlay:{},onBackgroundAudioPause:{b:function(e){return re.getBAPSI.on(),e}},offBackgroundAudioPause:{},onBackgroundAudioStop:{b:function(e){return re.getBAPSI.on(),e}},offBackgroundAudioStop:{},onAppResume:{},offAppResume:{},onAppPause:{},offAppPause:{},getNetworkType:{a:function(e){return F(e.networkInfo)||(e.networkType=M(e.networkInfo)),delete e.err_msg,delete e.networkInfo,e}},scan:{b:function(e){return A(e,{_:"type"}),e.type=e.type||"qr",e},a:function(e){return(e.qrCode||e.barCode)&&(e.code=e.qrCode||e.barCode,delete e.qrCode,delete e.barCode),e}},watchShake:{b:function(e){return K(e)&&(e=null),e}},getLocation:{b:function(e){return A(e,{accuracy:"horizontalAccuracy",type:"requestType"}),F(e.requestType)&&(e.requestType=2),N()&&(F(e.isHighAccuracy)&&(e.isHighAccuracy=!0),F(e.isNeedSpeed)&&(e.isNeedSpeed=!0)),e},a:function(e){return A(e,{citycode:"cityCode",adcode:"adCode"}),F(e.city)&&e.province&&(e.city=e.province),e.latitude&&(e.latitude=P("%s",e.latitude)),e.longitude&&(e.longitude=P("%s",e.longitude)),e.accuracy&&(e.accuracy=P("%f",e.accuracy)),e.speed&&(e.speed=P("%f",e.speed)),e}},getSystemInfo:{a:function(e){if(!I(e,"error")){e.pixelRatio=P("%f",e.pixelRatio),e.windowWidth=P("%d",e.windowWidth),e.language=(e.language||"").replace(/\s?\w+\/((?:\w|-)+)$/,"$1"),e.windowHeight=P("%d",e.windowHeight);try{O()&&ae.compareVersion("10.0.12")<0&&(e.windowHeight=window.screen.height-64)}catch(e){}}return e}},vibrate:{},getServerTime:{},previewImage:{m:"imageViewer",b:function(e){return A(e,{_:"urls",current:"init%d"}),F(e.init)&&(e.init=0),e.images=[],(e.urls||[]).forEach(function(t){e.images.push({u:t})}),delete e.urls,e}},chooseImage:{b:function(e){return A(e,{_:"count%d"}),F(e.count)&&(e.count=1),H(e.sourceType)&&(e.sourceType=[e.sourceType]),e},a:function(e){return A(e,{errorCode:"error",errorDesc:"errorMessage",localIds:"apFilePaths",tempFilePaths:"apFilePaths"}),delete e.scene,delete e.localIds,delete e.tempFilePaths,H(e.apFilePaths)&&(e.apFilePaths=x(e.apFilePaths)),e}},chooseVideo:{b:function(e){return A(e,{_:"maxDuration%d"}),H(e.sourceType)&&(e.sourceType=[e.sourceType]),H(e.camera)&&(e.camera=[e.camera]),e},a:function(e){switch(A(e,{errorCode:"error",errorDesc:"errorMessage",msg:"errorMessage",localId:"apFilePath",tempFilePath:"apFilePath",tempFile:"apFilePath"}),delete e.localId,delete e.tempFilePath,delete e.tempFile,e.error){case 0:delete e.error;break;case 1:e.error=2;break;case 2:e.error=10;break;case 3:e.error=11;break;case 4:e.error=12}return e}},uploadFile:{b:function(e){return A(e,{headers:"header",fileName:"name",fileType:"type"}),o(e.filePath)&&(e.localId=e.filePath,delete e.filePath),e},a:function(e){return 2===e.error&&(e.error=11),e}},saveImage:{b:function(e,t){return A(e,{_:"url",url:"src"}),j(t)&&(e.cusHandleResult=!0),e}},downloadFile:{b:function(e){return A(e,{headers:"header"}),e},a:function(e){return A(e,{tempFilePath:"apFilePath",errorCode:"error"}),delete e.tempFilePath,e}},setSessionData:{b:function(e){return e=a(e),q(e.data)||(e.data={data:e.data}),R(e.data,function(t,n){e.data[t]=JSON.stringify(n)}),e}},getSessionData:{b:function(e){return H(e._)&&(e.keys=[e._]),$(e._)&&(e.keys=e._),delete e._,e},a:function(e){return R(e.data,function(t,n){e.data[t]=x(n)}),e}},startBizService:{b:function(e){return A(e,{_:"name",params:"param"}),e}},tradePay:{b:function(e){return A(e,{_:"orderStr"}),e}},getAuthCode:{b:function(e){return A(e,{_:"scopes"}),H(e.scopes)?e.scopeNicks=[e.scopes]:$(e.scopes)?e.scopeNicks=e.scopes:e.scopeNicks=["auth_base"],delete e.scopes,e},a:function(e){return A(e,{authcode:"authCode"}),e}},getAuthUserInfo:{a:function(e){return A(e,{nick:"nickName",userAvatar:"avatar"}),e}},openInBrowser:{b:function(e){return A(e,{_:"url"})}},openLocation:{b:function(e){return F(e.scale)&&(e.scale=15),e}},showPopMenu:{b:function(e){if(A(e,{_:"items",items:"menus"}),q(re.showPopMenu)?re.showPopMenu.menus={}:re.showPopMenu={menus:{}},$(e.menus)){var t=e.menus;e.menus=[],t.forEach(function(t,n){H(t)&&(t={title:t}),F((t=A(Z({},t),{title:"name%s",tag:"tag%s",badge:"redDot%s"},{tag:n,title:t.title,badge:F(t.badge)?"-1":t.badge})).icon)||(t.icon=P("%b",t.icon)),e.menus.push(t),re.showPopMenu.menus[t.name]=n})}return e},d:function(e,t){!0!==re.showPopMenu.onEvent&&(re.showPopMenu.onEvent=!0,ae.on("popMenuClick",function(e){var n={};A(n,{title:"index%d"},{title:q(e.data)&&e.data.title?re.showPopMenu.menus[e.data.title]:"-1"}),t(n)})),G.call("showPopMenu",e,function(e){b("showPopMenu",e)})}},setOptionButton:{m:"setOptionMenu",b:function(e){if(H(e._)&&(e.title=e._,delete e._),$(e._)&&(e.items=e._,delete e._),A(e,{items:"menus",type:"iconType",badge:"redDot%s"}),F(e.icon)||(e.icon=P("%b",e.icon)),q(re.setOptionButton)?re.setOptionButton.menus=[]:re.setOptionButton={menus:[]},$(e.menus)){var t=e.menus;e.menus=[],t.forEach(function(n,r){F((n=A(Z({},n),{type:"icontype",badge:"redDot%s"},{badge:F(n.badge)?"-1":n.badge})).icon)||(n.icon=P("%b",n.icon)),e.menus.unshift(n),re.setOptionButton.menus[t.length-1-r]=r}),e.menus.length>0&&F(e.override)&&(e.override=!0)}if(j(re.setOptionButton.onEvent)&&ae.off("optionMenu",re.setOptionButton.onEvent),j(e.onClick)){var n=e.onClick,r=function(e){var t=0,r={};q(e.data)&&J(e.data.index)&&re.setOptionButton.menus.length>0&&(t=re.setOptionButton.menus[e.data.index]),r.index=P("%d",t),n(r)};re.setOptionButton.onEvent=r,!0!==e.reset&&ae.on("optionMenu",r),delete e.onClick}return e},d:function(e,t){G.call("setOptionMenu",e,t),O()&&r(t,{}),ae.showOptionButton()}},showOptionButton:{m:"showOptionMenu"},hideOptionButton:{m:"hideOptionMenu"},showBackButton:{},hideBackButton:{},allowBack:{d:function(e){A(e,{_:"allowButton"}),e.allowButton=!!F(e.allowButton)||!!e.allowButton,z(e.allowGesture)&&G.call("setGestureBack",{val:e.allowGesture}),q(re.onBack)?re.onBack.allowButton=e.allowButton:(re.onBack={allowButton:e.allowButton},ae.onBack()),!1===e.allowButton&&re.onBack.event&&re.onBack.event.preventDefault()}},startRecord:{m:"startAudioRecord",b:function(e){return A(e,{maxDuration:"maxRecordTime%f",minDuration:"minRecordTime%f",bizType:"business"},{maxDuration:e.maxDuration||60,minDuration:e.minDuration||1}),F(e.business)&&(e.business="apm-h5"),e},a:function(e){return A(e,{tempFilePath:"apFilePath",identifier:"apFilePath"}),e}},stopRecord:{m:"stopAudioRecord"},cancelRecord:{m:"cancelAudioRecord"},playVoice:{m:"startPlayAudio",b:function(e){return A(e,{_:"filePath",filePath:"identifier",bizType:"business"}),F(e.business)&&(e.business="apm-h5"),e},a:function(e){return A(e,{identifier:"filePath"}),e}},pauseVoice:{m:"pauseAudioPlay"},resumeVoice:{m:"resumeAudioPlay"},stopVoice:{m:"stopAudioPlay"},makePhoneCall:{d:function(e){var t="tel:";A(e,{_:"number"}),t+=e.number,G.call("openInBrowser",{url:t})}},playBackgroundAudio:{b:function(e){return A(e,{_:"url",url:"audioDataUrl%s",title:"audioName%s",singer:"singerName%s",describe:"audioDescribe%s",logo:"audioLogoUrl%s",cover:"coverImgUrl%s",bizType:"business"},{bizType:e.bizType||"apm-h5"}),e},a:function(e){return A(e,{describe:"errorMessage"}),y(e,12,0),e}},pauseBackgroundAudio:{a:function(e){return A(e,{describe:"errorMessage"}),y(e,12,0),e}},stopBackgroundAudio:{a:function(e){return A(e,{describe:"errorMessage"}),y(e,12,0),e}},seekBackgroundAudio:{b:function(e){return A(e,{_:"position",bizType:"business"},{bizType:e.bizType||"apm-h5"}),e.position=P("%f",e.position),e},a:function(e){return A(e,{describe:"errorMessage"}),y(e,12,0),e}},getBackgroundAudioPlayerState:{a:function(e){return A(e,{audioDataUrl:"url",describe:"errorMessage"}),y(e,12,0),e}}},ae={version:"3.0.3",ua:ee,isAlipay:B(/AlipayClient/),alipayVersion:function(){var e=ee.match(/AlipayClient[a-zA-Z]*\/(\d+(?:\.\d+)+)/);return e&&e.length?e[1]:""}(),compareVersion:function(e){var t=ae.alipayVersion.split(".");e=e.split(".");for(var n,r,o=0;o<t.length;o++){if(n=parseInt(e[o],10)||0,r=parseInt(t[o],10)||0,n>r)return-1;if(n<r)return 1}return 0},parseQueryString:function(e){var t,n={},r=e||window.location.search,o={true:!0,false:!1};r=(r=0===r.indexOf("?")?r.substr(1):r)?r.split("&"):"";for(var a=0;a<r.length;a++)(t=r[a].split("="))[1]=decodeURIComponent(t[1]),t[1]=F(o[t[1]])?t[1]:o[t[1]],n[t[0]]=t[1];return ie("parseQueryString"),n},enableDebug:function(){ae.debug=!0},on:function(e,t){(e=e.replace(/ready/,X+"Ready")).split(/\s+/g).forEach(function(e){document.addEventListener(e,t,!1)})},off:function(e,t){document.removeEventListener(e,t,!1)},trigger:function(e,t){var n=document.createEvent("Events");return n.initEvent(e,!1,!0),n.data=t||{},document.dispatchEvent(n),n},ready:function(e){function n(n){t()?(j(e)&&e(),j(n)&&n()):ae.on("ready",function(){j(e)&&e(),j(n)&&n()})}if(te)return new Promise(n);n()},call:function(){function e(e,t){var n,o,a,i,f,y,_,P,A,B;n=r[0]+"",o=r[1],F(a=r[2])&&j(o)&&(a=o,o={}),!q(o)&&r.length>=2&&(o={_:o}),F(o)&&(o={}),i=p(n,o,a),f=m(n,i),F(i)&&console.error("please confirm "+n+".before() returns the options."),A=v(n),B=I(o,"_")?o._:o,S(n,B,i),_=s(n),P=l(n),y=function(r){var u=void 0;r=r||{},_&&!1!==d(n,"handleEventData")&&(u=w(r)),F(u=g(n,u||r,i,o,a))&&console.error("please confirm "+n+".after() returns the result."),u=b(n,u),S(n,B,i,r,u),I(u,"error")||I(u,"errorMessage")?(j(t)&&t(u),j(f.fail)&&f.fail(u)):(j(e)&&e(u),j(f.success)&&f.success(u)),j(f.complete)&&f.complete(u),j(a)&&a(u)},j(A)?A(i,y,o,a):_?(u(_,a,y,f),ae.on(_,y)):P?c(P,a):G.call(h(n),i,y),ie(n)}for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];if(te)return ae.ready().then(function(){return new Promise(e)});t()?e():ne.push(r)},callSync:function(){var e,t,n,r,o;if(e=(arguments.length<=0?void 0:arguments[0])+"",t=arguments.length<=1?void 0:arguments[1],!q(t)&&arguments.length>=2&&(t={_:t}),F(t)&&(t={}),n=p(e,t),F(n)&&console.error("please return the options from "+e+".before()"),r=v(e),o=I(t,"_")?t._:t,S(e,o,n),j(r))return r(n,t);if(G&&G.callSync){var a=G.callSync(h(e),n);if(q(a)&&!V(a)){var i=g(e,a,n,t);return F(i)&&console.error("please return the result from "+e+".after()"),i=b(e,i),S(e,o,n,a,i),i}return S(e,o,n,a),a}var u="please invoke sync api after AlipayJSBridgeReady.";G&&!G.callSync&&(u="AlipayJSBridge.callSync is undefined，please run "+e+" in service worker"),console.error(u),ie(e)},extendJSAPI:function(){function e(e,t){H(e)&&(e=[e]),R(e,function(r){var o=r;if(!0!==t){var a=e[o];j(a)&&(a={doing:a}),H(a)&&(o=a,(a={})[o]={}),oe[o]=A(oe[o]||{},{mapping:"m",before:"b",doing:"d",after:"a"},a),q(a.extra)&&(oe[o].e=oe[o].e||{},oe[o].e=Z(oe[o].e,a.extra))}n(o)?ae[o]=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return ae.callSync.apply(null,[o].concat(t))}:ae[o]=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return ae.call.apply(null,[o].concat(t))}})}return e.mapping=A,e.toType=P,e}()};ae.isAlipay||console.warn("Run alipayjsapi.js in Alipay please!"),function(){ae.extendJSAPI(oe,!0),ae.ready(function(){function e(){ue(function(){var t=ne.shift();ae.call.apply(null,t),ne.length&&e()})}!te&&ne.length&&e()})}();var ie=function(){function e(){setTimeout(function(){t.length>0&&(G.call("remoteLog",{type:"monitor",bizType:"ALIPAYJSAPI",logLevel:3,actionId:"MonitorReport",seedId:"ALIPAYJSAPI_INVOKE_COUNTER",param1:t.join("|")}),ae.debug&&console.info("API_INVOKE_QUEUE>",t),t=[])},0)}var t=[],n=void 0;return function(r){t.push(r),!F(n)&&clearTimeout(n),t.length>=10?e():n=setTimeout(e,5e3)}}(),ue=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){window.setTimeout(function(){e(+new Date,t)},1e3/60)}}();e._AP=ae,"undefined"!=typeof module&&module.exports?module.exports=ae:"function"==typeof define&&(define.amd||define.cmd)?define(function(){return ae}):e.ap=e.AP=ae}(self);